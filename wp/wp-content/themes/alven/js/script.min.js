"use strict";function setBtn(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}$(function(){function e(e){var t=e>v?-1:1;return v=e,t}function t(e){e.css("height",e.data("height")).removeClass("on")}function i(e,t){if(q.length&&k.length&&!M.hasClass("menu-open")&&(e>q.offset().top-N-40?O.addClass("fixed"):O.removeClass("fixed"),O.hasClass("fixed")&&(0>t?O.addClass("on"):O.removeClass("on"))),J.length){var i=K-N+200;J.hasClass("single-on")?i-=400:e>K-N?J.addClass("fixed"):J.removeClass("fixed"),e>i&&(0>t?J.addClass("on"):J.removeClass("on"))}if(A.length&&(y.hasClass("single-post")||y.hasClass("page-template-default"))){var n=(e-q.offset().top)/(q.innerHeight()-u);e>q.offset().top&&TweenMax.set(A,{scaleX:n})}}function n(){function e(){var e=0,i=t.length,n=t.eq(0).innerWidth();for(e;i>e;e++){var a=t.eq(e).offset().left+n;a>w||n>a?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=W.find(".spotlight-post"),i=W.find(".container").innerWidth();e(),i>w?E?E[0].enable():E=Draggable.create("#spotlightDrag",{type:"x",bounds:W,cursor:"grab",throwProps:!0,edgeResistance:.65,onDrag:e,onDragStart:function(){W.find(".container").addClass("grabbing")},onDragEnd:function(){W.find(".container").removeClass("grabbing")}}):E&&(E[0].disable(),TweenMax.set(E,{x:"0px"}))}function a(e){var t=20,i=D.innerHeight(),n=q.offset().top,a=q.innerHeight();a+2*t>i&&u>i+N+t?e>=S-N-t?(e+i+N+t>n+a-t?D.css({top:a-t-i+20,width:P}).removeClass("fixed").addClass("fixedBot"):D.css({top:N+t,width:P}).removeClass("fixedBot").addClass("fixed"),e>(a+n)/2?(D.find("li").eq(0).find(".img").addClass("off"),D.find("li").eq(1).find(".img").addClass("on")):(D.find("li").eq(0).find(".img").removeClass("off"),D.find("li").eq(1).find(".img").removeClass("on"))):D.css({top:0,width:P}).removeClass("fixed fixedBot"):D.css({top:0}).removeClass("fixed fixedBot")}function o(e){var t=e.length,i=0;for(TweenMax.set(e,{opacity:0}),i;t>i;i++)new ScrollMagic.Scene({triggerElement:e[i]}).triggerHook(.7).setTween(TweenMax.to(e.eq(i),.25,{opacity:1})).addTo(x)}function s(){TweenMax.set([R.find(".menu-title"),R.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(R.find("li"),{y:"-120%",opacity:0})}function l(e,t,i){function n(e,t){var i=p.not(".transfered"),a=z.find("li").not(".transfered"),o=a.length,s=Math.floor(Math.random()*o);p.find("a").removeClass("on"),i.eq(t).find("a").addClass("off"),X=setTimeout(function(){z.find("div.grid").hasClass("is-hovered")||i.eq(e).hasClass("cta")||i.eq(e).find("a").addClass("on").removeClass("off")},1500),j=setTimeout(n,3500,s,e)}var a='<div class="grid">',o=0,s=0,l=0,d,r=0,p,c=[],h={3:[-1,0,-1],6:[-2,0,0,-1,-1,-1]},f={3:[1,2,0],6:[2,3,4,1,5,0]},m=Math.ceil(t/i),g=[];for(l=0;i>l;l++)g[l]=m+h[i][l];var u=t-g.reduce(function(e,t){return e+t},0);for(l=0;u>l;l++){var w=f[i][l%i];g[w]++}var b=3===i?1:3,v=3===i?3:2;if(clearTimeout(X),clearTimeout(j),G.length)for(l;l<G.length;l++)G[l].destroy(!0);for(l=0;i>l;l++)c[l]=[],a+='<div class="po-item-col col-2"></div>';a+="</div>",z.find(".container").append(a);for(var T;t>s;)for(l=0;i>l;l++)c[l]++,g[l]>=c[l]&&(l===b&&c[l]===v&&(T='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),T=z.find("ul.grid").find("li").eq(s).hasClass("transfered")?'<div class="po-item transfered">'+z.find("li").eq(s).html()+"</div>":'<div class="po-item">'+z.find("li").eq(s).html()+"</div>",z.find(".po-item-col").eq(l).append(T),s++);for(TweenMax.set(z.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)G[l]=new ScrollMagic.Scene({triggerElement:z.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(z.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(x);d=z.find("div.grid").find(".transfered"),r=d.length,p=z.find(".po-item"),n(0,-1),p.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),p.find("a").removeClass("on"),$(this).removeClass("off"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered"),$(this).addClass("off")})}function d(){if(979>=w){var e=$(".team > li").length,t=Q.offset().left-20,i=t+Q.width(),n=$(".container-team").width(),a=0,o=0;Q.find("li").hasClass("open")&&(a=Q.find("> li.open").position().left,o=Q.find("> li.open").offset().left),w>767&&e>5?(TweenMax.set([$(".wrapper-btn-glob.prev"),$(".wrapper-btn-glob.next")],{className:"-=open"}),t<-Math.ceil(2*V)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+2*V)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"})):767>=w&&e>3&&(TweenMax.set([$(".wrapper-btn-glob.prev"),$(".wrapper-btn-glob.next")],{className:"-=open"}),t<-Math.ceil(V)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+V)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function r(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function p(){979>=w?(ee=Q.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:ee/2+"px"}),U?(767>=w?(V=$(".container-team").width()/3,Y=V):(V=$(".container-team").width()/5,Y=2*V),TweenMax.set(Q.find("> li"),{width:V+"px"}),Z=0,Q.find("> li").each(function(){Z+=$(this).outerWidth()}),Z+=2*Y,TweenMax.set(Q,{width:Z+"px",padding:"0 "+Y+"px",x:-Y}),_=V,U=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/_)*_}},onDragStart:function(){r();var e=$(".team.member-open > li.open");fe=$(".desc",e),me=new TimelineMax,$(window).width()>979?(me.to(fe,.25,{opacity:0,visibility:"hidden"}),me.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(me.to(Te,.25,{opacity:0}),me.to(Te,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),me.set(e,{className:"-=open"}),me.set(Q,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):(767>=w?(V=$(".container-team").width()/3,Y=V):(V=$(".container-team").width()/5,Y=2*V),TweenMax.set(Q.find("> li"),{width:V+"px"}),Z=0,Q.find("> li").each(function(){Z+=$(this).outerWidth()}),Z+=2*Y,TweenMax.set(Q,{width:Z+"px",padding:"0 "+Y+"px",x:-Y}),_=V,U=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/_)*_}},onDragStart:function(){r();var e=$(".team.member-open > li.open");fe=$(".desc",e),me=new TimelineMax,w>979?(me.to(fe,.25,{opacity:0,visibility:"hidden"}),me.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(me.to(Te,.25,{opacity:0}),me.to(Te,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),me.set(e,{className:"-=open"}),me.set(Q,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):U&&(TweenMax.set(Q,{clearProps:"all"}),TweenMax.set(Q.find("> li"),{clearProps:"width"}),U[0].disable())}function c(e){if(pe=e.closest("li"),de=$(".desc",pe),re=de.outerHeight(),!TweenMax.isTweening(Q.find("li"))&&!TweenMax.isTweening(Q.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(Q.hasClass("member-open"))if(pe.hasClass("open"))h();else{var t=$(".team.member-open > li.open");fe=$(".desc",t),me=new TimelineMax,w>979?(te=Q.offset().top+pe.position().top-120,t.offset().top<pe.offset().top&&(te-=parseFloat(t.css("paddingBottom"))),me.to(fe,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),me.set(pe,{className:"+=open"}).add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(pe,.25,{paddingBottom:re+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:te},ease:Cubic.easeOut},"paddingAnimation"),me.to(de,.25,{opacity:1,visibility:"visible"})):(te=pe.offset().top-120,me.to(Te,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),me.set(pe,{className:"+=open",onComplete:function(){Te.html(de.html()),TweenMax.set(Te,{height:"auto",position:"absolute"}),$e=Te.outerHeight(),TweenMax.set(Te,{height:"0",position:"relative"}),me.add("heightAnimation").to(Te,.5,{height:$e+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:te},ease:Cubic.easeOut},"heightAnimation").to(Te,.25,{opacity:1,visibility:"visible"}),Ce=pe.position().left,Me=$(".container-team").width(),ye=Ce-Me/2+pe.outerWidth()/2,TweenMax.to(Q,.5,{x:-ye,ease:Cubic.easeOut,onComplete:d})}}))}else if(te=pe.offset().top-120,TweenMax.set(Q,{className:"+=member-open"}),ce=new TimelineMax,ce.set(pe,{className:"+=open"}),d(),w>979)ce.add("paddingAnimation").to(pe,.5,{paddingBottom:re+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:te},ease:Cubic.easeOut},"paddingAnimation").to(de,.25,{opacity:1,visibility:"visible"});else{Te.html(de.html()),TweenMax.set(Te,{height:"auto",position:"absolute"}),$e=Te.outerHeight(),TweenMax.set(Te,{height:"0",position:"relative"}),ce.add("heightAnimation").to(Te,.5,{height:$e+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:te},ease:Cubic.easeOut},"heightAnimation").to(Te,.25,{opacity:1,visibility:"visible"});var i=Math.max.apply(null,Q.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:i+10+"px",ease:Cubic.easeInOut}),Ce=pe.position().left,Me=$(".container-team").width(),ye=Ce-Me/2+pe.outerWidth()/2,TweenMax.to(Q,.5,{x:-ye,ease:Cubic.easeOut,onComplete:d})}}function h(){r();var e=$(".team.member-open > li.open");fe=$(".desc",e),me=new TimelineMax,w>979?me.to(fe,.25,{opacity:0,visibility:"hidden"}).to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut}):me.to(Te,.25,{opacity:0}).to(Te,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut}),me.set(e,{className:"-=open"}).set(Q,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function f(){if(!TweenMax.isTweening(Q.find("li"))&&!TweenMax.isTweening(Q.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var e=$(".team.member-open > li.open");fe=$(".desc",e),me=new TimelineMax,me.to(fe,.25,{opacity:0,visibility:"hidden"}).set(e,{className:"-=open"}),ge=$(this).hasClass("left")?e.prev().length?e.prev():Q.find("> li").last():e.next().length?e.next():Q.find("> li").first(),te=e.offset().top<ge.offset().top?Q.offset().top+ge.position().top-parseFloat(e.css("paddingBottom"))-120:ge.offset().top-120,ue=$(".desc",ge),we=ue.outerHeight(),me.set(ge,{className:"+=open"}).add("paddingAnimation").to(ge,.25,{paddingBottom:we+"px",ease:Cubic.easeIn},"paddingAnimation").to(e,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:te},ease:Cubic.easeOut},"paddingAnimation").to(ue,.25,{opacity:1,visibility:"visible"})}}function m(e){if(!(TweenMax.isTweening(Q.find("li"))||TweenMax.isTweening(Q.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(Q)))if(d(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(Q,.25,{x:"+="+V,ease:Cubic.easeInOut}):TweenMax.to(Q,.25,{x:"-="+V,ease:Cubic.easeInOut})),979>=w&&Q.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");fe=$(".desc",t),me=new TimelineMax,me.to(Te,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),ge=e.hasClass("left")?t.prev():t.next(),te=ge.offset().top-120,ue=$(".desc",ge),me.set(ge,{className:"+=open",onComplete:function(){Te.html(de.html()),TweenMax.set(Te,{height:"auto",position:"absolute"}),$e=Te.outerHeight(),TweenMax.set(Te,{height:"0",position:"relative"}),me.add("heightAnimation").to(Te,.5,{height:$e+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:te},ease:Cubic.easeOut},"heightAnimation").to(Te,.25,{opacity:1,visibility:"visible",onComplete:d})}})}else r()}var g=$(document).height(),u=$(window).height(),w=$(window).width(),b=w,x=new ScrollMagic.Controller,v=0,T=$(document).scrollTop(),C=0,M=$("html"),y=$("body"),O=$("#header"),N=O.innerHeight(),q=$("#mainContent"),I=$("#main"),A=$("#readIndicator"),H=$(".btn"),B=$(".btn-invert"),k=$("#contentHeader"),D=$("#postSidebar"),S=0,P=0,W=$("#spotlightPost"),E=!1,F=$("#related"),R=$("#menu-responsive"),z=$("#portfolio"),X,j,G=[],J=$("#portfolioFilters"),K=J.length?J.offset().top:0,L=$(".dropdown"),Q=$(".team"),U=!1,V,Y,Z,_,ee,te;if(isMobile.any?M.addClass("is-mobile"):M.addClass("is-desktop"),i(T,C),H.length&&H.each(function(e){H.eq(e).html(setBtn(H.eq(e)))}),B.length&&B.each(function(e){B.eq(e).html(setBtn(B.eq(e)))}),q.length&&q.find("img").length){var ie=q.find("img").not(".no-scroll");o(ie)}if(D.length&&(S=D.offset().top,P=D.innerWidth()),W.length&&(n(),TweenMax.set(W.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(W.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(x)),F.length){var ne=F.find(".read-also-post");TweenMax.set(ne,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(ne,.25,{opacity:1},.1)).addTo(x)}if(z.length){var ae=z.find("li"),oe=ae.length,se=w>767?6:3;oe>se&&l(ae,oe,se)}if(Q.length){var le=Q.find(".team-member"),de,re,pe,ce,he,fe,me,ge,ue,we,be,xe,ve,Te=$(".content-desc-responsive"),$e,Ce,Me,ye;p(),d(),le.on("click",function(e){e.preventDefault(),c($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),f()}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),m($(this))}),$(".container-team").on("click",".btn-cross",function(e){e.preventDefault(),h()})}R.length&&s(),L.on("click",function(e){var i=$(this),n=2,a=L.not(i);i.hasClass("on")?t(i):(i.data("height",i.css("height")).find("li").each(function(){n+=$(this).outerHeight()}),i.css("height",n).addClass("on")),a.each(function(){t($(this))})}),$("#burger").on("click",function(e){e.preventDefault(),M.toggleClass("menu-open"),M.hasClass("menu-open")?setTimeout(function(){var e=0,t=R.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(R.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(R.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(R.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var n=$(document).scrollTop(),o=e(n);i(n,o),k.length&&!isMobile.any&&(n>20?TweenMax.to(k.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(k.find("h1"),.2,{y:"0px",opacity:1}),k.find(".img").length&&TweenMax.set(k.find(".img"),{y:"-"+n/40+"%"}),k.find(".menu-home").length&&TweenMax.set(k.find(".menu-home"),{y:"-"+n/4+"px"})),D.length&&q.length&&!isMobile.any&&a(n),L.length&&L.each(function(){t($(this))})}),$(window).on("resize",function(){if(g=$(document).height(),u=$(window).height(),w=$(window).width(),w>979&&M.removeClass("menu-open"),I.length&&k.length&&I.css("marginTop",Math.floor(k.outerHeight())),D.length&&(D.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),S=D.offset().top,P=D.innerWidth()),W.length&&n(),z.length){var e=w>767?6:3;e!==se&&z.find("div.grid")&&(z.find("div.grid").remove(),se=e,l(ae,oe,se))}Q.length&&(Q.hasClass("member-open")&&(be=$(".team.member-open > li.open"),xe=$(".desc",be),ve=xe.outerHeight(),TweenMax.set(be,{paddingBottom:ve+"px",ease:Cubic.easeInOut})),p(),d()),b!=w&&Q.length&&Q.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(Q,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),i=$("#contentHeader");if(i.length){if(i.find("h1").length){var n=new SplitText(i.find("h1"),{type:"words"});i.find("h1").css("opacity",1),e(n)}t.length&&t.css("marginTop",Math.floor(i.outerHeight()))}});
"use strict";function setBtn(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}$(function(){function e(){for(var e=[],t,n=0,i=window.location.search.substr(1).split("&");n<i.length;n++)t=i[n].split("="),e[n]=[unescape(t[0]),t.length>1?unescape(t[1]):""];return e}function t(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),t=e.find("img").prop("src");t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")})}function n(e){var t=e>O?-1:1;return O=e,t}function i(e){e.css("height",e.data("height")).removeClass("on")}function a(e,t){if(k.length&&E.length&&!I.hasClass("menu-open")&&(e>k.offset().top-B-40?H.addClass("fixed"):H.removeClass("fixed"),H.hasClass("fixed")&&(0>t?H.addClass("on"):H.removeClass("on"))),V.length){var n=Y-B+200;V.hasClass("single-on")?n-=400:e>Y-B?V.addClass("fixed"):V.removeClass("fixed"),e>n&&(0>t?V.addClass("on"):V.removeClass("on"))}if(S.length&&(A.hasClass("single-post")||A.hasClass("page-template-default"))){var i=(e-k.offset().top)/(k.innerHeight()-T);e>k.offset().top&&TweenMax.set(S,{scaleX:i})}}function o(){function e(){var e=0,n=t.length,i=t.eq(0).innerWidth();for(e;n>e;e++){var a=t.eq(e).offset().left+i;a>C||i>a?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=j.find(".spotlight-post"),n=j.find(".container").innerWidth();if(e(),n>C)if(X)X[0].enable();else{var i=Math.round($("#spotlightDrag").find(".spotlight-post").first().innerWidth());X=Draggable.create("#spotlightDrag",{type:"x",bounds:j,cursor:"grab",throwProps:!0,edgeResistance:.9,snap:{x:function(e){return Math.round(e/i)*i}},onDrag:e,onDragStart:function(){j.find(".container").addClass("grabbing")},onDragEnd:function(){j.find(".container").removeClass("grabbing")},onThrowComplete:e})}else X&&(X[0].disable(),TweenMax.set(X,{x:"0px"}))}function s(e){var t=20,n=z.innerHeight(),i=k.offset().top,a=k.innerHeight();a+2*t>n&&T>n+B+t?e>=F-B-t?(e+n+B+t>i+a-t?z.css({top:a-t-n+20,width:R}).removeClass("fixed").addClass("fixedBot"):z.css({top:B+t,width:R}).removeClass("fixedBot").addClass("fixed"),e>(a+i)/2?(z.find("li").eq(0).find(".img").addClass("off"),z.find("li").eq(1).find(".img").addClass("on")):(z.find("li").eq(0).find(".img").removeClass("off"),z.find("li").eq(1).find(".img").removeClass("on"))):z.css({top:0,width:R}).removeClass("fixed fixedBot"):z.css({top:0}).removeClass("fixed fixedBot")}function l(e){var t=e.length,n=0;for(TweenMax.set(e,{opacity:0}),n;t>n;n++)new ScrollMagic.Scene({triggerElement:e[n]}).triggerHook(.7).setTween(TweenMax.to(e.eq(n),.25,{opacity:1})).addTo(y)}function r(){TweenMax.set([J.find(".menu-title"),J.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(J.find("li"),{y:"-120%",opacity:0})}function d(e,t,n){function i(e,t){var n=c.not(".transfered"),a=K.find("li").not(".transfered"),o=a.length,s=Math.floor(Math.random()*o);c.find("a").removeClass("on"),n.eq(t).find("a").addClass("off"),L=setTimeout(function(){K.find("div.grid").hasClass("is-hovered")||n.eq(e).hasClass("cta")||n.eq(e).find("a").addClass("on").removeClass("off")},1500),Q=setTimeout(i,3500,s,e)}var a='<div class="grid">',o=0,s=0,l=0,r,d=0,c,p=[],f={3:[-1,0,-1],6:[-2,0,0,-1,-1,-1]},h={3:[1,2,0],6:[2,3,4,1,5,0]},m=Math.ceil(t/n),g=[];for(l=0;n>l;l++)g[l]=m+f[n][l];var u=t-g.reduce(function(e,t){return e+t},0);for(l=0;u>l;l++){var w=h[n][l%n];g[w]++}var b=3===n?1:3,v=3===n?3:2;if(clearTimeout(L),clearTimeout(Q),U.length)for(l;l<U.length;l++)U[l].destroy(!0);for(l=0;n>l;l++)p[l]=[],a+='<div class="po-item-col col-2"></div>';for(a+="</div>",K.find(".container").append(a);t>s;)for(l=0;n>l;l++){var x="";p[l]++,e.eq(s).length&&g[l]>=p[l]&&(l===b&&p[l]===v&&(x='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),x+=e.eq(s).hasClass("transfered")?'<div class="po-item transfered">'+e.eq(s).html()+"</div>":'<div class="po-item">'+e.eq(s).html()+"</div>",K.find(".po-item-col").eq(l).append(x),s++)}for(TweenMax.set(K.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)U[l]=new ScrollMagic.Scene({triggerElement:K.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(K.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(y);r=K.find("div.grid").find(".transfered"),d=r.length,c=K.find(".po-item"),i(0,-1),c.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),c.find("a").removeClass("on"),$(this).removeClass("off"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered"),$(this).addClass("off")})}function c(e,t){var n,i;n=de.filter(function(){var t=$(this),n=!0;return e.forEach(function(e,i){"all"!==e[1]&&n&&-1===$.inArray(e[1],$("a",t).data(e[0]).split(","))&&(n=!1)}),n}),i=n.length,pe=C>767?6:3,K.find("div.grid").remove(),history.pushState(null,null,t),d(n,i,pe)}function p(){var e=$(this);if(!e.hasClass("actif")){var t=[],n=V.find(".dropdown"),i=window.location.origin+window.location.pathname+"?";e.siblings().removeClass("actif"),e.addClass("actif").clone().prependTo(e.parents(".dropdown")),e.remove(),n.each(function(e){var n=$(this).data("filter");t[e]=[n,$(this).find(".actif").data(n)],0!==e&&(i+="&"),i+=t[e][0]+"="+t[e][1]}),c(t,i)}}function f(e){var t=V.find(".dropdown");t.each(function(n){var i=t.eq(n);if(void 0!==e[n]){var a=i.find("[data-"+e[n][0]+"="+e[n][1]+"]");a.addClass("actif").clone().prependTo(i),a.remove()}else{var o=i.data("filter");e[n]=[o,i.find(".actif").data(o)]}}),c(e,window.location.href)}function h(){if(979>=C){var e=$(".team > li").length,t=_.offset().left-20,n=t+_.width(),i=$(".container-team").width(),a=0,o=0;_.find("li").hasClass("open")&&(a=_.find("> li.open").position().left,o=_.find("> li.open").offset().left),C>767&&e>5?(TweenMax.set([$(".wrapper-btn-glob.btn-prev"),$(".wrapper-btn-glob.btn-next")],{className:"-=open"}),t<-Math.ceil(2*te)&&TweenMax.set($(".wrapper-btn-glob.btn-prev"),{className:"+=open"}),Math.ceil(n+2*te)>i&&TweenMax.set($(".wrapper-btn-glob.btn-next"),{className:"+=open"})):767>=C&&e>3&&(TweenMax.set([$(".wrapper-btn-glob.btn-prev"),$(".wrapper-btn-glob.btn-next")],{className:"-=open"}),t<-Math.ceil(te)&&TweenMax.set($(".wrapper-btn-glob.btn-prev"),{className:"+=open"}),Math.ceil(n+te)>i&&TweenMax.set($(".wrapper-btn-glob.btn-next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function m(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function g(){979>=C?(oe=_.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:oe/2+"px"}),ee?(767>=C?(te=$(".container-team").width()/3,ne=te):(te=$(".container-team").width()/5,ne=2*te),TweenMax.set(_.find("> li"),{width:te+"px"}),ie=0,_.find("> li").each(function(){ie+=$(this).outerWidth()}),ie+=2*ne,TweenMax.set(_,{width:ie+"px",padding:"0 "+ne+"px",x:-ne}),ae=te,ee=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.9,dragClickables:!0,snap:{x:function(e){return Math.round(e/ae)*ae}},onDragStart:function(){m();var e=$(".team.member-open > li.open");be=$(".desc",e),ve=new TimelineMax,$(window).width()>979?(ve.to(be,.25,{opacity:0,visibility:"hidden"}),ve.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ve.to(Oe,.25,{opacity:0}),ve.to(Oe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ve.set(e,{className:"-=open"}),ve.set(_,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):(767>=C?(te=$(".container-team").width()/3,ne=te):(te=$(".container-team").width()/5,ne=2*te),TweenMax.set(_.find("> li"),{width:te+"px"}),ie=0,_.find("> li").each(function(){ie+=$(this).outerWidth()}),ie+=2*ne,TweenMax.set(_,{width:ie+"px",padding:"0 "+ne+"px",x:-ne}),ae=te,ee=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.9,dragClickables:!0,snap:{x:function(e){return Math.round(e/ae)*ae}},onDragStart:function(){m();var e=$(".team.member-open > li.open");be=$(".desc",e),ve=new TimelineMax,C>979?(ve.to(be,.25,{opacity:0,visibility:"hidden"}),ve.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ve.to(Oe,.25,{opacity:0}),ve.to(Oe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ve.set(e,{className:"-=open"}),ve.set(_,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):ee&&(TweenMax.set(_,{clearProps:"all"}),TweenMax.set(_.find("> li"),{clearProps:"width"}),ee[0].disable())}function u(e){if(ue=e.closest("li"),me=$(".desc",ue),ge=me.outerHeight(),!TweenMax.isTweening(_.find("li"))&&!TweenMax.isTweening(_.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(_.hasClass("member-open"))if(ue.hasClass("open"))w();else{var t=$(".team.member-open > li.open");be=$(".desc",t),ve=new TimelineMax,C>979?(se=_.offset().top+ue.position().top-120,t.offset().top<ue.offset().top&&(se-=parseFloat(t.css("paddingBottom"))),ve.to(be,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),ve.set(ue,{className:"+=open"}).add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(ue,.25,{paddingBottom:ge+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:se},ease:Cubic.easeOut},"paddingAnimation"),ve.to(me,.25,{opacity:1,visibility:"visible"})):(se=ue.offset().top-120,ve.to(Oe,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),ve.set(ue,{className:"+=open",onComplete:function(){Oe.html(me.html()),TweenMax.set(Oe,{height:"auto",position:"absolute"}),qe=Oe.outerHeight(),TweenMax.set(Oe,{height:"0",position:"relative"}),ve.add("heightAnimation").to(Oe,.5,{height:qe+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:se},ease:Cubic.easeOut},"heightAnimation").to(Oe,.25,{opacity:1,visibility:"visible"}),Ne=ue.position().left,Ie=$(".container-team").width(),Ae=Ne-Ie/2+ue.outerWidth()/2,TweenMax.to(_,.5,{x:-Ae,ease:Cubic.easeOut,onComplete:h})}}))}else if(se=ue.offset().top-120,TweenMax.set(_,{className:"+=member-open"}),we=new TimelineMax,we.set(ue,{className:"+=open"}),h(),C>979)we.add("paddingAnimation").to(ue,.5,{paddingBottom:ge+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:se},ease:Cubic.easeOut},"paddingAnimation").to(me,.25,{opacity:1,visibility:"visible"});else{Oe.html(me.html()),TweenMax.set(Oe,{height:"auto",position:"absolute"}),qe=Oe.outerHeight(),TweenMax.set(Oe,{height:"0",position:"relative"}),we.add("heightAnimation").to(Oe,.5,{height:qe+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:se},ease:Cubic.easeOut},"heightAnimation").to(Oe,.25,{opacity:1,visibility:"visible"});var n=Math.max.apply(null,_.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:n+10+"px",ease:Cubic.easeInOut}),Ne=ue.position().left,Ie=$(".container-team").width(),Ae=Ne-Ie/2+ue.outerWidth()/2,TweenMax.to(_,.5,{x:-Ae,ease:Cubic.easeOut,onComplete:h})}}function w(){m();var e=$(".team.member-open > li.open");be=$(".desc",e),ve=new TimelineMax,C>979?ve.to(be,.25,{opacity:0,visibility:"hidden"}).to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut}):ve.to(Oe,.25,{opacity:0}).to(Oe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut}),ve.set(e,{className:"-=open"}).set(_,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function b(){if(!TweenMax.isTweening(_.find("li"))&&!TweenMax.isTweening(_.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var e=$(".team.member-open > li.open");be=$(".desc",e),ve=new TimelineMax,ve.to(be,.25,{opacity:0,visibility:"hidden"}).set(e,{className:"-=open"}),xe=$(this).hasClass("left")?e.prev().length?e.prev():_.find("> li").last():e.next().length?e.next():_.find("> li").first(),se=e.offset().top<xe.offset().top?_.offset().top+xe.position().top-parseFloat(e.css("paddingBottom"))-120:xe.offset().top-120,$e=$(".desc",xe),Te=$e.outerHeight(),ve.set(xe,{className:"+=open"}).add("paddingAnimation").to(xe,.25,{paddingBottom:Te+"px",ease:Cubic.easeIn},"paddingAnimation").to(e,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:se},ease:Cubic.easeOut},"paddingAnimation").to($e,.25,{opacity:1,visibility:"visible"})}}function v(e){if(!(TweenMax.isTweening(_.find("li"))||TweenMax.isTweening(_.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(_)))if(h(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(_,.25,{x:"+="+te,ease:Cubic.easeInOut}):TweenMax.to(_,.25,{x:"-="+te,ease:Cubic.easeInOut})),979>=C&&_.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");be=$(".desc",t),ve=new TimelineMax,ve.to(Oe,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),xe=e.hasClass("left")?t.prev():t.next(),se=xe.offset().top-120,$e=$(".desc",xe),ve.set(xe,{className:"+=open",onComplete:function(){Oe.html(me.html()),TweenMax.set(Oe,{height:"auto",position:"absolute"}),qe=Oe.outerHeight(),TweenMax.set(Oe,{height:"0",position:"relative"}),ve.add("heightAnimation").to(Oe,.5,{height:qe+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:se},ease:Cubic.easeOut},"heightAnimation").to(Oe,.25,{opacity:1,visibility:"visible",onComplete:h})}})}else m()}var x=$(document).height(),T=$(window).height(),C=$(window).width(),M=C,y=new ScrollMagic.Controller,O=0,q=$(document).scrollTop(),N=0,I=$("html"),A=$("body"),H=$("#header"),B=H.innerHeight(),k=$("#mainContent"),D=$("#main"),S=$("#readIndicator"),P=$(".btn"),W=$(".btn-invert"),E=$("#contentHeader"),z=$("#postSidebar"),F=0,R=0,j=$("#spotlightPost"),X=!1,G=$("#related"),J=$("#menu-responsive"),K=$("#portfolio"),L,Q,U=[],V=$("#portfolioFilters"),Y=V.length?V.offset().top:0,Z=$(".dropdown"),_=$(".team"),ee=!1,te,ne,ie,ae,oe,se;if(isMobile.any?I.addClass("is-mobile"):I.addClass("is-desktop"),a(q,N),t(),P.length&&P.each(function(e){P.eq(e).html(setBtn(P.eq(e)))}),W.length&&W.each(function(e){W.eq(e).html(setBtn(W.eq(e)))}),k.length&&k.find("img").length){var le=k.find("img").not(".no-scroll");l(le)}if(z.length&&(F=z.offset().top,R=z.innerWidth()),j.length&&(o(),TweenMax.set(j.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(j.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(y)),G.length){var re=G.find(".read-also-post");TweenMax.set(re,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(re,.25,{opacity:1},.1)).addTo(y)}if(K.length){var de=K.find("li"),ce=de.length,pe=C>767?6:3;if(window.location.search){var fe=e();f(fe)}else d(de,ce,pe);V.on("click","li",p)}if(_.length){var he=_.find(".team-member"),me,ge,ue,we,be,ve,xe,$e,Te,Ce,Me,ye,Oe=$(".content-desc-responsive"),qe,Ne,Ie,Ae;g(),h(),he.on("click",function(e){e.preventDefault(),u($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),b()}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),v($(this))}),$(".container-team").on("click",".btn-cross",function(e){e.preventDefault(),w()})}J.length&&r(),Z.on("click",function(){var e=$(this),t=2,n=Z.not(e);e.hasClass("on")?i(e):(e.data("height",e.css("height")).find("li").each(function(){t+=$(this).outerHeight()}),e.css("height",t).addClass("on")),n.each(function(){i($(this))})}),$("#burger").on("click",function(e){e.preventDefault(),I.toggleClass("menu-open"),I.hasClass("menu-open")?setTimeout(function(){var e=0,t=J.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(J.find(".menu-title").eq(e),.25,{y:"0%",opacity:1,z:.01,force3d:!0}),TweenMax.to(J.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1,z:.01,force3d:!0}).delay(.05),TweenMax.staggerTo(J.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1,z:.01,force3d:!0},.08)},380):r()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var e=$(document).scrollTop(),t=n(e);a(e,t),E.length&&!isMobile.any&&(e>20?TweenMax.to(E.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(E.find("h1"),.2,{y:"0px",opacity:1}),E.find(".img").length&&TweenMax.set(E.find(".img"),{y:"-"+e/40+"%"}),E.find(".menu-home").length&&TweenMax.set(E.find(".menu-home"),{y:"-"+e/4+"px"})),z.length&&k.length&&!isMobile.any&&s(e),Z.length&&Z.each(function(){i($(this))})}),$(window).on("resize",function(){if(x=$(document).height(),T=$(window).height(),C=$(window).width(),C>979&&I.removeClass("menu-open"),D.length&&E.length&&D.css("marginTop",Math.floor(E.outerHeight())),z.length&&(z.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),F=z.offset().top,R=z.innerWidth()),j.length&&o(),K.length){var e=C>767?6:3;e!==pe&&K.find("div.grid")&&(K.find("div.grid").remove(),pe=e,d(de,ce,pe))}_.length&&(_.hasClass("member-open")&&(Ce=$(".team.member-open > li.open"),Me=$(".desc",Ce),ye=Me.outerHeight(),TweenMax.set(Ce,{paddingBottom:ye+"px",ease:Cubic.easeInOut})),g(),h()),M!=C&&_.length&&_.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(_,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),n=$("#contentHeader");if(n.length){if(n.find("h1").length){var i=new SplitText(n.find("h1"),{type:"words"});n.find("h1").css("opacity",1),e(i)}t.length&&t.css("marginTop",Math.floor(n.outerHeight()))}});
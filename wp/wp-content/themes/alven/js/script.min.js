"use strict";function setBtn(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}function setGallery(e,t){function n(){i.each(function(){var e=$(this).width(),n=$(this).offset().left+e;n>t||e>n?$(this).addClass("off"):$(this).removeClass("off")})}var i=e.find("div"),a=0,o=e.closest(".container-small").length?e.closest(".container-small"):e.closest(".container");t>767?dragGallery?(dragGallery[0].enable(),e.width(e.data("width"))):e.imagesLoaded().always(function(){i.each(function(){a+=Math.ceil($(this).width())}),e.width(a).data("width",a),dragGallery=Draggable.create(e,{type:"x",bounds:o,cursor:"grab",throwProps:!0,onDrag:n,onDragStart:function(){e.addClass("grabbing")},onDragEnd:function(){e.removeClass("grabbing")},onThrowComplete:n}),n()}):dragGallery&&(dragGallery[0].disable(),TweenMax.set(e,{x:"0px",width:"100%"}))}var dragGallery=!1;$(function(){function e(){for(var e=[],t,n=0,i=window.location.search.substr(1).split("&");n<i.length;n++)t=i[n].split("="),e[n]=[unescape(t[0]),t.length>1?unescape(t[1]):""];return e}function t(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),t=e.find("img").prop("src");t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")})}function n(e){var t=e>I?-1:1;return I=e,t}function i(e){e.css("height",e.data("height")).removeClass("on")}function a(e,t){if(G.length&&K.length&&!A.hasClass("menu-open")&&(e>G.offset().top-S-40?P.addClass("fixed"):P.removeClass("fixed"),P.hasClass("fixed")&&(0>t?P.addClass("on"):P.removeClass("on"))),te.length&&O>700&&k>767){var n=ne-S+200;te.hasClass("single-on")?n-=400:e>ne-S?te.addClass("fixed"):te.removeClass("fixed"),e>n&&(0>t?te.addClass("on"):te.removeClass("on"))}if(F.length&&(B.hasClass("single-post")||B.hasClass("page-template-default"))&&G.innerHeight()>O){var i=(e-G.offset().top)/(G.innerHeight()-O);TweenMax.set(F,{scaleX:i})}}function o(e){var t=E.find(".anchor");if(t.length){var n=t.find("a").attr("href"),i=n.indexOf("#");if(i>-1){var a=n.substring(i);if($(a).length){var o=$(a).offset().top;e>=o-200&&e<=o+$(a).outerHeight()-200?t.addClass("current-menu-item"):t.removeClass("current-menu-item")}}}}function s(){function e(){var e=t.eq(0).innerWidth();t.each(function(){var t=$(this).offset().left+e;t>k||e>t?$(this).addClass("off"):$(this).removeClass("off")})}var t=U.find(".spotlight-post"),n=U.find(".container").innerWidth();if(e(),n>k)if(X)X[0].enable();else{var i=Math.round($("#spotlightDrag").find(".spotlight-post").first().innerWidth());X=Draggable.create("#spotlightDrag",{type:"x",bounds:U,cursor:"grab",throwProps:!0,edgeResistance:.9,snap:{x:function(e){return Math.round(e/i)*i}},onDrag:e,onDragStart:function(){U.find(".container").addClass("grabbing")},onDragEnd:function(){U.find(".container").removeClass("grabbing")},onThrowComplete:e})}else X&&(X[0].disable(),TweenMax.set(X,{x:"0px"}))}function l(e){var t=20,n=R.innerHeight(),i=G.offset().top,a=G.innerHeight();a+2*t>n&&O>n+S+t?e>=Q-S-t?(e+n+S+t>i+a-t?R.css({top:a-t-n+20,width:L}).removeClass("fixed").addClass("fixedBot"):R.css({top:S+t,width:L}).removeClass("fixedBot").addClass("fixed"),e>(a+i)/2?(R.find("li").eq(0).find(".img").addClass("off"),R.find("li").eq(1).find(".img").addClass("on")):(R.find("li").eq(0).find(".img").removeClass("off"),R.find("li").eq(1).find(".img").removeClass("on"))):R.css({top:0,width:L}).removeClass("fixed fixedBot"):R.css({top:0}).removeClass("fixed fixedBot")}function r(e){TweenMax.set(e,{opacity:0}),e.each(function(t){new ScrollMagic.Scene({triggerElement:e[t]}).triggerHook(.7).setTween(TweenMax.to($(this),.25,{opacity:1})).addTo(q)})}function d(){TweenMax.set([_.find(".menu-title"),_.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(_.find("li"),{y:"-120%",opacity:0})}function c(e,t,n){function i(e,t){var n=d.not(".transfered"),a=J.find("li").not(".transfered"),o=a.length,s=Math.floor(Math.random()*o);d.find("a").removeClass("on"),n.eq(t).find("a").addClass("off"),V=setTimeout(function(){J.find("div.grid").hasClass("is-hovered")||n.eq(e).hasClass("cta")||n.eq(e).find("a").addClass("on").removeClass("off")},1500),Z=setTimeout(i,3500,s,e)}var a='<div class="grid">',o=0,s=0,l,r=0,d,c=[],f={3:[-1,0,-1],6:[-2,0,0,-1,-1,-1]},h={3:[1,2,0],6:[2,3,4,1,5,0]},p=Math.ceil(t/n),m=[];for(s=0;n>s;s++)m[s]=p+f[n][s];var g=t-m.reduce(function(e,t){return e+t},0);for(s=0;g>s;s++){var u=h[n][s%n];m[u]++}var b=3===n?1:3,w=3===n?3:2;if(clearTimeout(V),clearTimeout(Z),ee.length)for(s;s<ee.length;s++)ee[s].destroy(!0);for(s=0;n>s;s++)c[s]=[],a+='<div class="po-item-col col-2"></div>';for(a+="</div>",J.find(".container").append(a);t>o;)for(s=0;n>s;s++){var v="";c[s]++,e.eq(o).length&&m[s]>=c[s]&&(s===b&&c[s]===w&&(v='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),v+=e.eq(o).hasClass("transfered")?'<div class="po-item transfered">'+e.eq(o).html()+"</div>":'<div class="po-item">'+e.eq(o).html()+"</div>",J.find(".po-item-col").eq(s).append(v),o++)}for(TweenMax.set(J.find(".po-item"),{opacity:0,y:"30%",scale:.8}),s=0;t+1>s;s++)ee[s]=new ScrollMagic.Scene({triggerElement:J.find(".po-item")[s]}).triggerHook(.9).setTween(TweenMax.to(J.find(".po-item").eq(s),.25,{opacity:1,y:"0%",scale:1})).addTo(q);l=J.find("div.grid").find(".transfered"),r=l.length,d=J.find(".po-item"),i(0,-1),d.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),d.find("a").removeClass("on"),$(this).removeClass("off"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered"),$(this).addClass("off")})}function f(e,t){function n(t){return ue.filter(function(){var n=$(this),i=!0;return e.forEach(function(e){e[0]!==t&&"all"!==e[1]&&i&&-1===$.inArray(e[1],$("a",n).data(e[0]).split(","))&&(i=!1)}),i})}function i(e){var t=[],i=n(e);i.each(function(){function e(e){e in t||(t[e]=[]);var i=n.data(e).split(",");i.forEach(function(n){""!==n&&(t[e][n]=!0)})}var n=$(this).find("a");e("investment"),e("field"),e("footprint")});var a=te.find(".dropdown[data-filter="+e+"]");a.each(function(){var e=$(this),n=e.data("filter"),i=e.find("li");i.each(function(){var e=$(this),i=e.data(n);"all"!==i&&(t[n]&&i in t[n]?e.removeClass("empty"):e.addClass("empty"))})})}var a,o;a=n(!1),$("html, body").animate({scrollTop:W.offset().top},400),i("investment"),i("field"),i("footprint"),o=a.length,we=k>767?6:3,J.find("div.grid").remove(),history.pushState(null,null,t),c(a,o,we)}function h(){var e=$(this);if(!e.hasClass("actif")){var t=[],n=te.find(".dropdown"),i=window.location.origin+window.location.pathname+"?";e.siblings().removeClass("actif"),e.addClass("actif").clone().prependTo(e.parents(".dropdown")),e.remove(),n.each(function(e){var n=$(this).data("filter");t[e]=[n,$(this).find(".actif").data(n)],0!==e&&(i+="&"),i+=t[e][0]+"="+t[e][1]}),f(t,i)}}function p(e){var t=te.find(".dropdown");t.each(function(n){var i=t.eq(n);if(void 0!==e[n]){var a=i.find("[data-"+e[n][0]+"="+e[n][1]+"]");a.siblings().removeClass("actif"),a.addClass("actif").clone().prependTo(i),a.remove()}else{var o=i.data("filter");e[n]=[o,i.find(".actif").data(o)]}}),f(e,window.location.href)}function m(){if(979>=k){var e=$(".team > li").length,t=ae.offset().left-20,n=t+ae.width(),i=$(".container-team").width(),a=0,o=0;ae.find("li").hasClass("open")&&(a=ae.find("> li.open").position().left,o=ae.find("> li.open").offset().left),k>767&&e>5?(TweenMax.set([$(".wrapper-btn-glob.btn-prev"),$(".wrapper-btn-glob.btn-next")],{className:"-=open"}),t<-Math.ceil(2*se)&&TweenMax.set($(".wrapper-btn-glob.btn-prev"),{className:"+=open"}),Math.ceil(n+2*se)>i&&TweenMax.set($(".wrapper-btn-glob.btn-next"),{className:"+=open"})):767>=k&&e>3&&(TweenMax.set([$(".wrapper-btn-glob.btn-prev"),$(".wrapper-btn-glob.btn-next")],{className:"-=open"}),t<-Math.ceil(se)&&TweenMax.set($(".wrapper-btn-glob.btn-prev"),{className:"+=open"}),Math.ceil(n+se)>i&&TweenMax.set($(".wrapper-btn-glob.btn-next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function g(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function u(){979>=k?(ce=ae.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:ce/2+"px"}),oe?(767>=k?(se=$(".container-team").width()/3,le=se):(se=$(".container-team").width()/5,le=2*se),TweenMax.set(ae.find("> li"),{width:se+"px"}),re=0,ae.find("> li").each(function(){re+=$(this).outerWidth()}),re+=2*le,TweenMax.set(ae,{width:re+"px",padding:"0 "+le+"px",x:-le}),de=se,oe=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.9,dragClickables:!0,snap:{x:function(e){return Math.round(e/de)*de}},onDragStart:function(){g();var e=$(".team.member-open > li.open");Me=$(".desc",e),Oe=new TimelineMax,$(window).width()>979?(Oe.to(Me,.25,{opacity:0,visibility:"hidden"}),Oe.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(Oe.to(Ae,.25,{opacity:0}),Oe.to(Ae,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),Oe.set(e,{className:"-=open"}),Oe.set(ae,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut}),ae.addClass("grabbing")},onDragEnd:function(){ae.removeClass("grabbing")}})):(767>=k?(se=$(".container-team").width()/3,le=se):(se=$(".container-team").width()/5,le=2*se),TweenMax.set(ae.find("> li"),{width:se+"px"}),re=0,ae.find("> li").each(function(){re+=$(this).outerWidth()}),re+=2*le,TweenMax.set(ae,{width:re+"px",padding:"0 "+le+"px",x:-le}),de=se,oe=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.9,dragClickables:!0,snap:{x:function(e){return Math.round(e/de)*de}},onDragStart:function(){g();var e=$(".team.member-open > li.open");Me=$(".desc",e),Oe=new TimelineMax,k>979?(Oe.to(Me,.25,{opacity:0,visibility:"hidden"}),Oe.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(Oe.to(Ae,.25,{opacity:0}),Oe.to(Ae,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),Oe.set(e,{className:"-=open"}),Oe.set(ae,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut}),ae.addClass("grabbing")},onDragEnd:function(){ae.removeClass("grabbing")}}))):oe&&(TweenMax.set(ae,{clearProps:"all"}),TweenMax.set(ae.find("> li"),{clearProps:"width"}),oe[0].disable())}function b(e){if(ye=e.closest("li"),Ce=$(".desc",ye),xe=Ce.outerHeight(),!TweenMax.isTweening(ae.find("li"))&&!TweenMax.isTweening(ae.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(ae.hasClass("member-open"))if(ye.hasClass("open"))w();else{var t=$(".team.member-open > li.open");Me=$(".desc",t),Oe=new TimelineMax,k>979?(fe=ae.offset().top+ye.position().top-120,t.offset().top<ye.offset().top&&(fe-=parseFloat(t.css("paddingBottom"))),Oe.to(Me,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),Oe.set(ye,{className:"+=open"}).add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(ye,.25,{paddingBottom:xe+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:fe},ease:Cubic.easeOut},"paddingAnimation"),Oe.to(Ce,.25,{opacity:1,visibility:"visible"})):(fe=ye.offset().top-120,Oe.to(Ae,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),Oe.set(ye,{className:"+=open",onComplete:function(){Ae.html(Ce.html()),TweenMax.set(Ae,{height:"auto",position:"absolute"}),Be=Ae.outerHeight(),TweenMax.set(Ae,{height:"0",position:"relative"}),Oe.add("heightAnimation").to(Ae,.5,{height:Be+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:fe},ease:Cubic.easeOut},"heightAnimation").to(Ae,.25,{opacity:1,visibility:"visible"}),Pe=ye.position().left,Se=$(".container-team").width(),Ee=Pe-Se/2+ye.outerWidth()/2,TweenMax.to(ae,.5,{x:-Ee,ease:Cubic.easeOut,onComplete:m})}}))}else if(fe=ye.offset().top-120,TweenMax.set(ae,{className:"+=member-open"}),Te=new TimelineMax,Te.set(ye,{className:"+=open"}),m(),k>979)Te.add("paddingAnimation").to(ye,.5,{paddingBottom:xe+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:fe},ease:Cubic.easeOut},"paddingAnimation").to(Ce,.25,{opacity:1,visibility:"visible"});else{Ae.html(Ce.html()),TweenMax.set(Ae,{height:"auto",position:"absolute"}),Be=Ae.outerHeight(),TweenMax.set(Ae,{height:"0",position:"relative"}),Te.add("heightAnimation").to(Ae,.5,{height:Be+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:fe},ease:Cubic.easeOut},"heightAnimation").to(Ae,.25,{opacity:1,visibility:"visible"});var n=Math.max.apply(null,ae.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:n+10+"px",ease:Cubic.easeInOut}),Pe=ye.position().left,Se=$(".container-team").width(),Ee=Pe-Se/2+ye.outerWidth()/2,TweenMax.to(ae,.5,{x:-Ee,ease:Cubic.easeOut,onComplete:m})}}function w(){g();var e=$(".team.member-open > li.open");Me=$(".desc",e),Oe=new TimelineMax,k>979?Oe.to(Me,.25,{opacity:0,visibility:"hidden"}).to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut}):Oe.to(Ae,.25,{opacity:0}).to(Ae,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut}),Oe.set(e,{className:"-=open"}).set(ae,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function v(e){if(!TweenMax.isTweening(ae.find("li"))&&!TweenMax.isTweening(ae.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var t=$(".team.member-open > li.open");Me=$(".desc",t),Oe=new TimelineMax,Oe.to(Me,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),ke=e.hasClass("left")?t.prev().length?t.prev():ae.find("> li").last():t.next().length?t.next():ae.find("> li").first(),fe=t.offset().top<ke.offset().top?ae.offset().top+ke.position().top-parseFloat(t.css("paddingBottom"))-120:ke.offset().top-120,De=$(".desc",ke),qe=De.outerHeight(),Oe.set(ke,{className:"+=open"}).add("paddingAnimation").to(ke,.25,{paddingBottom:qe+"px",ease:Cubic.easeIn},"paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:fe},ease:Cubic.easeOut},"paddingAnimation").to(De,.25,{opacity:1,visibility:"visible"})}}function C(e){if(!(TweenMax.isTweening(ae.find("li"))||TweenMax.isTweening(ae.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(ae)))if(m(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(ae,.25,{x:"+="+se,ease:Cubic.easeInOut}):TweenMax.to(ae,.25,{x:"-="+se,ease:Cubic.easeInOut})),979>=k&&ae.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");Me=$(".desc",t),Oe=new TimelineMax,Oe.to(Ae,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),ke=e.hasClass("left")?t.prev():t.next(),fe=ke.offset().top-120,De=$(".desc",ke),Oe.set(ke,{className:"+=open",onComplete:function(){Ae.html(Ce.html()),TweenMax.set(Ae,{height:"auto",position:"absolute"}),Be=Ae.outerHeight(),TweenMax.set(Ae,{height:"0",position:"relative"}),Oe.add("heightAnimation").to(Ae,.5,{height:Be+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:fe},ease:Cubic.easeOut},"heightAnimation").to(Ae,.25,{opacity:1,visibility:"visible",onComplete:m})}})}else g()}function x(){var e=$(this);e.is("[type=submit]")||(e.val()?e.addClass("filled"):e.removeClass("filled"))}function y(e){var t=e.parents(".form-to-open"),n=e.find("+ .form-section");t.find("legend").removeClass("active"),TweenMax.to(t.find(".form-section"),.2,{height:0,ease:Power2.easeInOut}),e.addClass("active"),TweenMax.to(n,.2,{height:n.data("height"),ease:Power2.easeInOut,onComplete:function(){n.find(".form-elt").eq(0).focus()}})}function T(e){e.find("legend").addClass("active"),e.find(".form-section").each(function(){TweenMax.to($(this),.2,{height:$(this).data("height")})}).find(".form-elt").each(function(){$(this).attr("required")&&!$(this).val()&&$(this).addClass("invalid").closest(".form-section").addClass("invalid")})}var M=$(document).height(),O=$(window).height(),k=$(window).width(),D=k,q=new ScrollMagic.Controller,I=0,N=$(document).scrollTop(),H=0,A=$("html"),B=$("body"),P=$("#header"),S=P.innerHeight(),E=$("#menu-main"),G=$("#mainContent"),W=$("#main"),F=$("#readIndicator"),z=$(".btn"),j=$(".btn-invert"),K=$("#contentHeader"),R=$("#postSidebar"),Q=0,L=0,U=$("#spotlightPost"),X=!1,Y=$("#related"),_=$("#menu-responsive"),J=$("#portfolio"),V,Z,ee=[],te=$("#portfolioFilters"),ne=te.length?te.offset().top:0,ie=$(".dropdown"),ae=$(".team"),oe=!1,se,le,re,de,ce,fe,he=$("#fadePage"),pe=$(".gallery");if(isMobile.any?A.addClass("is-mobile"):A.addClass("is-desktop"),B.hasClass("home")||a(N,H),t(),z.length&&z.each(function(e){z.eq(e).html(setBtn(z.eq(e)))}),j.length&&j.each(function(e){j.eq(e).html(setBtn(j.eq(e)))}),G.length){if(G.find("img").length){var me=G.find("img").not(".no-scroll");r(me)}G.find(".special-cat").length&&r(G.find(".special-cat"))}if(R.length&&(Q=R.offset().top,L=R.innerWidth()),U.length&&(s(),TweenMax.set(U.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(U.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(q)),Y.length){var ge=Y.find(".read-also-post");TweenMax.set(ge,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(ge,.25,{opacity:1},.1)).addTo(q)}if(J.length){var ue=J.find("li"),be=ue.length,we=k>767?6:3,ve=[];window.location.search&&(ve=e(),ve=ve.filter(function(e){return"investment"===e[0]||"field"===e[0]||"footprint"===e[0]})),ve.length?p(ve):c(ue,be,we),te.on("click","li",h)}if(ae.length){var $e=ae.find(".team-member"),Ce,xe,ye,Te,Me,Oe,ke,De,qe,Ie,Ne,He,Ae=$(".content-desc-responsive"),Be,Pe,Se,Ee;u(),m(),$e.on("click",function(e){e.preventDefault(),b($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),v($(this))}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),C($(this))}),$(".container-team").on("click",".btn-cross",function(e){e.preventDefault(),w()})}if(_.length&&d(),$("a").length){var Ge=location.protocol+"//"+location.host,We=Ge+location.pathname;$("a").each(function(){var e=$(this).attr("href"),t=e.indexOf("#");if("#"!==e&&"_blank"!==$(this).attr("target"))if(0===t)$(this).addClass("scroll-anchor");else if(t>-1){var n=e.substring(0,t);"/"!==n.slice(-1)&&(n+="/"),We===n&&$(this).attr("href",e.substring(t)).addClass("scroll-anchor")}else 0===e.indexOf(Ge)&&$(this).addClass("fade-page-link")})}if(B.on("click",".scroll-anchor",function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(this.hash).offset().top-150},500),$(this).blur()}),B.on("click",".fade-page-link",function(e){if(!$(this).hasClass("ajax-load")&&!(e.ctrlKey||e.shiftKey||e.metaKey||e.button&&1===e.button)){var t=$(this).attr("href");e.preventDefault(),TweenMax.to(he,.2,{opacity:0,onComplete:function(){window.location.href=t}})}}),E.length){var Fe=E.find(".current-menu-item");if(Fe.length){var ze=Fe.find("a").attr("href"),je=ze.indexOf("#");je>-1&&(Fe.removeClass("current-menu-item").addClass("anchor"),o(N))}}if(ie.on("click",function(){var e=$(this),t=2,n=ie.not(e);e.hasClass("on")?i(e):(e.data("height",e.css("height")).find("li").each(function(){t+=$(this).outerHeight()}),e.css("height",t).addClass("on")),n.each(function(){i($(this))})}),$("#burger").on("click",function(e){e.preventDefault(),A.toggleClass("menu-open"),A.hasClass("menu-open")?setTimeout(function(){var e=0,t=_.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(_.find(".menu-title").eq(e),.25,{y:"0%",opacity:1,z:.01,force3D:!0}),TweenMax.to(_.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1,z:.01,force3D:!0}).delay(.05),TweenMax.staggerTo(_.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1,z:.01,force3D:!0},.08)},380):d()}),$("input").length){if($(":input").each(x).on("change",x).on("focus",function(){$(this).attr("autocomplete","on")}),$("label").length&&$("label").not("[for=search-header]").css("opacity",1),$("input[type=file]").length){var Ke=$("input[type=file]");Ke.each(function(){var e=$(this);e.after('<button type="button" class="inputFile btn-invert form-elt">'+$(this).siblings("label").html()+"</button>").css("display","none").siblings("label").css("display","none"),$(".inputFile").on("click",function(t){t.preventDefault(),e.click()}).each(function(){$(this).html(setBtn($(this)))}),e.on("change",function(){$(this).siblings(".form-desc").html($(this)[0].files[0].name)})})}var Re=$(".form-search"),Qe=$(".form-search-header");Re.on("submit",function(e){var t=$(this).find("input");t.val()||(e.preventDefault(),t.focus(),$(this).hasClass("form-search-header")&&$(this).toggleClass("on")),480>k&&(e.preventDefault(),window.location.href=$(this).attr("action")+"?s=")}),Qe.on("focusout",function(){$(this).find("input").val()?$(this).addClass("on"):$(this).removeClass("on")});var Le=$(".form-to-open"),Ue=$(".open-form");Le.length&&Le.each(function(){$(this).find(".form-section").each(function(){$(this).data("height",$(this).height()).css("height",0)}).eq(0).css("height",$(this).find(".form-section").eq(0).data("height"))}).css({display:"none",opacity:0}).each(function(){$(this).hasClass("form-open-error")&&($(this).css({display:"block",opacity:1}).siblings("button").css("display","none"),T($(this)))}),Ue.on("click",function(e){var t=$(this),n=t.parents(".interactive-block");e.preventDefault(),TweenMax.to(n.siblings().find(".form-to-open"),.2,{opacity:0,ease:Power2.easeIn,onComplete:function(){$(".interactive-block").hasClass("open")&&n.siblings().find(".form-to-open").css("display","none")}}),n.addClass("on").removeClass("off").siblings().removeClass("on").addClass("off"),TweenMax.set(n.siblings().find(".open-form"),{display:"inline-block",delay:.3}),TweenMax.to(n.siblings().find(".open-form"),.3,{opacity:1,delay:.3,ease:Power2.easeInOut}),TweenMax.to(t,.3,{opacity:0,ease:Power2.easeInOut,onComplete:function(){t.css("display","none")}}),$(".interactive-block").hasClass("open")&&TweenMax.set(n.find(".form-to-open"),{display:"block",delay:.3}),TweenMax.to(n.find(".form-to-open"),.2,{opacity:1,delay:.3,ease:Power2.easeOut,onComplete:function(){n.find(".form-to-open").find(".form-elt").eq(0).focus()}}),$(".interactive-block").hasClass("open")?767>=k&&$(".interactive-block").removeClass("open"):(n.siblings().find(".form-to-open").slideUp(300,"easeInQuad"),n.find(".form-to-open").delay(300).slideDown(300,"easeOutQuad",function(){k>767&&$(".interactive-block").addClass("open").css("minHeight",n.height())})),$("html, body").animate({scrollTop:n.offset().top},200)}),Le.on("click","legend",function(){y($(this))}).on("focusout",".form-elt",function(){var e=$(this).parents(".form-to-open"),t=e.find(".form-section").length,n=$(this).closest(".form-section"),i=$(this).closest(".form-section").find(".form-elt").length;e.find(".form-section").index(n)<t-1&&$(this).parents("div").index()===i-1&&(y(e.find(".form-section").eq(n.index()).siblings("legend")),$("html, body").animate({scrollTop:e.offset().top},300))}).on("input change",".form-elt",function(){var e=!0,t=$(this).closest(".form-to-open").find("button[type=submit]");$(this).closest(".form-to-open").find(".form-elt").each(function(){$(this).attr("required")&&!$(this).val()&&(e=!1)}),e?t.addClass("on"):t.removeClass("on")}).on("click","button[type=submit]",function(e){if(!$(this).hasClass("on")){var t=$(this).parents(".form-to-open");e.preventDefault(),T(t)}})}var Xe=$(".subscribe-form");Xe.length&&(Xe.find("#email").attr("type","email").attr("placeholder","").attr("required",!0).after('<label for="email" style="opacity:1">Your email</label>'),Xe.append('<button type="submit" name="submit" class="btn-invert">Signup</button>'),Xe.find(".mailjet-subscribe").remove(),Xe.find("button").html(setBtn(Xe.find("button")))),$(document).on("scroll",function(){var e=$(document).scrollTop(),t=n(e);a(e,t),K.length&&!isMobile.any&&(e>20?TweenMax.to(K.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(K.find("h1"),.2,{y:"0px",opacity:1}),K.find(".img").length&&TweenMax.set(K.find(".img"),{y:"-"+e/40+"%"}),K.find(".menu-home").length&&TweenMax.set(K.find(".menu-home"),{y:"-"+e/4+"px"})),R.length&&G.length&&!isMobile.any&&l(e),E.length&&o(e)}),$(window).on("resize",function(){if(M=$(document).height(),O=$(window).height(),k=$(window).width(),k>979&&A.removeClass("menu-open"),W.length&&K.length&&W.css("marginTop",Math.floor(K.outerHeight())),R.length&&(R.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),Q=R.offset().top,L=R.innerWidth()),U.length&&s(),J.length){var e=k>767?6:3;e!==we&&J.find("div.grid")&&(J.find("div.grid").remove(),we=e,c(ue,be,we))}D!==k&&ae.length&&(ae.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(ae,{className:"-=member-open"}),Ie=$(".team.member-open > li.open"),Ne=$(".desc",Ie),He=Ne.outerHeight(),TweenMax.set(Ie,{paddingBottom:He+"px",ease:Cubic.easeInOut})),u(),m()),pe.length&&pe.each(function(){setGallery($(this),$(window).width())})})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),n=$("#contentHeader"),i=$("#fadePage"),a=$(".gallery");if(n.length){if(n.find("h1").length){var o=new SplitText(n.find("h1"),{type:"words"});n.find("h1").css("opacity",1),e(o)}t.length&&t.css("marginTop",Math.floor(n.outerHeight()))}i.length&&TweenMax.to(i,.2,{opacity:1}),a.length&&a.each(function(){setGallery($(this),$(window).width())})});
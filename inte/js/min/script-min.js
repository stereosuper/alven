$(function(){function e(){g=f>c?-1:1,c=f}function t(e){var t=0,n=[],i=[],o=[],a=[],s=[],l=[],d=e.length;for(t;d>t;t++)textBtn=e.eq(t).html(),e.eq(t).html('<span class="bg"></span><span class="before">'+textBtn+'</span><span class="after">'+textBtn+"</span>"),n[t]=new TimelineMax,o[t]=new SplitText($(".before",e.eq(t)),{type:"words,chars"}),s[t]=o[t].chars,i[t]=new TimelineMax,a[t]=new SplitText($(".after",e.eq(t)),{type:"words,chars"}),l[t]=a[t].chars,TweenMax.set(l[t],{y:40,opacity:0});e.hover(function(){var t=e.index(this);n[t].staggerTo(s[t],.2,{y:-40,opacity:0,ease:Cubic.easeIn},.013),i[t].staggerTo(l[t],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeIn},.013)},function(){var t=e.index(this);n[t].staggerTo(s[t],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeOut},.013),i[t].staggerTo(l[t],.2,{y:40,opacity:0,ease:Cubic.easeIn},.013)})}function n(){function e(){var e=0,n=t.length,i=t.eq(0).innerWidth();for(e;n>e;e++){var o=t.eq(e).offset().left+i;o>y||i>o?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=H.find(".spotlight-post"),n=H.find(".container").innerWidth();e(),n>y?B?B[0].enable():B=Draggable.create("#spotlightDrag",{type:"x",bounds:H,cursor:"grab",onDrag:e,onDragStart:function(){H.find(".container").addClass("grabbing")},onDragEnd:function(){H.find(".container").removeClass("grabbing")}}):B&&(B[0].disable(),TweenMax.set(B,{x:"0px"}))}function i(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}function o(){var e=20,t=b.innerHeight(),n=m.offset().top,i=m.innerHeight();i+2*e>t&&x>t+p+e?f>=q-p-e?(f+t+p+e>n+i-e?b.css({top:i-e-t+20,width:S}).removeClass("fixed").addClass("fixedBot"):b.css({top:p+e,width:S}).removeClass("fixedBot").addClass("fixed"),f>(i+n)/2?(b.find("li").eq(0).find(".img").addClass("off"),b.find("li").eq(1).find(".img").addClass("on")):(b.find("li").eq(0).find(".img").removeClass("off"),b.find("li").eq(1).find(".img").removeClass("on"))):b.css({top:0,width:S}).removeClass("fixed fixedBot"):b.css({top:0}).removeClass("fixed fixedBot")}function a(e){var t=e.length,n=0;for(TweenMax.set(e,{opacity:0}),n;t>n;n++)new ScrollMagic.Scene({triggerElement:e[n]}).triggerHook(.7).setTween(TweenMax.to(e.eq(n),.25,{opacity:1})).addTo(I)}function s(){TweenMax.set(D.find(".menu-title"),{y:"-100%",opacity:0}),TweenMax.set(D.find(".menu-subtitle"),{y:"-100%",opacity:0}),TweenMax.set(D.find("li"),{y:"-120%",opacity:0})}function l(e,t,n){function i(e){e===h&&(e=0),c.removeClass("on"),setTimeout(function(){c.eq(e).addClass("on")},1500),setTimeout(i,3500,e+1)}function o(e){$("a",p).removeClass("on"),setTimeout(function(){var t=p.eq(e);$("a",t).addClass("on")},1500);var n=Math.floor(Math.random()*t);setTimeout(o,3500,n)}var a='<div class="grid">',s=0,l=0,d=0,r=0,f=.1,g=.4,c,h=0,p;t>37&&(f+=.02,g-=.02),t>60&&(f+=.05,g-=.05);var m=Math.ceil(f*t),u=Math.ceil(g*t),w=t-(m+u),x=[m,Math.floor(u/2),Math.ceil(u/2),Math.ceil(w/3),Math.ceil(w/3),Math.floor(w/3)];for(d;n>d;d++)l+=x[d];for(l>t&&(x[4]-=1),d=0;n>d;d++){for(a+='<div class="po-item-col col-2">',r=0;r<x[d];r++)3===d&&r===x[d]-1&&(a+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),a+='<div class="po-item">'+E.find("li").eq(r+s).html()+"</div>";s+=r,a+="</div>"}for(a+="</div>",E.find(".container").append(a),TweenMax.set(E.find(".po-item"),{opacity:0,y:"30%",scale:.8}),d=0;t+1>d;d++)new ScrollMagic.Scene({triggerElement:E.find(".po-item")[d]}).triggerHook(.9).setTween(TweenMax.to(E.find(".po-item").eq(d),.25,{opacity:1,y:"0%",scale:1})).addTo(I);c=E.find("div.grid").find(".transfered"),h=c.length,p=E.find(".po-item"),o(0)}var d=$("html"),r=$("body"),f=0,g=0,c=0,h=$("#header"),p=h.innerHeight(),m=$("#mainContent"),u=$("#readIndicator"),w=$(document).height(),x=$(window).height(),y=$(window).width(),T=$(".btn"),v=$(".btn-invert"),M=$("#main"),C=$("#contentHeader"),b=$("#postSidebar"),q=0,S=0,H=$("#spotlightPost"),B=!1,k=$("#related"),D=$("#menu-responsive"),E=$("#portfolio"),I=new ScrollMagic.Controller;if(d.addClass(isMobile.any?"is-mobile":"is-desktop"),T.length&&(t(T),a(T)),v.length&&(t(v),a(v)),H.length&&(n(),TweenMax.set(H.find(".spotlight-post"),{y:"-100%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(H.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(I)),k.length){var W=k.find(".read-also-post");TweenMax.set(W,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(W,.25,{opacity:1},.1)).addTo(I)}if(m.length&&m.find("img").length){var P=m.find("img").not(".no-scroll");a(P)}if(E.length){var O=E.find("li"),z=O.length,F=6;z>F&&l(O,z,F)}D.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),d.toggleClass("menu-open"),d.hasClass("menu-open")?setTimeout(function(){var e=0,t=D.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(D.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(D.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(D.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(f=$(document).scrollTop(),e(),m.length&&!d.hasClass("menu-open")&&(f>m.offset().top-p-40?h.addClass("fixed"):h.removeClass("fixed"),h.hasClass("fixed")&&(0>g?h.addClass("on"):h.removeClass("on"))),u.length&&(r.hasClass("single")||r.hasClass("page-template-default"))){var t=(f-m.offset().top)/(m.innerHeight()-x);f>m.offset().top&&TweenMax.set(u,{scaleX:t})}C.length&&!isMobile.any&&(TweenMax.set(C.find("h1"),{y:"-"+f/4+"px"}),C.find(".img").length&&TweenMax.set(C.find(".img"),{y:"-"+f/40+"%"}),C.find(".menu-home").length&&TweenMax.set(C.find(".menu-home"),{y:"-"+f/4+"px"})),b.length&&m.length&&!isMobile.any&&o()}),$(window).resize(function(){w=$(document).height(),x=$(window).height(),y=$(window).width(),y>979&&d.removeClass("menu-open"),M.length&&C.length&&M.css("marginTop",C.innerHeight()),b.length&&(b.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),q=b.offset().top,S=b.innerWidth()-1),H.length&&n()}),$(window).load(function(){if(w=$(document).height(),C.length&&(M.length&&M.css("marginTop",C.innerHeight()),C.find("h1").length)){var e=new SplitText(C.find("h1"),{type:"words"});C.find("h1").css("opacity",1),i(e)}b.length&&(q=b.offset().top,S=b.innerWidth()-1)})});
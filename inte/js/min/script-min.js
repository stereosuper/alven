"use strict";$(function(){function e(e){var t=e>f?-1:1;return f=e,t}function t(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}function n(e,t){if(v.length&&I.length&&!u.hasClass("menu-open")&&(e>v.offset().top-T-40?x.addClass("fixed"):x.removeClass("fixed"),x.hasClass("fixed")&&(0>t?x.addClass("on"):x.removeClass("on"))),C.length&&(b.hasClass("single-post")||b.hasClass("page-template-default"))){var n=(e-v.offset().top)/(v.innerHeight()-c);e>v.offset().top&&TweenMax.set(C,{scaleX:n})}}function i(){function e(){var e=0,n=t.length,i=t.eq(0).innerWidth();for(e;n>e;e++){var o=t.eq(e).offset().left+i;o>h||i>o?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=B.find(".spotlight-post"),n=B.find(".container").innerWidth();e(),n>h?S?S[0].enable():S=Draggable.create("#spotlightDrag",{type:"x",bounds:B,cursor:"grab",throwProps:!0,edgeResistance:.65,onDrag:e,onDragStart:function(){B.find(".container").addClass("grabbing")},onDragEnd:function(){B.find(".container").removeClass("grabbing")}}):S&&(S[0].disable(),TweenMax.set(S,{x:"0px"}))}function o(e){var t=20,n=O.innerHeight(),i=v.offset().top,o=v.innerHeight();o+2*t>n&&c>n+T+t?e>=q-T-t?(e+n+T+t>i+o-t?O.css({top:o-t-n+20,width:H}).removeClass("fixed").addClass("fixedBot"):O.css({top:T+t,width:H}).removeClass("fixedBot").addClass("fixed"),e>(o+i)/2?(O.find("li").eq(0).find(".img").addClass("off"),O.find("li").eq(1).find(".img").addClass("on")):(O.find("li").eq(0).find(".img").removeClass("off"),O.find("li").eq(1).find(".img").removeClass("on"))):O.css({top:0,width:H}).removeClass("fixed fixedBot"):O.css({top:0}).removeClass("fixed fixedBot")}function a(e){var t=e.length,n=0;for(TweenMax.set(e,{opacity:0}),n;t>n;n++)new ScrollMagic.Scene({triggerElement:e[n]}).triggerHook(.7).setTween(TweenMax.to(e.eq(n),.25,{opacity:1})).addTo(m)}function s(){TweenMax.set([D.find(".menu-title"),D.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(D.find("li"),{y:"-120%",opacity:0})}function l(e,t,n){function i(e){var n=Math.floor(Math.random()*t);$("a",f).removeClass("on"),setTimeout(function(){if(!$(".grid").hasClass("is-hovered")){var t=f.eq(e);$("a",t).addClass("on")}},1500),setTimeout(i,3500,n)}var o='<div class="grid">',a=0,s=0,l=0,r=0,d=.1,p=.4,c,h=0,f;t>37&&(d+=.02,p-=.02),t>60&&(d+=.05,p-=.05);var g=Math.ceil(d*t),w=Math.ceil(p*t),u=t-(g+w),b=[g,Math.floor(w/2),Math.ceil(w/2),Math.ceil(u/3),Math.ceil(u/3),Math.floor(u/3)];for(l;n>l;l++)s+=b[l];for(s>t&&(b[4]-=1),l=0;n>l;l++){for(o+='<div class="po-item-col col-2">',r=0;r<b[l];r++)3===l&&r===b[l]-1&&(o+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),o+='<div class="po-item">'+P.find("li").eq(r+a).html()+"</div>";a+=r,o+="</div>"}for(o+="</div>",P.find(".container").append(o),TweenMax.set(P.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)new ScrollMagic.Scene({triggerElement:P.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(P.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(m);c=P.find("div.grid").find(".transfered"),h=c.length,f=P.find(".po-item"),i(0)}function r(){if($(window).width()<=979){var e=$(".team > li").length,t=E.offset().left-20,n=t+E.width(),i=$(".container-team").width();e>5?(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),0>t&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),n>i&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"})):$(window).width()<=767&&e>3&&(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),0>t&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),n>i&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function d(){$(window).width()<=979?(X=E.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:X/2+"px"}),W?(R=$(window).width()<=767?$(".container-team").width()/3:$(".container-team").width()/5,TweenMax.set($(".team > li"),{width:R+"px"}),z=0,$(".team > li").each(function(){z+=$(this).outerWidth()}),TweenMax.set(E,{width:z+"px"}),F=R,W=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/F)*F}},onThrowComplete:function(){r()},onDragStart:function(){var e=$(".team.member-open > li.open");oe=$(".desc",e),ae=new TimelineMax,$(window).width()>979?(ae.to(oe,.25,{opacity:0,visibility:"hidden"}),ae.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ae.to(he,.25,{opacity:0}),ae.to(he,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ae.set(e,{className:"-=open"}),ae.set(E,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):(R=$(window).width()<=767?$(".container-team").width()/3:$(".container-team").width()/5,TweenMax.set($(".team > li"),{width:R+"px"}),z=0,$(".team > li").each(function(){z+=$(this).outerWidth()}),TweenMax.set(E,{width:z+"px"}),F=R,W=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/F)*F}},onThrowComplete:function(){r()},onDragStart:function(){var e=$(".team.member-open > li.open");oe=$(".desc",e),ae=new TimelineMax,$(window).width()>979?(ae.to(oe,.25,{opacity:0,visibility:"hidden"}),ae.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ae.to(he,.25,{opacity:0}),ae.to(he,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ae.set(e,{className:"-=open"}),ae.set(E,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):W&&(TweenMax.set($(".team"),{clearProps:"all"}),TweenMax.set($(".team > li"),{clearProps:"width"}),W[0].disable())}var p=$(document).height(),c=$(window).height(),h=$(window).width(),m=new ScrollMagic.Controller,f=0,g=$(document).scrollTop(),w=0,u=$("html"),b=$("body"),x=$("#header"),T=x.innerHeight(),v=$("#mainContent"),M=$("#main"),C=$("#readIndicator"),y=$(".btn"),N=$(".btn-invert"),I=$("#contentHeader"),O=$("#postSidebar"),q=0,H=0,B=$("#spotlightPost"),S=!1,k=$("#related"),D=$("#menu-responsive"),P=$("#portfolio"),E=$(".team"),W=!1,R,z,F,X,j,A=$(window).height(),G=$(window).width(),J=$(window).height(),K=$(window).width();if(isMobile.any?u.addClass("is-mobile"):u.addClass("is-desktop"),n(g,w),y.length&&y.each(function(e){y.eq(e).html(t(y.eq(e)))}),N.length&&N.each(function(e){N.eq(e).html(t(N.eq(e)))}),v.length&&v.find("img").length){var L=v.find("img").not(".no-scroll");a(L)}if(O.length&&(q=O.offset().top,H=O.innerWidth()),B.length&&(i(),TweenMax.set(B.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(B.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(m)),k.length){var Q=k.find(".read-also-post");TweenMax.set(Q,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(Q,.25,{opacity:1},.1)).addTo(m)}if(P.length){var U=P.find("li"),V=U.length,Y=6;V>Y&&l(U,V,Y),P.find(".po-item a").hover(function(){$(this).closest(".grid").addClass("is-hovered"),$(this).addClass("link-hovered"),P.find(".po-item a").removeClass("on")},function(){$(this).closest(".grid").removeClass("is-hovered"),$(this).removeClass("link-hovered")})}if(E.length){var Z=E.find(".team-member"),_,ee,te,ne,ie,oe,ae,se,le,re,de,pe,ce,he=$(".content-desc-responsive"),me;d(),r(),Z.on("click",function(e){if(e.preventDefault(),te=$(this).closest("li"),_=$(".desc",te),ee=_.outerHeight(),!TweenMax.isTweening(E.find("li"))&&!TweenMax.isTweening(E.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(E.hasClass("member-open"))if(te.hasClass("open")){var t=$(".team.member-open > li.open");oe=$(".desc",t),ae=new TimelineMax,$(window).width()>979?(ae.to(oe,.25,{opacity:0,visibility:"hidden"}),ae.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ae.to(he,.25,{opacity:0}),ae.to(he,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ae.set(t,{className:"-=open"}),ae.set(E,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}else{var t=$(".team.member-open > li.open");oe=$(".desc",t),ae=new TimelineMax,$(window).width()>979?(ae.to(oe,.25,{opacity:0,visibility:"hidden"}),ae.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut}),ae.set(t,{className:"-=open"}),ae.set(te,{className:"+=open"}),ae.to(te,.5,{paddingBottom:ee+"px",ease:Cubic.easeInOut}),ae.to(_,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:te.offset().top-120},700)}})):(ae.to(he,.25,{opacity:0,visibility:"hidden"}),ae.set(t,{className:"-=open"}),ae.set(te,{className:"+=open",onComplete:function(){he.html(_.html()),TweenMax.set(he,{height:"auto",position:"absolute"}),me=he.outerHeight(),TweenMax.set(he,{height:"0",position:"relative"})}}),ae.to(he,.5,{height:me+"px",ease:Cubic.easeInOut}),ae.to(he,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:te.offset().top-120},700)}}))}else if(TweenMax.set(E,{className:"+=member-open"}),ne=new TimelineMax,ne.set(te,{className:"+=open"}),$(window).width()>979)ne.to(te,.5,{paddingBottom:ee+"px",ease:Cubic.easeInOut}),ne.to(_,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:te.offset().top-120},200)}});else{he.html(_.html()),TweenMax.set(he,{height:"auto",position:"absolute"}),me=he.outerHeight(),TweenMax.set(he,{height:"0",position:"relative"}),ne.to(he,.5,{height:me+"px",ease:Cubic.easeInOut}),ne.to(he,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:te.offset().top-120},200)}});var n=Math.max.apply(null,E.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:n+10+"px",ease:Cubic.easeInOut})}}),$(".btn-desc > li a").on("click",function(e){if(e.preventDefault(),!TweenMax.isTweening(E.find("li"))&&!TweenMax.isTweening(E.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var t=$(".team.member-open > li.open");oe=$(".desc",t),ae=new TimelineMax,ae.to(oe,.25,{opacity:0,visibility:"hidden"}),ae.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut}),ae.set(t,{className:"-=open"}),se=$(this).hasClass("left")?t.prev().length?t.prev():E.find("> li").last():t.next().length?t.next():E.find("> li").first(),le=$(".desc",se),re=le.outerHeight(),ae.set(se,{className:"+=open"}),ae.to(se,.5,{paddingBottom:re+"px",ease:Cubic.easeInOut}),ae.to(le,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:se.offset().top-120},200)}})}}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),TweenMax.isTweening(E.find("li"))||TweenMax.isTweening(E.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||($(this).hasClass("left")?TweenMax.to(E,.25,{x:"+="+R,ease:Cubic.easeInOut,onComplete:r}):TweenMax.to(E,.25,{x:"-="+R,ease:Cubic.easeInOut,onComplete:r}))})}D.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),u.toggleClass("menu-open"),u.hasClass("menu-open")?setTimeout(function(){var e=0,t=D.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(D.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(D.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(D.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var t=$(document).scrollTop(),i=e(t);n(t,i),I.length&&!isMobile.any&&(TweenMax.set(I.find("h1"),{y:"-"+t/4+"px"}),I.find(".img").length&&TweenMax.set(I.find(".img"),{y:"-"+t/40+"%"}),I.find(".menu-home").length&&TweenMax.set(I.find(".menu-home"),{y:"-"+t/4+"px"})),O.length&&v.length&&!isMobile.any&&o(t)}),$(window).on("resize",function(){p=$(document).height(),c=$(window).height(),h=$(window).width(),h>979&&u.removeClass("menu-open"),M.length&&I.length&&M.css("marginTop",Math.floor(I.innerHeight())),O.length&&(O.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),q=O.offset().top,H=O.innerWidth()),B.length&&i(),E.length&&(E.hasClass("member-open")&&(de=$(".team.member-open > li.open"),pe=$(".desc",de),ce=pe.outerHeight(),TweenMax.set(de,{paddingBottom:ce+"px",ease:Cubic.easeInOut})),d(),r()),J=$(window).height(),K=$(window).width(),K!=G&&E.length&&E.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(E,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),n=$("#contentHeader");if(n.length&&(t.length&&t.css("marginTop",Math.floor(n.innerHeight())),n.find("h1").length)){var i=new SplitText(n.find("h1"),{type:"words"});n.find("h1").css("opacity",1),e(i)}});
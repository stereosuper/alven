"use strict";$(function(){function e(e){var t=e>p?-1:1;return p=e,t}function t(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}function i(e,t){if(v.length&&q.length&&!w.hasClass("menu-open")&&(e>v.offset().top-b-40?x.addClass("fixed"):x.removeClass("fixed"),x.hasClass("fixed")&&(0>t?x.addClass("on"):x.removeClass("on"))),M.length&&(u.hasClass("single-post")||u.hasClass("page-template-default"))){var i=(e-v.offset().top)/(v.innerHeight()-c);e>v.offset().top&&TweenMax.set(M,{scaleX:i})}}function n(){function e(){var e=0,i=t.length,n=t.eq(0).innerWidth();for(e;i>e;e++){var o=t.eq(e).offset().left+n;o>h||n>o?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=N.find(".spotlight-post"),i=N.find(".container").innerWidth();e(),i>h?S?S[0].enable():S=Draggable.create("#spotlightDrag",{type:"x",bounds:N,cursor:"grab",throwProps:!0,edgeResistance:.65,onDrag:e,onDragStart:function(){N.find(".container").addClass("grabbing")},onDragEnd:function(){N.find(".container").removeClass("grabbing")}}):S&&(S[0].disable(),TweenMax.set(S,{x:"0px"}))}function o(e){var t=20,i=H.innerHeight(),n=v.offset().top,o=v.innerHeight();o+2*t>i&&c>i+b+t?e>=B-b-t?(e+i+b+t>n+o-t?H.css({top:o-t-i+20,width:I}).removeClass("fixed").addClass("fixedBot"):H.css({top:b+t,width:I}).removeClass("fixedBot").addClass("fixed"),e>(o+n)/2?(H.find("li").eq(0).find(".img").addClass("off"),H.find("li").eq(1).find(".img").addClass("on")):(H.find("li").eq(0).find(".img").removeClass("off"),H.find("li").eq(1).find(".img").removeClass("on"))):H.css({top:0,width:I}).removeClass("fixed fixedBot"):H.css({top:0}).removeClass("fixed fixedBot")}function a(e){var t=e.length,i=0;for(TweenMax.set(e,{opacity:0}),i;t>i;i++)new ScrollMagic.Scene({triggerElement:e[i]}).triggerHook(.7).setTween(TweenMax.to(e.eq(i),.25,{opacity:1})).addTo(f)}function s(){TweenMax.set([P.find(".menu-title"),P.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(P.find("li"),{y:"-120%",opacity:0})}function l(e,t,i){function n(e){var i=Math.floor(Math.random()*t);$("a",m).removeClass("on"),setTimeout(function(){var t=m.eq(e);$("a",t).addClass("on")},1500),setTimeout(n,3500,i)}var o='<div class="grid">',a=0,s=0,l=0,d=0,r=.1,c=.4,h,p=0,m;t>37&&(r+=.02,c-=.02),t>60&&(r+=.05,c-=.05);var g=Math.ceil(r*t),w=Math.ceil(c*t),u=t-(g+w),x=[g,Math.floor(w/2),Math.ceil(w/2),Math.ceil(u/3),Math.ceil(u/3),Math.floor(u/3)];for(l;i>l;l++)s+=x[l];for(s>t&&(x[4]-=1),l=0;i>l;l++){for(o+='<div class="po-item-col col-2">',d=0;d<x[l];d++)3===l&&d===x[l]-1&&(o+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),o+='<div class="po-item">'+k.find("li").eq(d+a).html()+"</div>";a+=d,o+="</div>"}for(o+="</div>",k.find(".container").append(o),TweenMax.set(k.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)new ScrollMagic.Scene({triggerElement:k.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(k.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(f);h=k.find("div.grid").find(".transfered"),p=h.length,m=k.find(".po-item"),n(0)}function d(){$(window).width()<=979?E?(W=$(window).width()<=767?$(".container-team").width()/3:$(".container-team").width()/5,TweenMax.set($(".team > li"),{width:W+"px"}),R=0,$(".team > li").each(function(){R+=$(this).outerWidth()}),TweenMax.set(D,{width:R+"px"}),z=W,E=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/z)*z}}})):(W=$(window).width()<=767?$(".container-team").width()/3:$(".container-team").width()/5,TweenMax.set($(".team > li"),{width:W+"px"}),R=0,$(".team > li").each(function(){R+=$(this).outerWidth()}),TweenMax.set(D,{width:R+"px"}),z=W,E=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/z)*z}}})):E&&(TweenMax.set($(".team"),{clearProps:"all"}),TweenMax.set($(".team > li"),{clearProps:"width"}),E[0].disable())}var r=$(document).height(),c=$(window).height(),h=$(window).width(),f=new ScrollMagic.Controller,p=0,m=$(document).scrollTop(),g=0,w=$("html"),u=$("body"),x=$("#header"),b=x.innerHeight(),v=$("#mainContent"),T=$("#main"),M=$("#readIndicator"),y=$(".btn"),C=$(".btn-invert"),q=$("#contentHeader"),H=$("#postSidebar"),B=0,I=0,N=$("#spotlightPost"),S=!1,O=$("#related"),P=$("#menu-responsive"),k=$("#portfolio"),D=$(".team"),E=!1,W,R,z,F=$(window).height(),X=$(window).width(),j=$(window).height(),A=$(window).width();if(w.addClass(isMobile.any?"is-mobile":"is-desktop"),i(m,g),y.length&&y.each(function(e){y.eq(e).html(t(y.eq(e)))}),C.length&&C.each(function(e){C.eq(e).html(t(C.eq(e)))}),v.length&&v.find("img").length){var G=v.find("img").not(".no-scroll");a(G)}if(H.length&&(B=H.offset().top,I=H.innerWidth()),N.length&&(n(),TweenMax.set(N.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(N.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(f)),O.length){var J=O.find(".read-also-post");TweenMax.set(J,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(J,.25,{opacity:1},.1)).addTo(f)}if(k.length){var K=k.find("li"),L=K.length,Q=6;L>Q&&l(K,L,Q)}if(D.length){var U=D.find(".team-member"),V,Y,Z,_,ee,te,ie,ne,oe,ae,se,le,de,re=$(".content-desc-responsive"),ce;d(),U.on("click",function(e){if(e.preventDefault(),Z=$(this).closest("li"),V=$(".desc",Z),Y=V.outerHeight(),!TweenMax.isTweening(D.find("li"))&&!TweenMax.isTweening(D.find(".desc")))if(D.hasClass("member-open"))if(Z.hasClass("open")){var t=$(".team.member-open > li.open");te=$(".desc",t),ie=new TimelineMax,$(window).width()>979?(ie.to(te,.25,{opacity:0,visibility:"hidden"}),ie.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ie.to(re,.25,{opacity:0}),ie.to(re,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ie.set(t,{className:"-=open"}),ie.set(D,{className:"-=member-open"})}else{var t=$(".team.member-open > li.open");te=$(".desc",t),ie=new TimelineMax,$(window).width()>979?(ie.to(te,.25,{opacity:0,visibility:"hidden"}),ie.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut}),ie.set(t,{className:"-=open"}),ie.set(Z,{className:"+=open"}),ie.to(Z,.5,{paddingBottom:Y+"px",ease:Cubic.easeInOut}),ie.to(V,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:Z.offset().top-120},200)}})):(ie.to(re,.25,{opacity:0,visibility:"hidden"}),ie.set(t,{className:"-=open"}),ie.set(Z,{className:"+=open",onComplete:function(){re.html(V.html()),TweenMax.set(re,{height:"auto",position:"absolute"}),ce=re.outerHeight(),TweenMax.set(re,{height:"0",position:"relative"})}}),ie.to(re,.5,{height:ce+"px",ease:Cubic.easeInOut}),ie.to(re,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:Z.offset().top-120},200)}}))}else TweenMax.set(D,{className:"+=member-open"}),_=new TimelineMax,_.set(Z,{className:"+=open"}),$(window).width()>979?(_.to(Z,.5,{paddingBottom:Y+"px",ease:Cubic.easeInOut}),_.to(V,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:Z.offset().top-120},200)}})):(re.html(V.html()),TweenMax.set(re,{height:"auto",position:"absolute"}),ce=re.outerHeight(),TweenMax.set(re,{height:"0",position:"relative"}),_.to(re,.5,{height:ce+"px",ease:Cubic.easeInOut}),_.to(re,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:Z.offset().top-120},200)}}))}),$(".btn-desc > li a").on("click",function(e){if(e.preventDefault(),!TweenMax.isTweening(D.find("li"))&&!TweenMax.isTweening(D.find(".desc"))){var t=$(".team.member-open > li.open");te=$(".desc",t),ie=new TimelineMax,ie.to(te,.25,{opacity:0,visibility:"hidden"}),ie.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut}),ie.set(t,{className:"-=open"}),ne=$(this).hasClass("left")?t.prev().length?t.prev():D.find("> li").last():t.next().length?t.next():D.find("> li").first(),oe=$(".desc",ne),ae=oe.outerHeight(),ie.set(ne,{className:"+=open"}),ie.to(ne,.5,{paddingBottom:ae+"px",ease:Cubic.easeInOut}),ie.to(oe,.25,{opacity:1,visibility:"visible",onComplete:function(){$("html, body").animate({scrollTop:ne.offset().top-120},200)}})}})}P.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),w.toggleClass("menu-open"),w.hasClass("menu-open")?setTimeout(function(){var e=0,t=P.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(P.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(P.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(P.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var t=$(document).scrollTop(),n=e(t);i(t,n),q.length&&!isMobile.any&&(TweenMax.set(q.find("h1"),{y:"-"+t/4+"px"}),q.find(".img").length&&TweenMax.set(q.find(".img"),{y:"-"+t/40+"%"}),q.find(".menu-home").length&&TweenMax.set(q.find(".menu-home"),{y:"-"+t/4+"px"})),H.length&&v.length&&!isMobile.any&&o(t)}),$(window).on("resize",function(){r=$(document).height(),c=$(window).height(),h=$(window).width(),h>979&&w.removeClass("menu-open"),T.length&&q.length&&T.css("marginTop",Math.floor(q.innerHeight())),H.length&&(H.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),B=H.offset().top,I=H.innerWidth()),N.length&&n(),D.length&&(D.hasClass("member-open")&&(se=$(".team.member-open > li.open"),le=$(".desc",se),de=le.outerHeight(),TweenMax.set(se,{paddingBottom:de+"px",ease:Cubic.easeInOut})),d()),j=$(window).height(),A=$(window).width(),A!=X&&D.length&&D.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(D,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),i=$("#contentHeader");if(i.length&&(t.length&&t.css("marginTop",Math.floor(i.innerHeight())),i.find("h1").length)){var n=new SplitText(i.find("h1"),{type:"words"});i.find("h1").css("opacity",1),e(n)}});
"use strict";$(function(){function e(e){var t=e>p?-1:1;return p=e,t}function t(e){var t=0,n=[],i=[],o=[],a=[],s=[],l=[],d=e.length,r;for(t;d>t;t++)r=e.eq(t).html(),e.eq(t).html('<span class="bg"></span><span class="before">'+r+'</span><span class="after">'+r+"</span>"),n[t]=new TimelineMax,o[t]=new SplitText($(".before",e.eq(t)),{type:"words,chars"}),s[t]=o[t].chars,i[t]=new TimelineMax,a[t]=new SplitText($(".after",e.eq(t)),{type:"words,chars"}),l[t]=a[t].chars,TweenMax.set(l[t],{y:40,opacity:0});e.hover(function(){var t=e.index(this);n[t].staggerTo(s[t],.2,{y:-40,opacity:0,ease:Cubic.easeIn},.013),i[t].staggerTo(l[t],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeIn},.013)},function(){var t=e.index(this);n[t].staggerTo(s[t],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeOut},.013),i[t].staggerTo(l[t],.2,{y:40,opacity:0,ease:Cubic.easeIn},.013)})}function n(e,t){if(v.length&&!h.hasClass("menu-open")&&(e>v.offset().top-T-40?w.addClass("fixed"):w.removeClass("fixed"),w.hasClass("fixed")&&(0>t?w.addClass("on"):w.removeClass("on"))),y.length&&(u.hasClass("single-post")||u.hasClass("page-template-default"))){var n=(e-v.offset().top)/(v.innerHeight()-r);e>v.offset().top&&TweenMax.set(y,{scaleX:n})}}function i(){function e(){var e=0,n=t.length,i=t.eq(0).innerWidth();for(e;n>e;e++){var o=t.eq(e).offset().left+i;o>c||i>o?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=B.find(".spotlight-post"),n=B.find(".container").innerWidth();e(),n>c?k?k[0].enable():k=Draggable.create("#spotlightDrag",{type:"x",bounds:B,cursor:"grab",onDrag:e,onDragStart:function(){B.find(".container").addClass("grabbing")},onDragEnd:function(){B.find(".container").removeClass("grabbing")}}):k&&(k[0].disable(),TweenMax.set(k,{x:"0px"}))}function o(e){var t=20,n=q.innerHeight(),i=v.offset().top,o=v.innerHeight();o+2*t>n&&r>n+T+t?e>=H-T-t?(e+n+T+t>i+o-t?q.css({top:o-t-n+20,width:S}).removeClass("fixed").addClass("fixedBot"):q.css({top:T+t,width:S}).removeClass("fixedBot").addClass("fixed"),e>(o+i)/2?(q.find("li").eq(0).find(".img").addClass("off"),q.find("li").eq(1).find(".img").addClass("on")):(q.find("li").eq(0).find(".img").removeClass("off"),q.find("li").eq(1).find(".img").removeClass("on"))):q.css({top:0,width:S}).removeClass("fixed fixedBot"):q.css({top:0}).removeClass("fixed fixedBot")}function a(e){var t=e.length,n=0;for(TweenMax.set(e,{opacity:0}),n;t>n;n++)new ScrollMagic.Scene({triggerElement:e[n]}).triggerHook(.7).setTween(TweenMax.to(e.eq(n),.25,{opacity:1})).addTo(f)}function s(){TweenMax.set([N.find(".menu-title"),N.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(N.find("li"),{y:"-120%",opacity:0})}function l(e,t,n){function i(e){var n=Math.floor(Math.random()*t);$("a",m).removeClass("on"),setTimeout(function(){var t=m.eq(e);$("a",t).addClass("on")},1500),setTimeout(i,3500,n)}var o='<div class="grid">',a=0,s=0,l=0,d=0,r=.1,c=.4,p,g=0,m;t>37&&(r+=.02,c-=.02),t>60&&(r+=.05,c-=.05);var h=Math.ceil(r*t),u=Math.ceil(c*t),w=t-(h+u),T=[h,Math.floor(u/2),Math.ceil(u/2),Math.ceil(w/3),Math.ceil(w/3),Math.floor(w/3)];for(l;n>l;l++)s+=T[l];for(s>t&&(T[4]-=1),l=0;n>l;l++){for(o+='<div class="po-item-col col-2">',d=0;d<T[l];d++)3===l&&d===T[l]-1&&(o+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),o+='<div class="po-item">'+E.find("li").eq(d+a).html()+"</div>";a+=d,o+="</div>"}for(o+="</div>",E.find(".container").append(o),TweenMax.set(E.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)new ScrollMagic.Scene({triggerElement:E.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(E.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(f);p=E.find("div.grid").find(".transfered"),g=p.length,m=E.find(".po-item"),i(0)}var d=$(document).height(),r=$(window).height(),c=$(window).width(),f=new ScrollMagic.Controller,p=0,g=$(document).scrollTop(),m=0,h=$("html"),u=$("body"),w=$("#header"),T=w.innerHeight(),v=$("#mainContent"),x=$("#main"),y=$("#readIndicator"),M=$(".btn"),C=$(".btn-invert"),b=$("#contentHeader"),q=$("#postSidebar"),H=0,S=0,B=$("#spotlightPost"),k=!1,D=$("#related"),N=$("#menu-responsive"),E=$("#portfolio"),I=$(".team");if(h.addClass(isMobile.any?"is-mobile":"is-desktop"),n(g,m),M.length&&(t(M),a(M)),C.length&&(t(C),a(C)),v.length&&v.find("img").length){var W=v.find("img").not(".no-scroll");a(W)}if(q.length&&(H=q.offset().top,S=q.innerWidth()),B.length&&(i(),TweenMax.set(B.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(B.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(f)),D.length){var P=D.find(".read-also-post");TweenMax.set(P,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(P,.25,{opacity:1},.1)).addTo(f)}if(E.length){var O=E.find("li"),z=O.length,F=6;z>F&&l(O,z,F)}if(I.length){var X=I.find(".team-member"),j,A,G,J,K,L,Q,R,U,V;X.on("click",function(e){if(e.preventDefault(),G=$(this).closest("li"),j=$(".desc",G),A=j.outerHeight(),!TweenMax.isTweening(I.find("li"))&&!TweenMax.isTweening(I.find(".desc")))if(I.hasClass("member-open"))if(G.hasClass("open")){var t=$(".team.member-open > li.open");L=$(".desc",t),Q=new TimelineMax,Q.to(L,.25,{opacity:0}),Q.to(t,.25,{paddingBottom:"0"}),Q.set(t,{className:"-=open"}),Q.set(I,{className:"-=member-open"})}else{var t=$(".team.member-open > li.open");L=$(".desc",t),Q=new TimelineMax,Q.to(L,.25,{opacity:0}),Q.to(t,.25,{paddingBottom:"0"}),Q.set(t,{className:"-=open"}),Q.set(G,{className:"+=open"}),Q.to(G,.25,{paddingBottom:A+"px"}),Q.to(j,.25,{opacity:1,onComplete:function(){$("html, body").animate({scrollTop:G.offset().top-120},500)}})}else TweenMax.set(I,{className:"+=member-open"}),J=new TimelineMax,J.set(G,{className:"+=open"}),J.to(G,.25,{paddingBottom:A+"px"}),J.to(j,.25,{opacity:1,onComplete:function(){$("html, body").animate({scrollTop:G.offset().top-120},500)}})}),$(".btn-desc > li a").on("click",function(e){e.preventDefault();var t=$(".team.member-open > li.open");L=$(".desc",t),Q=new TimelineMax,Q.to(L,.25,{opacity:0}),Q.to(t,.25,{paddingBottom:"0"}),Q.set(t,{className:"-=open"}),$(this).hasClass("btn-prev-desc")?R=t.prev():$(this).hasClass("btn-next-desc")&&(R=t.next()),U=$(".desc",R),V=U.outerHeight(),Q.set(R,{className:"+=open"}),Q.to(R,.25,{paddingBottom:V+"px"}),Q.to(U,.25,{opacity:1,onComplete:function(){$("html, body").animate({scrollTop:R.offset().top-120},500)}})})}N.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),h.toggleClass("menu-open"),h.hasClass("menu-open")?setTimeout(function(){var e=0,t=N.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(N.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(N.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(N.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var t=$(document).scrollTop(),i=e(t);n(t,i),b.length&&!isMobile.any&&(TweenMax.set(b.find("h1"),{y:"-"+t/4+"px"}),b.find(".img").length&&TweenMax.set(b.find(".img"),{y:"-"+t/40+"%"}),b.find(".menu-home").length&&TweenMax.set(b.find(".menu-home"),{y:"-"+t/4+"px"})),q.length&&v.length&&!isMobile.any&&o(t)}),$(window).on("resize",function(){d=$(document).height(),r=$(window).height(),c=$(window).width(),c>979&&h.removeClass("menu-open"),x.length&&b.length&&x.css("marginTop",b.innerHeight()),q.length&&(q.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),H=q.offset().top,S=q.innerWidth()),B.length&&i()})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),n=$("#contentHeader");if(n.length&&(t.length&&t.css("marginTop",n.innerHeight()),n.find("h1").length)){var i=new SplitText(n.find("h1"),{type:"words"});n.find("h1").css("opacity",1),e(i)}});
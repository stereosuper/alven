"use strict";$(function(){function e(e){var t=e>x?-1:1;return x=e,t}function t(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}function i(e,t){if(N.length&&B.length&&!M.hasClass("menu-open")&&(e>N.offset().top-O-40?y.addClass("fixed"):y.removeClass("fixed"),y.hasClass("fixed")&&(0>t?y.addClass("on"):y.removeClass("on"))),q.length&&(C.hasClass("single-post")||C.hasClass("page-template-default"))){var i=(e-N.offset().top)/(N.innerHeight()-w);e>N.offset().top&&TweenMax.set(q,{scaleX:i})}}function n(){function e(){var e=0,i=t.length,n=t.eq(0).innerWidth();for(e;i>e;e++){var a=t.eq(e).offset().left+n;a>u||n>a?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=P.find(".spotlight-post"),i=P.find(".container").innerWidth();e(),i>u?W?W[0].enable():W=Draggable.create("#spotlightDrag",{type:"x",bounds:P,cursor:"grab",throwProps:!0,edgeResistance:.65,onDrag:e,onDragStart:function(){P.find(".container").addClass("grabbing")},onDragEnd:function(){P.find(".container").removeClass("grabbing")}}):W&&(W[0].disable(),TweenMax.set(W,{x:"0px"}))}function a(e){var t=20,i=D.innerHeight(),n=N.offset().top,a=N.innerHeight();a+2*t>i&&w>i+O+t?e>=k-O-t?(e+i+O+t>n+a-t?D.css({top:a-t-i+20,width:S}).removeClass("fixed").addClass("fixedBot"):D.css({top:O+t,width:S}).removeClass("fixedBot").addClass("fixed"),e>(a+n)/2?(D.find("li").eq(0).find(".img").addClass("off"),D.find("li").eq(1).find(".img").addClass("on")):(D.find("li").eq(0).find(".img").removeClass("off"),D.find("li").eq(1).find(".img").removeClass("on"))):D.css({top:0,width:S}).removeClass("fixed fixedBot"):D.css({top:0}).removeClass("fixed fixedBot")}function o(e){var t=e.length,i=0;for(TweenMax.set(e,{opacity:0}),i;t>i;i++)new ScrollMagic.Scene({triggerElement:e[i]}).triggerHook(.7).setTween(TweenMax.to(e.eq(i),.25,{opacity:1})).addTo(b)}function s(){TweenMax.set([R.find(".menu-title"),R.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(R.find("li"),{y:"-120%",opacity:0})}function l(e,t,i){function n(e){var i=Math.floor(Math.random()*t);m.find("a").removeClass("on"),setTimeout(function(){F.find("div.grid").hasClass("is-hovered")||m.eq(e).find("a").addClass("on")},1500),setTimeout(n,3500,i)}var a='<div class="grid">',o=0,s=0,l=0,d=0,r=.1,p=.4,c,h=0,m;t>37&&(r+=.02,p-=.02),t>60&&(r+=.05,p-=.05);var g,f=Math.ceil(r*t),w=Math.ceil(p*t),u=t-(f+w),x=[f,Math.floor(w/2),Math.ceil(w/2),Math.ceil(u/3),Math.ceil(u/3),Math.floor(u/3)];for(l;i>l;l++)s+=x[l];for(s>t&&(x[4]-=1),g=0,l=0;i>l;l++){for(a+='<div class="po-item-col col-2">',d=0;d<x[l];d++)3===l&&d===x[l]-1&&(a+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),a+=$("ul.grid > li").eq(g).hasClass("transfered")?'<div class="po-item transfered">'+F.find("li").eq(d+o).html()+"</div>":'<div class="po-item">'+F.find("li").eq(d+o).html()+"</div>",g++;o+=d,a+="</div>"}for(a+="</div>",F.find(".container").append(a),TweenMax.set(F.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)new ScrollMagic.Scene({triggerElement:F.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(F.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(b);c=F.find("div.grid").find(".transfered"),h=c.length,m=F.find(".po-item"),n(0),m.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),m.find("a").removeClass("on"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered")})}function d(e){if(de=e.closest("li"),se=$(".desc",de),le=se.outerHeight(),!TweenMax.isTweening(z.find("li"))&&!TweenMax.isTweening(z.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(z.hasClass("member-open"))if(de.hasClass("open")){m();var t=$(".team.member-open > li.open");ce=$(".desc",t),he=new TimelineMax,$(window).width()>979?(he.to(ce,.25,{opacity:0,visibility:"hidden"}),he.to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(he.to(xe,.25,{opacity:0}),he.to(xe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),he.set(t,{className:"-=open"}),he.set(z,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}else{var t=$(".team.member-open > li.open");ce=$(".desc",t),he=new TimelineMax,$(window).width()>979?(U=t.offset().top<de.offset().top?z.offset().top+de.position().top-parseFloat(t.css("paddingBottom"))-120:z.offset().top+de.position().top-120,he.to(ce,.25,{opacity:0,visibility:"hidden"}),he.set(t,{className:"-=open"}),he.set(de,{className:"+=open"}),he.add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(de,.25,{paddingBottom:le+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:U},ease:Cubic.easeOut},"paddingAnimation"),he.to(se,.25,{opacity:1,visibility:"visible"})):(U=de.offset().top-120,he.to(xe,.25,{opacity:0,visibility:"hidden"}),he.set(t,{className:"-=open"}),he.set(de,{className:"+=open",onComplete:function(){xe.html(se.html()),TweenMax.set(xe,{height:"auto",position:"absolute"}),$e=xe.outerHeight(),TweenMax.set(xe,{height:"0",position:"relative"})}}),he.add("heightAnimation").to(xe,.5,{height:$e+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:U},ease:Cubic.easeOut},"heightAnimation"),he.to(xe,.25,{opacity:1,visibility:"visible"}),ve=de.position().left,Te=$(".container-team").width(),Me=ve-Te/2+de.outerWidth()/2,TweenMax.to(z,.5,{x:-Me,ease:Cubic.easeOut,onComplete:h}))}else if(U=de.offset().top-120,TweenMax.set(z,{className:"+=member-open"}),re=new TimelineMax,re.set(de,{className:"+=open"}),h(),$(window).width()>979)re.add("paddingAnimation").to(de,.5,{paddingBottom:le+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:U},ease:Cubic.easeOut},"paddingAnimation"),re.to(se,.25,{opacity:1,visibility:"visible"});else{xe.html('<a class="btn-cross" id="btnCloseDescResponsive" href=""></a>'+se.html()),TweenMax.set(xe,{height:"auto",position:"absolute"}),$e=xe.outerHeight(),TweenMax.set(xe,{height:"0",position:"relative"}),re.add("heightAnimation").to(xe,.5,{height:$e+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:U},ease:Cubic.easeOut},"heightAnimation"),re.to(xe,.25,{opacity:1,visibility:"visible"});var i=Math.max.apply(null,z.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:i+10+"px",ease:Cubic.easeInOut}),ve=de.position().left,Te=$(".container-team").width(),Me=ve-Te/2+de.outerWidth()/2,TweenMax.to(z,.5,{x:-Me,ease:Cubic.easeOut,onComplete:h})}}function r(){m();var e=$(".team.member-open > li.open");ce=$(".desc",e),he=new TimelineMax,$(window).width()>979?(he.to(ce,.25,{opacity:0,visibility:"hidden"}),he.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(he.to(xe,.25,{opacity:0}),he.to(xe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),he.set(e,{className:"-=open"}),he.set(z,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function p(){if(!TweenMax.isTweening(z.find("li"))&&!TweenMax.isTweening(z.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var e=$(".team.member-open > li.open");ce=$(".desc",e),he=new TimelineMax,he.to(ce,.25,{opacity:0,visibility:"hidden"}),he.set(e,{className:"-=open"}),me=$(this).hasClass("left")?e.prev().length?e.prev():z.find("> li").last():e.next().length?e.next():z.find("> li").first(),U=e.offset().top<me.offset().top?z.offset().top+me.position().top-parseFloat(e.css("paddingBottom"))-120:me.offset().top-120,ge=$(".desc",me),fe=ge.outerHeight(),he.set(me,{className:"+=open"}),he.add("paddingAnimation").to(me,.25,{paddingBottom:fe+"px",ease:Cubic.easeIn},"paddingAnimation").to(e,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:U},ease:Cubic.easeOut},"paddingAnimation"),he.to(ge,.25,{opacity:1,visibility:"visible"})}}function c(e){if(!(TweenMax.isTweening(z.find("li"))||TweenMax.isTweening(z.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(z)))if(h(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(z,.25,{x:"+="+j,ease:Cubic.easeInOut}):TweenMax.to(z,.25,{x:"-="+j,ease:Cubic.easeInOut})),$(window).width()<=979&&z.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");ce=$(".desc",t),he=new TimelineMax,he.to(xe,.25,{opacity:0,visibility:"hidden"}),he.set(t,{className:"-=open"}),me=e.hasClass("left")?t.prev():t.next(),U=me.offset().top-120,ge=$(".desc",me),he.set(me,{className:"+=open",onComplete:function(){xe.html(ge.html()),TweenMax.set(xe,{height:"auto",position:"absolute"}),$e=xe.outerHeight(),TweenMax.set(xe,{height:"0",position:"relative"})}}),he.add("heightAnimation").to(xe,.5,{height:$e+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:U},ease:Cubic.easeOut},"heightAnimation"),he.to(xe,.25,{opacity:1,visibility:"visible",onComplete:h})}else m()}function h(){if($(window).width()<=979){var e=$(".team > li").length,t=z.offset().left-20,i=t+z.width(),n=$(".container-team").width(),a=0,o=0;z.find("li").hasClass("open")&&(a=z.find("> li.open").position().left,o=z.find("> li.open").offset().left),$(window).width()>767&&e>5?(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),t<-Math.ceil(2*j)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+2*j)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"})):$(window).width()<=767&&e>3&&(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),t<-Math.ceil(j)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+j)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function m(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function g(){$(window).width()<=979?(L=z.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:L/2+"px"}),X?($(window).width()<=767?(j=$(".container-team").width()/3,G=j):(j=$(".container-team").width()/5,G=2*j),TweenMax.set($(".team > li"),{width:j+"px"}),J=0,$(".team > li").each(function(){J+=$(this).outerWidth()}),J+=2*G,TweenMax.set(z,{width:J+"px",padding:"0 "+G+"px",x:-G}),K=j,X=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/K)*K}},onDragStart:function(){m();var e=$(".team.member-open > li.open");ce=$(".desc",e),he=new TimelineMax,$(window).width()>979?(he.to(ce,.25,{opacity:0,visibility:"hidden"}),he.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(he.to(xe,.25,{opacity:0}),he.to(xe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),he.set(e,{className:"-=open"}),he.set(z,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):($(window).width()<=767?(j=$(".container-team").width()/3,G=j):(j=$(".container-team").width()/5,G=2*j),TweenMax.set($(".team > li"),{width:j+"px"}),J=0,$(".team > li").each(function(){J+=$(this).outerWidth()}),J+=2*G,TweenMax.set(z,{width:J+"px",padding:"0 "+G+"px",x:-G}),K=j,X=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/K)*K}},onDragStart:function(){m();var e=$(".team.member-open > li.open");ce=$(".desc",e),he=new TimelineMax,$(window).width()>979?(he.to(ce,.25,{opacity:0,visibility:"hidden"}),he.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(he.to(xe,.25,{opacity:0}),he.to(xe,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),he.set(e,{className:"-=open"}),he.set(z,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):X&&(TweenMax.set($(".team"),{clearProps:"all"}),TweenMax.set($(".team > li"),{clearProps:"width"}),X[0].disable())}var f=$(document).height(),w=$(window).height(),u=$(window).width(),b=new ScrollMagic.Controller,x=0,v=$(document).scrollTop(),T=0,M=$("html"),C=$("body"),y=$("#header"),O=y.innerHeight(),N=$("#mainContent"),I=$("#main"),q=$("#readIndicator"),A=$(".btn"),H=$(".btn-invert"),B=$("#contentHeader"),D=$("#postSidebar"),k=0,S=0,P=$("#spotlightPost"),W=!1,E=$("#related"),R=$("#menu-responsive"),F=$("#portfolio"),z=$(".team"),X=!1,j,G,J,K,L,Q,U,V=$(window).height(),Y=$(window).width(),Z=$(window).height(),_=$(window).width();if(M.addClass(isMobile.any?"is-mobile":"is-desktop"),i(v,T),A.length&&A.each(function(e){A.eq(e).html(t(A.eq(e)))}),H.length&&H.each(function(e){H.eq(e).html(t(H.eq(e)))}),N.length&&N.find("img").length){var ee=N.find("img").not(".no-scroll");o(ee)}if(D.length&&(k=D.offset().top,S=D.innerWidth()),P.length&&(n(),TweenMax.set(P.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(P.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(b)),E.length){var te=E.find(".read-also-post");TweenMax.set(te,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(te,.25,{opacity:1},.1)).addTo(b)}if(F.length){var ie=F.find("li"),ne=ie.length,ae=6;ne>ae&&l(ie,ne,ae)}if(z.length){var oe=z.find(".team-member"),se,le,de,re,pe,ce,he,me,ge,fe,we,ue,be,xe=$(".content-desc-responsive"),$e,ve,Te,Me;g(),h(),oe.on("click",function(e){e.preventDefault(),d($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),p()}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),c($(this))}),$(".content-desc-responsive").on("click","#btnCloseDescResponsive",function(e){e.preventDefault(),r()})}R.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),M.toggleClass("menu-open"),M.hasClass("menu-open")?setTimeout(function(){var e=0,t=R.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(R.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(R.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(R.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var t=$(document).scrollTop(),n=e(t);i(t,n),B.length&&!isMobile.any&&(t>20?TweenMax.to(B.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(B.find("h1"),.2,{y:"0px",opacity:1}),B.find(".img").length&&TweenMax.set(B.find(".img"),{y:"-"+t/40+"%"}),B.find(".menu-home").length&&TweenMax.set(B.find(".menu-home"),{y:"-"+t/4+"px"})),D.length&&N.length&&!isMobile.any&&a(t)}),$(window).on("resize",function(){f=$(document).height(),w=$(window).height(),u=$(window).width(),u>979&&M.removeClass("menu-open"),I.length&&B.length&&I.css("marginTop",Math.floor(B.innerHeight())),D.length&&(D.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),k=D.offset().top,S=D.innerWidth()),P.length&&n(),z.length&&(z.hasClass("member-open")&&(we=$(".team.member-open > li.open"),ue=$(".desc",we),be=ue.outerHeight(),TweenMax.set(we,{paddingBottom:be+"px",ease:Cubic.easeInOut})),g(),h()),Z=$(window).height(),_=$(window).width(),_!=Y&&z.length&&z.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(z,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),i=$("#contentHeader"),n=$(".team");if(i.length&&(t.length&&t.css("marginTop",Math.floor(i.innerHeight())),i.find("h1").length)){var a=new SplitText(i.find("h1"),{type:"words"});i.find("h1").css("opacity",1),e(a)}});
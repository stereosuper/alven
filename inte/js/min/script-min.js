"use strict";$(function(){function e(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),t=e.find("img").prop("src");t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")})}function t(e){var t=e>C?-1:1;return C=e,t}function i(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}function n(e){e.css("height",e.data("height")).removeClass("on")}function a(e,t){if(A.length&&S.length&&!N.hasClass("menu-open")&&(e>A.offset().top-I-40?q.addClass("fixed"):q.removeClass("fixed"),q.hasClass("fixed")&&(0>t?q.addClass("on"):q.removeClass("on"))),L.length&&(e>Q-I?L.addClass("fixed"):L.removeClass("fixed"),e>Q-I+200&&(0>t?L.addClass("on"):L.removeClass("on"))),k.length&&(O.hasClass("single-post")||O.hasClass("page-template-default"))){var i=(e-A.offset().top)/(A.innerHeight()-b);e>A.offset().top&&TweenMax.set(k,{scaleX:i})}}function o(){function e(){var e=0,i=t.length,n=t.eq(0).innerWidth();for(e;i>e;e++){var a=t.eq(e).offset().left+n;a>x||n>a?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=F.find(".spotlight-post"),i=F.find(".container").innerWidth();e(),i>x?R?R[0].enable():R=Draggable.create("#spotlightDrag",{type:"x",bounds:F,cursor:"grab",throwProps:!0,edgeResistance:.65,onDrag:e,onDragStart:function(){F.find(".container").addClass("grabbing")},onDragEnd:function(){F.find(".container").removeClass("grabbing")}}):R&&(R[0].disable(),TweenMax.set(R,{x:"0px"}))}function s(e){var t=20,i=P.innerHeight(),n=A.offset().top,a=A.innerHeight();a+2*t>i&&b>i+I+t?e>=W-I-t?(e+i+I+t>n+a-t?P.css({top:a-t-i+20,width:E}).removeClass("fixed").addClass("fixedBot"):P.css({top:I+t,width:E}).removeClass("fixedBot").addClass("fixed"),e>(a+n)/2?(P.find("li").eq(0).find(".img").addClass("off"),P.find("li").eq(1).find(".img").addClass("on")):(P.find("li").eq(0).find(".img").removeClass("off"),P.find("li").eq(1).find(".img").removeClass("on"))):P.css({top:0,width:E}).removeClass("fixed fixedBot"):P.css({top:0}).removeClass("fixed fixedBot")}function l(e){var t=e.length,i=0;for(TweenMax.set(e,{opacity:0}),i;t>i;i++)new ScrollMagic.Scene({triggerElement:e[i]}).triggerHook(.7).setTween(TweenMax.to(e.eq(i),.25,{opacity:1})).addTo(T)}function d(){TweenMax.set([z.find(".menu-title"),z.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(z.find("li"),{y:"-120%",opacity:0})}function r(e,t,i){function n(e,t){var i=X.find(".po-item:not(.transfered)"),a=X.find("li:not(.transfered)"),o=a.length,s=Math.floor(Math.random()*o);c.find("a").removeClass("on"),i.eq(t).find("a").addClass("off"),G=setTimeout(function(){X.find("div.grid").hasClass("is-hovered")||i.eq(e).hasClass("cta")||i.eq(e).find("a").addClass("on").removeClass("off")},1500),J=setTimeout(n,3500,s,e)}var a='<div class="grid">',o=0,s=0,l=0,d=0,r,p=0,c,h=[],f={3:[-1,0,-1],6:[-2,0,0,-1,-1,-1]},m={3:[1,2,0],6:[2,3,4,1,5,0]},g=Math.ceil(t/i),w=[];for(l=0;i>l;l++)w[l]=g+f[i][l];var u=t-w.reduce(function(e,t){return e+t},0);for(l=0;u>l;l++){var b=m[i][l%i];w[b]++}var x=3===i?1:3,v=3===i?3:2;if(clearTimeout(G),clearTimeout(J),K.length)for(l;l<K.length;l++)K[l].destroy(!0);for(l=0;i>l;l++)h[l]=[],a+='<div class="po-item-col col-2"></div>';a+="</div>",X.find(".container").append(a);for(var C;t>s;)for(d=0;i>d;d++)h[d]++,w[d]>=h[d]&&(d===x&&h[d]===v&&(C='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),C=X.find("ul.grid").find("li").eq(s).hasClass("transfered")?'<div class="po-item transfered">'+X.find("li").eq(s).html()+"</div>":'<div class="po-item">'+X.find("li").eq(s).html()+"</div>",X.find(".po-item-col").eq(d).append(C),s++);for(TweenMax.set(X.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)K[l]=new ScrollMagic.Scene({triggerElement:X.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(X.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(T);r=X.find("div.grid").find(".transfered"),p=r.length,c=X.find(".po-item"),n(0,-1),c.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),c.find("a").removeClass("on"),$(this).removeClass("off"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered"),$(this).addClass("off")})}function p(){if($(window).width()<=979){var e=$(".team > li").length,t=V.offset().left-20,i=t+V.width(),n=$(".container-team").width(),a=0,o=0;V.find("li").hasClass("open")&&(a=V.find("> li.open").position().left,o=V.find("> li.open").offset().left),$(window).width()>767&&e>5?(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),t<-Math.ceil(2*Z)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+2*Z)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"})):$(window).width()<=767&&e>3&&(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),t<-Math.ceil(Z)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+Z)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function c(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function h(){$(window).width()<=979?(ie=V.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:ie/2+"px"}),Y?($(window).width()<=767?(Z=$(".container-team").width()/3,_=Z):(Z=$(".container-team").width()/5,_=2*Z),TweenMax.set($(".team > li"),{width:Z+"px"}),ee=0,$(".team > li").each(function(){ee+=$(this).outerWidth()}),ee+=2*_,TweenMax.set(V,{width:ee+"px",padding:"0 "+_+"px",x:-_}),te=Z,Y=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/te)*te}},onDragStart:function(){c();var e=$(".team.member-open > li.open");ge=$(".desc",e),we=new TimelineMax,$(window).width()>979?(we.to(ge,.25,{opacity:0,visibility:"hidden"}),we.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(we.to(Ce,.25,{opacity:0}),we.to(Ce,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),we.set(e,{className:"-=open"}),we.set(V,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):($(window).width()<=767?(Z=$(".container-team").width()/3,_=Z):(Z=$(".container-team").width()/5,_=2*Z),TweenMax.set($(".team > li"),{width:Z+"px"}),ee=0,$(".team > li").each(function(){ee+=$(this).outerWidth()}),ee+=2*_,TweenMax.set(V,{width:ee+"px",padding:"0 "+_+"px",x:-_}),te=Z,Y=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/te)*te}},onDragStart:function(){c();var e=$(".team.member-open > li.open");ge=$(".desc",e),we=new TimelineMax,$(window).width()>979?(we.to(ge,.25,{opacity:0,visibility:"hidden"}),we.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(we.to(Ce,.25,{opacity:0}),we.to(Ce,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),we.set(e,{className:"-=open"}),we.set(V,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):Y&&(TweenMax.set($(".team"),{clearProps:"all"}),TweenMax.set($(".team > li"),{clearProps:"width"}),Y[0].disable())}function f(e){if(he=e.closest("li"),pe=$(".desc",he),ce=pe.outerHeight(),!TweenMax.isTweening(V.find("li"))&&!TweenMax.isTweening(V.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(V.hasClass("member-open"))if(he.hasClass("open"))m();else{var t=$(".team.member-open > li.open");ge=$(".desc",t),we=new TimelineMax,$(window).width()>979?(ne=t.offset().top<he.offset().top?V.offset().top+he.position().top-parseFloat(t.css("paddingBottom"))-120:V.offset().top+he.position().top-120,we.to(ge,.25,{opacity:0,visibility:"hidden"}),we.set(t,{className:"-=open"}),we.set(he,{className:"+=open"}),we.add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(he,.25,{paddingBottom:ce+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"paddingAnimation"),we.to(pe,.25,{opacity:1,visibility:"visible"})):(ne=he.offset().top-120,we.to(Ce,.25,{opacity:0,visibility:"hidden"}),we.set(t,{className:"-=open"}),we.set(he,{className:"+=open",onComplete:function(){Ce.html(pe.html()),TweenMax.set(Ce,{height:"auto",position:"absolute"}),Me=Ce.outerHeight(),TweenMax.set(Ce,{height:"0",position:"relative"}),we.add("heightAnimation").to(Ce,.5,{height:Me+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"heightAnimation"),we.to(Ce,.25,{opacity:1,visibility:"visible"}),ye=he.position().left,Ne=$(".container-team").width(),Oe=ye-Ne/2+he.outerWidth()/2,TweenMax.to(V,.5,{x:-Oe,ease:Cubic.easeOut,onComplete:p})}}))}else if(ne=he.offset().top-120,TweenMax.set(V,{className:"+=member-open"}),fe=new TimelineMax,fe.set(he,{className:"+=open"}),p(),$(window).width()>979)fe.add("paddingAnimation").to(he,.5,{paddingBottom:ce+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"paddingAnimation"),fe.to(pe,.25,{opacity:1,visibility:"visible"});else{Ce.html(pe.html()),TweenMax.set(Ce,{height:"auto",position:"absolute"}),Me=Ce.outerHeight(),TweenMax.set(Ce,{height:"0",position:"relative"}),fe.add("heightAnimation").to(Ce,.5,{height:Me+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"heightAnimation"),fe.to(Ce,.25,{opacity:1,visibility:"visible"});var i=Math.max.apply(null,V.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:i+10+"px",ease:Cubic.easeInOut}),ye=he.position().left,Ne=$(".container-team").width(),Oe=ye-Ne/2+he.outerWidth()/2,TweenMax.to(V,.5,{x:-Oe,ease:Cubic.easeOut,onComplete:p})}}function m(){c();var e=$(".team.member-open > li.open");ge=$(".desc",e),we=new TimelineMax,$(window).width()>979?(we.to(ge,.25,{opacity:0,visibility:"hidden"}),we.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(we.to(Ce,.25,{opacity:0}),we.to(Ce,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),we.set(e,{className:"-=open"}),we.set(V,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function g(){if(!TweenMax.isTweening(V.find("li"))&&!TweenMax.isTweening(V.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var e=$(".team.member-open > li.open");ge=$(".desc",e),we=new TimelineMax,we.to(ge,.25,{opacity:0,visibility:"hidden"}),we.set(e,{className:"-=open"}),ue=$(this).hasClass("left")?e.prev().length?e.prev():V.find("> li").last():e.next().length?e.next():V.find("> li").first(),ne=e.offset().top<ue.offset().top?V.offset().top+ue.position().top-parseFloat(e.css("paddingBottom"))-120:ue.offset().top-120,be=$(".desc",ue),xe=be.outerHeight(),we.set(ue,{className:"+=open"}),we.add("paddingAnimation").to(ue,.25,{paddingBottom:xe+"px",ease:Cubic.easeIn},"paddingAnimation").to(e,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"paddingAnimation"),we.to(be,.25,{opacity:1,visibility:"visible"})}}function w(e){if(!(TweenMax.isTweening(V.find("li"))||TweenMax.isTweening(V.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(V)))if(p(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(V,.25,{x:"+="+Z,ease:Cubic.easeInOut}):TweenMax.to(V,.25,{x:"-="+Z,ease:Cubic.easeInOut})),$(window).width()<=979&&V.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");ge=$(".desc",t),we=new TimelineMax,we.to(Ce,.25,{opacity:0,visibility:"hidden"}),we.set(t,{className:"-=open"}),ue=e.hasClass("left")?t.prev():t.next(),ne=ue.offset().top-120,be=$(".desc",ue),we.set(ue,{className:"+=open",onComplete:function(){Ce.html(pe.html()),TweenMax.set(Ce,{height:"auto",position:"absolute"}),Me=Ce.outerHeight(),TweenMax.set(Ce,{height:"0",position:"relative"}),we.add("heightAnimation").to(Ce,.5,{height:Me+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"heightAnimation"),we.to(Ce,.25,{opacity:1,visibility:"visible",onComplete:p})}})}else c()}var u=$(document).height(),b=$(window).height(),x=$(window).width(),v=x,T=new ScrollMagic.Controller,C=0,M=$(document).scrollTop(),y=0,N=$("html"),O=$("body"),q=$("#header"),I=q.innerHeight(),A=$("#mainContent"),H=$("#main"),k=$("#readIndicator"),B=$(".btn"),D=$(".btn-invert"),S=$("#contentHeader"),P=$("#postSidebar"),W=0,E=0,F=$("#spotlightPost"),R=!1,j=$("#related"),z=$("#menu-responsive"),X=$("#portfolio"),G,J,K=[],L=$("#portfolioFilters"),Q=L.length?L.offset().top:0,U=$(".dropdown"),V=$(".team"),Y=!1,Z,_,ee,te,ie,ne;if(N.addClass(isMobile.any?"is-mobile":"is-desktop"),a(M,y),e(),B.length&&B.each(function(e){B.eq(e).html(i(B.eq(e)))}),D.length&&D.each(function(e){D.eq(e).html(i(D.eq(e)))}),A.length&&A.find("img").length){var ae=A.find("img").not(".no-scroll");l(ae)}if(P.length&&(W=P.offset().top,E=P.innerWidth()),F.length&&(o(),TweenMax.set(F.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(F.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(T)),j.length){var oe=j.find(".read-also-post");TweenMax.set(oe,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(oe,.25,{opacity:1},.1)).addTo(T)}if(X.length){var se=X.find("li"),le=se.length,de=x>767?6:3;le>de&&r(se,le,de)}if(V.length){var re=V.find(".team-member"),pe,ce,he,fe,me,ge,we,ue,be,xe,$e,ve,Te,Ce=$(".content-desc-responsive"),Me,ye,Ne,Oe;h(),p(),re.on("click",function(e){e.preventDefault(),f($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),g()}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),w($(this))}),$(".container-team").on("click",".btn-cross",function(e){e.preventDefault(),m()})}z.length&&d(),U.on("click",function(e){var t=$(this),i=2,a=U.not(t);t.hasClass("on")?n(t):(t.data("height",t.css("height")).find("li").each(function(){i+=$(this).outerHeight()}),t.css("height",i).addClass("on")),a.each(function(){n($(this))})}),$("#burger").on("click",function(e){e.preventDefault(),N.toggleClass("menu-open"),N.hasClass("menu-open")?setTimeout(function(){var e=0,t=z.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(z.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(z.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(z.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):d()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var e=$(document).scrollTop(),i=t(e);a(e,i),S.length&&!isMobile.any&&(e>20?TweenMax.to(S.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(S.find("h1"),.2,{y:"0px",opacity:1}),S.find(".img").length&&TweenMax.set(S.find(".img"),{y:"-"+e/40+"%"}),S.find(".menu-home").length&&TweenMax.set(S.find(".menu-home"),{y:"-"+e/4+"px"})),P.length&&A.length&&!isMobile.any&&s(e),U.length&&U.each(function(){n($(this))})}),$(window).on("resize",function(){if(u=$(document).height(),b=$(window).height(),x=$(window).width(),x>979&&N.removeClass("menu-open"),H.length&&S.length&&H.css("marginTop",Math.floor(S.outerHeight())),P.length&&(P.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),W=P.offset().top,E=P.innerWidth()),F.length&&o(),X.length){var e=x>767?6:3;e!==de&&X.find("div.grid")&&(X.find("div.grid").remove(),de=e,r(se,le,de))}V.length&&(V.hasClass("member-open")&&($e=$(".team.member-open > li.open"),ve=$(".desc",$e),Te=ve.outerHeight(),TweenMax.set($e,{paddingBottom:Te+"px",ease:Cubic.easeInOut})),h(),p()),v!=x&&V.length&&V.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(V,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),i=$("#contentHeader");if(i.length){if(i.find("h1").length){var n=new SplitText(i.find("h1"),{type:"words"});i.find("h1").css("opacity",1),e(n)}t.length&&t.css("marginTop",Math.floor(i.outerHeight()))}});
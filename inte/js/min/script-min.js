$(function(){function e(){g=f>c?-1:1,c=f}function n(e){var n=0,t=e.length,i=[],o="",s=0,a=0,l="",d="",r=0;for(n;t>n;n++){for(o=e.eq(n).html(),i=o.split(""),s=0,a=i.length,l="",d="",r=0,s;a>s;s++)r+=.013,r=Math.round(1e3*r)/1e3," "===i[s]&&(i[s]="&nbsp;",l+='</span><span class="word">',d+='</span><span class="word">'),l+='<span style="transition-delay:'+r+'s">'+i[s]+"</span>",d+='<span style="transition-delay:'+(r+.15)+'s">'+i[s]+"</span>";e.eq(n).html('<span class="bg"></span><span class="before"><span class="word">'+l+'</span></span><span class="after"><span class="word">'+d+"</span></span>")}}function t(){function e(){var e=0,t=n.length,i=n.eq(0).innerWidth();for(e;t>e;e++){var o=n.eq(e).offset().left+i;o>x||i>o?n.eq(e).addClass("off"):n.eq(e).removeClass("off")}}var n=H.find(".spotlight-post"),t=H.find(".container").innerWidth();e(),t>x?k?k[0].enable():k=Draggable.create("#spotlightDrag",{type:"x",bounds:H,cursor:"grab",onDrag:e,onDragStart:function(){H.find(".container").addClass("grabbing")},onDragEnd:function(){H.find(".container").removeClass("grabbing")}}):k&&(k[0].disable(),TweenMax.set(k,{x:"0px"}))}function i(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}function o(){var e=20,n=b.innerHeight(),t=m.offset().top,i=m.innerHeight();i+2*e>n&&v>n+p+e?f>=q-p-e?(f+n+p+e>t+i-e?b.css({top:i-e-n+20,width:S}).removeClass("fixed").addClass("fixedBot"):b.css({top:p+e,width:S}).removeClass("fixedBot").addClass("fixed"),f>(i+t)/2?(b.find("li").eq(0).find(".img").addClass("off"),b.find("li").eq(1).find(".img").addClass("on")):(b.find("li").eq(0).find(".img").removeClass("off"),b.find("li").eq(1).find(".img").removeClass("on"))):b.css({top:0,width:S}).removeClass("fixed fixedBot"):b.css({top:0}).removeClass("fixed fixedBot")}function s(e){var n=e.length,t=0;for(TweenMax.set(e,{opacity:0}),t;n>t;t++)new ScrollMagic.Scene({triggerElement:e[t]}).triggerHook(.7).setTween(TweenMax.to(e.eq(t),.25,{opacity:1})).addTo(W)}function a(){TweenMax.set(E.find(".menu-title"),{y:"-100%",opacity:0}),TweenMax.set(E.find(".menu-subtitle"),{y:"-100%",opacity:0}),TweenMax.set(E.find("li"),{y:"-120%",opacity:0})}function l(e,n,t){function i(e){e===c&&(e=0),g.removeClass("on"),setTimeout(function(){g.eq(e).addClass("on")},1500),setTimeout(i,3500,e+1)}var o='<div class="grid">',s=0,a=0,l=0,d=0,r=.1,f=.4,g,c=0;n>37&&(r+=.02,f-=.02),n>60&&(r+=.05,f-=.05);var h=Math.ceil(r*n),p=Math.ceil(f*n),m=n-(h+p),w=[h,Math.floor(p/2),Math.ceil(p/2),Math.ceil(m/3),Math.ceil(m/3),Math.floor(m/3)];for(l;t>l;l++)a+=w[l];for(a>n&&(w[4]-=1),l=0;t>l;l++){for(o+='<div class="po-item-col col-2">',d=0;d<w[l];d++)3===l&&d===w[l]-1&&(o+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),o+='<div class="po-item">'+B.find("li").eq(d+s).html()+"</div>";s+=d,o+="</div>"}for(o+="</div>",B.find(".container").append(o),TweenMax.set(B.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;n+1>l;l++)new ScrollMagic.Scene({triggerElement:B.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(B.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(W);g=B.find("div.grid").find(".transfered"),c=g.length}var d=$("html"),r=$("body"),f=0,g=0,c=0,h=$("#header"),p=h.innerHeight(),m=$("#mainContent"),w=$("#readIndicator"),u=$(document).height(),v=$(window).height(),x=$(window).width(),y=$(".btn"),T=$(".btn-invert"),M=$("#main"),C=$("#contentHeader"),b=$("#postSidebar"),q=0,S=0,H=$("#spotlightPost"),k=!1,D=$("#related"),E=$("#menu-responsive"),B=$("#portfolio"),W=new ScrollMagic.Controller;if(d.addClass(isMobile.any?"is-mobile":"is-desktop"),y.length&&(n(y),s(y)),T.length&&(n(T),s(T)),H.length&&(t(),TweenMax.set(H.find(".spotlight-post"),{y:"-100%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(H.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(W)),D.length){var P=D.find(".read-also-post");TweenMax.set(P,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(P,.25,{opacity:1},.1)).addTo(W)}if(m.length&&m.find("img").length){var I=m.find("img").not(".no-scroll");s(I)}if(B.length){var z=B.find("li"),F=z.length,O=6;F>O&&l(z,F,O)}E.length&&a(),$("#burger").on("click",function(e){e.preventDefault(),d.toggleClass("menu-open"),d.hasClass("menu-open")?setTimeout(function(){var e=0,n=E.find(".menu-small").length;for(e;n>e;e++)TweenMax.to(E.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(E.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(E.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):a()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(f=$(document).scrollTop(),e(),m.length&&!d.hasClass("menu-open")&&(f>m.offset().top-p-40?h.addClass("fixed"):h.removeClass("fixed"),h.hasClass("fixed")&&(0>g?h.addClass("on"):h.removeClass("on"))),w.length&&(r.hasClass("single")||r.hasClass("page-template-default"))){var n=(f-m.offset().top)/(m.innerHeight()-v);f>m.offset().top&&TweenMax.set(w,{scaleX:n})}C.length&&!isMobile.any&&(TweenMax.set(C.find("h1"),{y:"-"+f/4+"px"}),C.find(".img").length&&TweenMax.set(C.find(".img"),{y:"-"+f/40+"%"}),C.find(".menu-home").length&&TweenMax.set(C.find(".menu-home"),{y:"-"+f/4+"px"})),b.length&&m.length&&!isMobile.any&&o()}),$(window).resize(function(){u=$(document).height(),v=$(window).height(),x=$(window).width(),x>979&&d.removeClass("menu-open"),M.length&&C.length&&M.css("marginTop",C.innerHeight()),b.length&&(b.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),q=b.offset().top,S=b.innerWidth()-1),H.length&&t()}),$(window).load(function(){if(u=$(document).height(),C.length&&(M.length&&M.css("marginTop",C.innerHeight()),C.find("h1").length)){var e=new SplitText(C.find("h1"),{type:"words"});C.find("h1").css("opacity",1),i(e)}b.length&&(q=b.offset().top,S=b.innerWidth()-1)})});
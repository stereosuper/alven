"use strict";$(function(){function e(){h=c>p?-1:1,p=c}function n(e){var n=0,t=[],i=[],o=[],a=[],s=[],l=[],d=e.length,r;for(n;d>n;n++)r=e.eq(n).html(),e.eq(n).html('<span class="bg"></span><span class="before">'+r+'</span><span class="after">'+r+"</span>"),t[n]=new TimelineMax,o[n]=new SplitText($(".before",e.eq(n)),{type:"words,chars"}),s[n]=o[n].chars,i[n]=new TimelineMax,a[n]=new SplitText($(".after",e.eq(n)),{type:"words,chars"}),l[n]=a[n].chars,TweenMax.set(l[n],{y:40,opacity:0});e.hover(function(){var n=e.index(this);t[n].staggerTo(s[n],.2,{y:-40,opacity:0,ease:Cubic.easeIn},.013),i[n].staggerTo(l[n],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeIn},.013)},function(){var n=e.index(this);t[n].staggerTo(s[n],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeOut},.013),i[n].staggerTo(l[n],.2,{y:40,opacity:0,ease:Cubic.easeIn},.013)})}function t(){function e(){var e=0,t=n.length,i=n.eq(0).innerWidth();for(e;t>e;e++){var o=n.eq(e).offset().left+i;o>f||i>o?n.eq(e).addClass("off"):n.eq(e).removeClass("off")}}var n=k.find(".spotlight-post"),t=k.find(".container").innerWidth();e(),t>f?D?D[0].enable():D=Draggable.create("#spotlightDrag",{type:"x",bounds:k,cursor:"grab",onDrag:e,onDragStart:function(){k.find(".container").addClass("grabbing")},onDragEnd:function(){k.find(".container").removeClass("grabbing")}}):D&&(D[0].disable(),TweenMax.set(D,{x:"0px"}))}function i(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}function o(){var e=20,n=q.innerHeight(),t=T.offset().top,i=T.innerHeight();i+2*e>n&&r>n+y+e?c>=S-y-e?(c+n+y+e>t+i-e?q.css({top:i-e-n+20,width:H}).removeClass("fixed").addClass("fixedBot"):q.css({top:y+e,width:H}).removeClass("fixedBot").addClass("fixed"),c>(i+t)/2?(q.find("li").eq(0).find(".img").addClass("off"),q.find("li").eq(1).find(".img").addClass("on")):(q.find("li").eq(0).find(".img").removeClass("off"),q.find("li").eq(1).find(".img").removeClass("on"))):q.css({top:0,width:H}).removeClass("fixed fixedBot"):q.css({top:0}).removeClass("fixed fixedBot")}function a(e){var n=e.length,t=0;for(TweenMax.set(e,{opacity:0}),t;n>t;t++)new ScrollMagic.Scene({triggerElement:e[t]}).triggerHook(.7).setTween(TweenMax.to(e.eq(t),.25,{opacity:1})).addTo(g)}function s(){TweenMax.set(B.find(".menu-title"),{y:"-100%",opacity:0}),TweenMax.set(B.find(".menu-subtitle"),{y:"-100%",opacity:0}),TweenMax.set(B.find("li"),{y:"-120%",opacity:0})}function l(e,n,t){function i(e){e===p&&(e=0),h.removeClass("on"),setTimeout(function(){h.eq(e).addClass("on")},1500),setTimeout(i,3500,e+1)}function o(e){$("a",m).removeClass("on"),setTimeout(function(){var n=m.eq(e);$("a",n).addClass("on")},1500);var t=Math.floor(Math.random()*n);setTimeout(o,3500,t)}var a='<div class="grid">',s=0,l=0,d=0,r=0,f=.1,c=.4,h,p=0,m;n>37&&(f+=.02,c-=.02),n>60&&(f+=.05,c-=.05);var u=Math.ceil(f*n),w=Math.ceil(c*n),y=n-(u+w),T=[u,Math.floor(w/2),Math.ceil(w/2),Math.ceil(y/3),Math.ceil(y/3),Math.floor(y/3)];for(d;t>d;d++)l+=T[d];for(l>n&&(T[4]-=1),d=0;t>d;d++){for(a+='<div class="po-item-col col-2">',r=0;r<T[d];r++)3===d&&r===T[d]-1&&(a+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),a+='<div class="po-item">'+I.find("li").eq(r+s).html()+"</div>";s+=r,a+="</div>"}for(a+="</div>",I.find(".container").append(a),TweenMax.set(I.find(".po-item"),{opacity:0,y:"30%",scale:.8}),d=0;n+1>d;d++)new ScrollMagic.Scene({triggerElement:I.find(".po-item")[d]}).triggerHook(.9).setTween(TweenMax.to(I.find(".po-item").eq(d),.25,{opacity:1,y:"0%",scale:1})).addTo(g);h=I.find("div.grid").find(".transfered"),p=h.length,m=I.find(".po-item"),o(0)}var d=$(document).height(),r=$(window).height(),f=$(window).width(),g=new ScrollMagic.Controller,c=0,h=0,p=0,m=$("html"),u=$("body"),w=$("#header"),y=w.innerHeight(),T=$("#mainContent"),v=$("#main"),x=$("#readIndicator"),C=$(".btn"),M=$(".btn-invert"),b=$("#contentHeader"),q=$("#postSidebar"),S=0,H=0,k=$("#spotlightPost"),D=!1,E=$("#related"),B=$("#menu-responsive"),I=$("#portfolio");if(isMobile.any?m.addClass("is-mobile"):m.addClass("is-desktop"),C.length&&(n(C),a(C)),M.length&&(n(M),a(M)),k.length&&(t(),TweenMax.set(k.find(".spotlight-post"),{y:"-100%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(k.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(g)),E.length){var W=E.find(".read-also-post");TweenMax.set(W,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(W,.25,{opacity:1},.1)).addTo(g)}if(T.length&&T.find("img").length){var P=T.find("img").not(".no-scroll");a(P)}if(I.length){var O=I.find("li"),z=O.length,F=6;z>F&&l(O,z,F)}B.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),m.toggleClass("menu-open"),m.hasClass("menu-open")?setTimeout(function(){var e=0,n=B.find(".menu-small").length;for(e;n>e;e++)TweenMax.to(B.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(B.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(B.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(c=$(document).scrollTop(),e(),T.length&&!m.hasClass("menu-open")&&(c>T.offset().top-y-40?w.addClass("fixed"):w.removeClass("fixed"),w.hasClass("fixed")&&(0>h?w.addClass("on"):w.removeClass("on"))),x.length&&(u.hasClass("single")||u.hasClass("page-template-default"))){var n=(c-T.offset().top)/(T.innerHeight()-r);c>T.offset().top&&TweenMax.set(x,{scaleX:n})}b.length&&!isMobile.any&&(TweenMax.set(b.find("h1"),{y:"-"+c/4+"px"}),b.find(".img").length&&TweenMax.set(b.find(".img"),{y:"-"+c/40+"%"}),b.find(".menu-home").length&&TweenMax.set(b.find(".menu-home"),{y:"-"+c/4+"px"})),q.length&&T.length&&!isMobile.any&&o()}),$(window).resize(function(){d=$(document).height(),r=$(window).height(),f=$(window).width(),f>979&&m.removeClass("menu-open"),v.length&&b.length&&v.css("marginTop",b.innerHeight()),q.length&&(q.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),S=q.offset().top,H=q.innerWidth()-1),k.length&&t()}),$(window).load(function(){if(d=$(document).height(),b.length&&(v.length&&v.css("marginTop",b.innerHeight()),b.find("h1").length)){var e=new SplitText(b.find("h1"),{type:"words"});b.find("h1").css("opacity",1),i(e)}q.length&&(S=q.offset().top,H=q.innerWidth()-1)})});
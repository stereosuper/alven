"use strict";function setBtn(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}$(function(){function e(){!Modernizr.objectfit&&$(".img-fit").length&&$(".img-fit").each(function(){var e=$(this),t=e.find("img").prop("src");t&&e.css("backgroundImage","url("+t+")").addClass("compat-object-fit")})}function t(e){var t=e>T?-1:1;return T=e,t}function n(e){e.css("height",e.data("height")).removeClass("on")}function i(e,t){if(I.length&&D.length&&!y.hasClass("menu-open")&&(e>I.offset().top-N-40?O.addClass("fixed"):O.removeClass("fixed"),O.hasClass("fixed")&&(0>t?O.addClass("on"):O.removeClass("on"))),K.length){var n=L-N+200;K.hasClass("single-on")?n-=400:e>L-N?K.addClass("fixed"):K.removeClass("fixed"),e>n&&(0>t?K.addClass("on"):K.removeClass("on"))}if(H.length&&(q.hasClass("single-post")||q.hasClass("page-template-default"))){var i=(e-I.offset().top)/(I.innerHeight()-w);e>I.offset().top&&TweenMax.set(H,{scaleX:i})}}function a(){function e(){var e=0,n=t.length,i=t.eq(0).innerWidth();for(e;n>e;e++){var a=t.eq(e).offset().left+i;a>b||i>a?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=E.find(".spotlight-post"),n=E.find(".container").innerWidth();if(e(),n>b)if(F)F[0].enable();else{var i=Math.round($("#spotlightDrag").find(".spotlight-post").first().innerWidth());F=Draggable.create("#spotlightDrag",{type:"x",bounds:E,cursor:"grab",throwProps:!0,edgeResistance:.9,snap:{x:function(e){return Math.round(e/i)*i}},onDrag:e,onDragStart:function(){E.find(".container").addClass("grabbing")},onDragEnd:function(){E.find(".container").removeClass("grabbing")},onThrowComplete:e})}else F&&(F[0].disable(),TweenMax.set(F,{x:"0px"}))}function o(e){var t=20,n=S.innerHeight(),i=I.offset().top,a=I.innerHeight();a+2*t>n&&w>n+N+t?e>=P-N-t?(e+n+N+t>i+a-t?S.css({top:a-t-n+20,width:W}).removeClass("fixed").addClass("fixedBot"):S.css({top:N+t,width:W}).removeClass("fixedBot").addClass("fixed"),e>(a+i)/2?(S.find("li").eq(0).find(".img").addClass("off"),S.find("li").eq(1).find(".img").addClass("on")):(S.find("li").eq(0).find(".img").removeClass("off"),S.find("li").eq(1).find(".img").removeClass("on"))):S.css({top:0,width:W}).removeClass("fixed fixedBot"):S.css({top:0}).removeClass("fixed fixedBot")}function s(e){var t=e.length,n=0;for(TweenMax.set(e,{opacity:0}),n;t>n;n++)new ScrollMagic.Scene({triggerElement:e[n]}).triggerHook(.7).setTween(TweenMax.to(e.eq(n),.25,{opacity:1})).addTo(v)}function l(){TweenMax.set([j.find(".menu-title"),j.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(j.find("li"),{y:"-120%",opacity:0})}function r(e,t,n){function i(e,t){var n=p.not(".transfered"),a=z.find("li").not(".transfered"),o=a.length,s=Math.floor(Math.random()*o);p.find("a").removeClass("on"),n.eq(t).find("a").addClass("off"),X=setTimeout(function(){z.find("div.grid").hasClass("is-hovered")||n.eq(e).hasClass("cta")||n.eq(e).find("a").addClass("on").removeClass("off")},1500),G=setTimeout(i,3500,s,e)}var a='<div class="grid">',o=0,s=0,l=0,r,d=0,p,c=[],f={3:[-1,0,-1],6:[-2,0,0,-1,-1,-1]},h={3:[1,2,0],6:[2,3,4,1,5,0]},m=Math.ceil(t/n),g=[];for(l=0;n>l;l++)g[l]=m+f[n][l];var u=t-g.reduce(function(e,t){return e+t},0);for(l=0;u>l;l++){var w=h[n][l%n];g[w]++}var b=3===n?1:3,x=3===n?3:2;if(clearTimeout(X),clearTimeout(G),J.length)for(l;l<J.length;l++)J[l].destroy(!0);for(l=0;n>l;l++)c[l]=[],a+='<div class="po-item-col col-2"></div>';for(a+="</div>",z.find(".container").append(a);t>s;)for(l=0;n>l;l++){var T="";c[l]++,e.eq(s).length&&g[l]>=c[l]&&(l===b&&c[l]===x&&(T='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),T+=e.eq(s).hasClass("transfered")?'<div class="po-item transfered">'+e.eq(s).html()+"</div>":'<div class="po-item">'+e.eq(s).html()+"</div>",z.find(".po-item-col").eq(l).append(T),s++)}for(TweenMax.set(z.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)J[l]=new ScrollMagic.Scene({triggerElement:z.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(z.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(v);r=z.find("div.grid").find(".transfered"),d=r.length,p=z.find(".po-item"),i(0,-1),p.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),p.find("a").removeClass("on"),$(this).removeClass("off"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered"),$(this).addClass("off")})}function d(){if(979>=b){var e=$(".team > li").length,t=U.offset().left-20,n=t+U.width(),i=$(".container-team").width(),a=0,o=0;U.find("li").hasClass("open")&&(a=U.find("> li.open").position().left,o=U.find("> li.open").offset().left),b>767&&e>5?(TweenMax.set([$(".wrapper-btn-glob.btn-prev"),$(".wrapper-btn-glob.btn-next")],{className:"-=open"}),t<-Math.ceil(2*Y)&&TweenMax.set($(".wrapper-btn-glob.btn-prev"),{className:"+=open"}),Math.ceil(n+2*Y)>i&&TweenMax.set($(".wrapper-btn-glob.btn-next"),{className:"+=open"})):767>=b&&e>3&&(TweenMax.set([$(".wrapper-btn-glob.btn-prev"),$(".wrapper-btn-glob.btn-next")],{className:"-=open"}),t<-Math.ceil(Y)&&TweenMax.set($(".wrapper-btn-glob.btn-prev"),{className:"+=open"}),Math.ceil(n+Y)>i&&TweenMax.set($(".wrapper-btn-glob.btn-next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function p(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function c(){979>=b?(te=U.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:te/2+"px"}),V?(767>=b?(Y=$(".container-team").width()/3,Z=Y):(Y=$(".container-team").width()/5,Z=2*Y),TweenMax.set(U.find("> li"),{width:Y+"px"}),_=0,U.find("> li").each(function(){_+=$(this).outerWidth()}),_+=2*Z,TweenMax.set(U,{width:_+"px",padding:"0 "+Z+"px",x:-Z}),ee=Y,V=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.9,dragClickables:!0,snap:{x:function(e){return Math.round(e/ee)*ee}},onDragStart:function(){p();var e=$(".team.member-open > li.open");he=$(".desc",e),me=new TimelineMax,$(window).width()>979?(me.to(he,.25,{opacity:0,visibility:"hidden"}),me.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(me.to($e,.25,{opacity:0}),me.to($e,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),me.set(e,{className:"-=open"}),me.set(U,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):(767>=b?(Y=$(".container-team").width()/3,Z=Y):(Y=$(".container-team").width()/5,Z=2*Y),TweenMax.set(U.find("> li"),{width:Y+"px"}),_=0,U.find("> li").each(function(){_+=$(this).outerWidth()}),_+=2*Z,TweenMax.set(U,{width:_+"px",padding:"0 "+Z+"px",x:-Z}),ee=Y,V=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.9,dragClickables:!0,snap:{x:function(e){return Math.round(e/ee)*ee}},onDragStart:function(){p();var e=$(".team.member-open > li.open");he=$(".desc",e),me=new TimelineMax,b>979?(me.to(he,.25,{opacity:0,visibility:"hidden"}),me.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(me.to($e,.25,{opacity:0}),me.to($e,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),me.set(e,{className:"-=open"}),me.set(U,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):V&&(TweenMax.set(U,{clearProps:"all"}),TweenMax.set(U.find("> li"),{clearProps:"width"}),V[0].disable())}function f(e){if(ce=e.closest("li"),de=$(".desc",ce),pe=de.outerHeight(),!TweenMax.isTweening(U.find("li"))&&!TweenMax.isTweening(U.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(U.hasClass("member-open"))if(ce.hasClass("open"))h();else{var t=$(".team.member-open > li.open");he=$(".desc",t),me=new TimelineMax,b>979?(ne=U.offset().top+ce.position().top-120,t.offset().top<ce.offset().top&&(ne-=parseFloat(t.css("paddingBottom"))),me.to(he,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),me.set(ce,{className:"+=open"}).add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(ce,.25,{paddingBottom:pe+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"paddingAnimation"),me.to(de,.25,{opacity:1,visibility:"visible"})):(ne=ce.offset().top-120,me.to($e,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),me.set(ce,{className:"+=open",onComplete:function(){$e.html(de.html()),TweenMax.set($e,{height:"auto",position:"absolute"}),Te=$e.outerHeight(),TweenMax.set($e,{height:"0",position:"relative"}),me.add("heightAnimation").to($e,.5,{height:Te+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"heightAnimation").to($e,.25,{opacity:1,visibility:"visible"}),Ce=ce.position().left,Me=$(".container-team").width(),ye=Ce-Me/2+ce.outerWidth()/2,TweenMax.to(U,.5,{x:-ye,ease:Cubic.easeOut,onComplete:d})}}))}else if(ne=ce.offset().top-120,TweenMax.set(U,{className:"+=member-open"}),fe=new TimelineMax,fe.set(ce,{className:"+=open"}),d(),b>979)fe.add("paddingAnimation").to(ce,.5,{paddingBottom:pe+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"paddingAnimation").to(de,.25,{opacity:1,visibility:"visible"});else{$e.html(de.html()),TweenMax.set($e,{height:"auto",position:"absolute"}),Te=$e.outerHeight(),TweenMax.set($e,{height:"0",position:"relative"}),fe.add("heightAnimation").to($e,.5,{height:Te+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"heightAnimation").to($e,.25,{opacity:1,visibility:"visible"});var n=Math.max.apply(null,U.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:n+10+"px",ease:Cubic.easeInOut}),Ce=ce.position().left,Me=$(".container-team").width(),ye=Ce-Me/2+ce.outerWidth()/2,TweenMax.to(U,.5,{x:-ye,ease:Cubic.easeOut,onComplete:d})}}function h(){p();var e=$(".team.member-open > li.open");he=$(".desc",e),me=new TimelineMax,b>979?me.to(he,.25,{opacity:0,visibility:"hidden"}).to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut}):me.to($e,.25,{opacity:0}).to($e,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut}),me.set(e,{className:"-=open"}).set(U,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function m(){if(!TweenMax.isTweening(U.find("li"))&&!TweenMax.isTweening(U.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var e=$(".team.member-open > li.open");he=$(".desc",e),me=new TimelineMax,me.to(he,.25,{opacity:0,visibility:"hidden"}).set(e,{className:"-=open"}),ge=$(this).hasClass("left")?e.prev().length?e.prev():U.find("> li").last():e.next().length?e.next():U.find("> li").first(),ne=e.offset().top<ge.offset().top?U.offset().top+ge.position().top-parseFloat(e.css("paddingBottom"))-120:ge.offset().top-120,ue=$(".desc",ge),we=ue.outerHeight(),me.set(ge,{className:"+=open"}).add("paddingAnimation").to(ge,.25,{paddingBottom:we+"px",ease:Cubic.easeIn},"paddingAnimation").to(e,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"paddingAnimation").to(ue,.25,{opacity:1,visibility:"visible"})}}function g(e){if(!(TweenMax.isTweening(U.find("li"))||TweenMax.isTweening(U.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(U)))if(d(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(U,.25,{x:"+="+Y,ease:Cubic.easeInOut}):TweenMax.to(U,.25,{x:"-="+Y,ease:Cubic.easeInOut})),979>=b&&U.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");he=$(".desc",t),me=new TimelineMax,me.to($e,.25,{opacity:0,visibility:"hidden"}).set(t,{className:"-=open"}),ge=e.hasClass("left")?t.prev():t.next(),ne=ge.offset().top-120,ue=$(".desc",ge),me.set(ge,{className:"+=open",onComplete:function(){$e.html(de.html()),TweenMax.set($e,{height:"auto",position:"absolute"}),Te=$e.outerHeight(),TweenMax.set($e,{height:"0",position:"relative"}),me.add("heightAnimation").to($e,.5,{height:Te+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ne},ease:Cubic.easeOut},"heightAnimation").to($e,.25,{opacity:1,visibility:"visible",onComplete:d})}})}else p()}var u=$(document).height(),w=$(window).height(),b=$(window).width(),x=b,v=new ScrollMagic.Controller,T=0,C=$(document).scrollTop(),M=0,y=$("html"),q=$("body"),O=$("#header"),N=O.innerHeight(),I=$("#mainContent"),A=$("#main"),H=$("#readIndicator"),B=$(".btn"),k=$(".btn-invert"),D=$("#contentHeader"),S=$("#postSidebar"),P=0,W=0,E=$("#spotlightPost"),F=!1,R=$("#related"),j=$("#menu-responsive"),z=$("#portfolio"),X,G,J=[],K=$("#portfolioFilters"),L=K.length?K.offset().top:0,Q=$(".dropdown"),U=$(".team"),V=!1,Y,Z,_,ee,te,ne;if(isMobile.any?y.addClass("is-mobile"):y.addClass("is-desktop"),i(C,M),e(),B.length&&B.each(function(e){B.eq(e).html(setBtn(B.eq(e)))}),k.length&&k.each(function(e){k.eq(e).html(setBtn(k.eq(e)))}),I.length&&I.find("img").length){var ie=I.find("img").not(".no-scroll");s(ie)}if(S.length&&(P=S.offset().top,W=S.innerWidth()),E.length&&(a(),TweenMax.set(E.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(E.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(v)),R.length){var ae=R.find(".read-also-post");TweenMax.set(ae,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(ae,.25,{opacity:1},.1)).addTo(v)}if(z.length){var oe=z.find("li"),se=oe.length,le=b>767?6:3;se>le&&r(oe,se,le),K.on("click","li",function(){var e=$(this);if(!e.hasClass("actif")){var t=[],n=0,i=K.find(".dropdown"),a=i.length,o,s;for(e.siblings().removeClass("actif"),e.addClass("actif").clone().prependTo(e.parents(".dropdown")),e.remove(),n;a>n;n++)t[n]=[i.eq(n).attr("data-filter"),i.eq(n).find(".actif").attr("data-"+i.eq(n).attr("data-filter"))];o=oe.filter(function(){var e=$(this),n=!0;return t.forEach(function(i,a){"all"!==t[a][1]&&n&&-1===$.inArray(t[a][1],$("a",e).data(t[a][0]).split(","))&&(n=!1)}),n}),s=o.length,le=b>767?6:3,z.find("div.grid").remove(),r(o,s,le)}})}if(U.length){var re=U.find(".team-member"),de,pe,ce,fe,he,me,ge,ue,we,be,xe,ve,$e=$(".content-desc-responsive"),Te,Ce,Me,ye;c(),d(),re.on("click",function(e){e.preventDefault(),f($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),m()}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),g($(this))}),$(".container-team").on("click",".btn-cross",function(e){e.preventDefault(),h()})}j.length&&l(),Q.on("click",function(){var e=$(this),t=2,i=Q.not(e);e.hasClass("on")?n(e):(e.data("height",e.css("height")).find("li").each(function(){t+=$(this).outerHeight()}),e.css("height",t).addClass("on")),i.each(function(){n($(this))})}),$("#burger").on("click",function(e){e.preventDefault(),y.toggleClass("menu-open"),y.hasClass("menu-open")?setTimeout(function(){var e=0,t=j.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(j.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(j.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(j.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):l()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var e=$(document).scrollTop(),a=t(e);i(e,a),D.length&&!isMobile.any&&(e>20?TweenMax.to(D.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(D.find("h1"),.2,{y:"0px",opacity:1}),D.find(".img").length&&TweenMax.set(D.find(".img"),{y:"-"+e/40+"%"}),D.find(".menu-home").length&&TweenMax.set(D.find(".menu-home"),{y:"-"+e/4+"px"})),S.length&&I.length&&!isMobile.any&&o(e),Q.length&&Q.each(function(){n($(this))})}),$(window).on("resize",function(){if(u=$(document).height(),w=$(window).height(),b=$(window).width(),b>979&&y.removeClass("menu-open"),A.length&&D.length&&A.css("marginTop",Math.floor(D.outerHeight())),S.length&&(S.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),P=S.offset().top,W=S.innerWidth()),E.length&&a(),z.length){var e=b>767?6:3;e!==le&&z.find("div.grid")&&(z.find("div.grid").remove(),le=e,r(oe,se,le))}U.length&&(U.hasClass("member-open")&&(be=$(".team.member-open > li.open"),xe=$(".desc",be),ve=xe.outerHeight(),TweenMax.set(be,{paddingBottom:ve+"px",ease:Cubic.easeInOut})),c(),d()),x!=b&&U.length&&U.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(U,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),n=$("#contentHeader");if(n.length){if(n.find("h1").length){var i=new SplitText(n.find("h1"),{type:"words"});n.find("h1").css("opacity",1),e(i)}t.length&&t.css("marginTop",Math.floor(n.outerHeight()))}});
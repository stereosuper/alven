$(function(){function e(){s=t>o?-1:o>t?1:0,o=t}function n(){var e=0,n=g.length,i=[],t="",s=0,o=0,a="",d=0;for(e;n>e;e++){for(t=g.eq(e).html(),i=t.split(""),s=0,o=i.length,a="",d=0,s;o>s;s++)d+=.014,d=Math.round(1e3*d)/1e3,a+='<span style="transition-delay:'+d+'s">'+i[s]+"</span>";g.eq(e).html('<span class="before">'+a+'</span><span class="after">'+t+"</span>")}}function i(){var e=20,n=p.innerHeight(),i=l.offset().top,s=l.innerHeight();s+2*e>n&&r>n+d+e&&t>=C-d-e?(t+n+d+e>i+s-e?p.css({top:s-e-n+20}).removeClass("fixed").addClass("fixedBot"):p.css({top:d+e,width:p.innerWidth()}).removeClass("fixedBot").addClass("fixed"),t>(s+i)/2?(p.find("li").eq(0).find(".img").addClass("off"),p.find("li").eq(1).find(".img").addClass("on")):(p.find("li").eq(0).find(".img").removeClass("off"),p.find("li").eq(1).find(".img").removeClass("on"))):p.css({top:0}).removeClass("fixed fixedBot")}var t=0,s=0,o=0,a=$("#header"),d=a.innerHeight(),l=$("#mainContent"),f=$("#readIndicator"),h=$(document).height(),r=$(window).height(),g=$(".btn"),c=$("#main"),m=$("#contentHeader"),p=$("#postSidebar"),C=0;g.length&&n(),$(document).scroll(function(){if(t=$(document).scrollTop(),e(),l.length&&(t>l.offset().top-d-40?a.addClass("fixed"):a.removeClass("fixed"),a.hasClass("fixed")&&(0>s?a.addClass("on"):a.removeClass("on"))),f.length){var n=t/(h-r);TweenMax.set(f,{scaleX:n})}p.length&&l.length&&i()}),$(window).resize(function(){h=$(document).height(),r=$(window).height(),c.length&&m.length&&c.css("marginTop",m.innerHeight())}),$(window).load(function(){h=$(document).height(),c.length&&m.length&&c.css("marginTop",m.innerHeight()),p.length&&(C=p.offset().top)})});
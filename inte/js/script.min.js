"use strict";$(function(){function e(e){var n=e>c?-1:1;return c=e,n}function n(e){var n=0,t=[],i=[],o=[],a=[],s=[],l=[],r=e.length,d;for(n;r>n;n++)d=e.eq(n).html(),e.eq(n).html('<span class="bg"></span><span class="before">'+d+'</span><span class="after">'+d+"</span>"),t[n]=new TimelineMax,o[n]=new SplitText($(".before",e.eq(n)),{type:"words,chars"}),s[n]=o[n].chars,i[n]=new TimelineMax,a[n]=new SplitText($(".after",e.eq(n)),{type:"words,chars"}),l[n]=a[n].chars,TweenMax.set(l[n],{y:40,opacity:0});e.hover(function(){var n=e.index(this);t[n].staggerTo(s[n],.2,{y:-40,opacity:0,ease:Cubic.easeIn},.013),i[n].staggerTo(l[n],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeIn},.013)},function(){var n=e.index(this);t[n].staggerTo(s[n],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeOut},.013),i[n].staggerTo(l[n],.2,{y:40,opacity:0,ease:Cubic.easeIn},.013)})}function t(){function e(){var e=0,t=n.length,i=n.eq(0).innerWidth();for(e;t>e;e++){var o=n.eq(e).offset().left+i;o>d||i>o?n.eq(e).addClass("off"):n.eq(e).removeClass("off")}}var n=q.find(".spotlight-post"),t=q.find(".container").innerWidth();e(),t>d?S?S[0].enable():S=Draggable.create("#spotlightDrag",{type:"x",bounds:q,cursor:"grab",onDrag:e,onDragStart:function(){q.find(".container").addClass("grabbing")},onDragEnd:function(){q.find(".container").removeClass("grabbing")}}):S&&(S[0].disable(),TweenMax.set(S,{x:"0px"}))}function i(e){var n=20,t=C.innerHeight(),i=u.offset().top,o=u.innerHeight();o+2*n>t&&r>t+m+n?e>=M-m-n?(e+t+m+n>i+o-n?C.css({top:o-n-t+20,width:b}).removeClass("fixed").addClass("fixedBot"):C.css({top:m+n,width:b}).removeClass("fixedBot").addClass("fixed"),e>(o+i)/2?(C.find("li").eq(0).find(".img").addClass("off"),C.find("li").eq(1).find(".img").addClass("on")):(C.find("li").eq(0).find(".img").removeClass("off"),C.find("li").eq(1).find(".img").removeClass("on"))):C.css({top:0,width:b}).removeClass("fixed fixedBot"):C.css({top:0}).removeClass("fixed fixedBot")}function o(e){var n=e.length,t=0;for(TweenMax.set(e,{opacity:0}),t;n>t;t++)new ScrollMagic.Scene({triggerElement:e[t]}).triggerHook(.7).setTween(TweenMax.to(e.eq(t),.25,{opacity:1})).addTo(f)}function a(){TweenMax.set([k.find(".menu-title"),k.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(k.find("li"),{y:"-120%",opacity:0})}function s(e,n,t){function i(e){e===p&&(e=0),h.removeClass("on"),setTimeout(function(){h.eq(e).addClass("on")},1500),setTimeout(i,3500,e+1)}function o(e){var t=Math.floor(Math.random()*n);$("a",m).removeClass("on"),setTimeout(function(){var n=m.eq(e);$("a",n).addClass("on")},1500),setTimeout(o,3500,t)}var a='<div class="grid">',s=0,l=0,r=0,d=0,c=.1,g=.4,h,p=0,m;n>37&&(c+=.02,g-=.02),n>60&&(c+=.05,g-=.05);var u=Math.ceil(c*n),w=Math.ceil(g*n),v=n-(u+w),T=[u,Math.floor(w/2),Math.ceil(w/2),Math.ceil(v/3),Math.ceil(v/3),Math.floor(v/3)];for(r;t>r;r++)l+=T[r];for(l>n&&(T[4]-=1),r=0;t>r;r++){for(a+='<div class="po-item-col col-2">',d=0;d<T[r];d++)3===r&&d===T[r]-1&&(a+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),a+='<div class="po-item">'+D.find("li").eq(d+s).html()+"</div>";s+=d,a+="</div>"}for(a+="</div>",D.find(".container").append(a),TweenMax.set(D.find(".po-item"),{opacity:0,y:"30%",scale:.8}),r=0;n+1>r;r++)new ScrollMagic.Scene({triggerElement:D.find(".po-item")[r]}).triggerHook(.9).setTween(TweenMax.to(D.find(".po-item").eq(r),.25,{opacity:1,y:"0%",scale:1})).addTo(f);h=D.find("div.grid").find(".transfered"),p=h.length,m=D.find(".po-item"),o(0)}var l=$(document).height(),r=$(window).height(),d=$(window).width(),f=new ScrollMagic.Controller,c=0,g=$("html"),h=$("body"),p=$("#header"),m=p.innerHeight(),u=$("#mainContent"),w=$("#main"),v=$("#readIndicator"),T=$(".btn"),x=$(".btn-invert"),y=$("#contentHeader"),C=$("#postSidebar"),M=0,b=0,q=$("#spotlightPost"),S=!1,H=$("#related"),k=$("#menu-responsive"),D=$("#portfolio"),B=$(".team");if(isMobile.any?g.addClass("is-mobile"):g.addClass("is-desktop"),T.length&&(n(T),o(T)),x.length&&(n(x),o(x)),u.length&&u.find("img").length){var E=u.find("img").not(".no-scroll");o(E)}if(C.length&&(M=C.offset().top,b=C.innerWidth()),q.length&&(t(),TweenMax.set(q.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(q.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(f)),H.length){var I=H.find(".read-also-post");TweenMax.set(I,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(I,.25,{opacity:1},.1)).addTo(f)}if(D.length){var W=D.find("li"),P=W.length,N=6;P>N&&s(W,P,N)}if(B.length){var O=B.find(".team-member");O.on("click",function(e){e.preventDefault();var n,t,i,o;i=$(this).closest("li"),n=$(".desc",i),t=n.outerHeight(),B.hasClass("member-open")?i.hasClass("open"):TweenMax.set(B,{className:"+=member-open"}),o=new TimelineMax,TweenMax.set(i,{className:"+=open"}),o.to(i,.25,{paddingBottom:t+"px"}),o.to(n,.25,{opacity:1})})}k.length&&a(),$("#burger").on("click",function(e){e.preventDefault(),g.toggleClass("menu-open"),g.hasClass("menu-open")?setTimeout(function(){var e=0,n=k.find(".menu-small").length;for(e;n>e;e++)TweenMax.to(k.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(k.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(k.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):a()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var n=$(document).scrollTop(),t=e(n);if(u.length&&!g.hasClass("menu-open")&&(n>u.offset().top-m-40?p.addClass("fixed"):p.removeClass("fixed"),p.hasClass("fixed")&&(0>t?p.addClass("on"):p.removeClass("on"))),v.length&&(h.hasClass("single-post")||h.hasClass("page-template-default"))){var o=(n-u.offset().top)/(u.innerHeight()-r);n>u.offset().top&&TweenMax.set(v,{scaleX:o})}y.length&&!isMobile.any&&(TweenMax.set(y.find("h1"),{y:"-"+n/4+"px"}),y.find(".img").length&&TweenMax.set(y.find(".img"),{y:"-"+n/40+"%"}),y.find(".menu-home").length&&TweenMax.set(y.find(".menu-home"),{y:"-"+n/4+"px"})),C.length&&u.length&&!isMobile.any&&i(n)}),$(window).on("resize",function(){l=$(document).height(),r=$(window).height(),d=$(window).width(),d>979&&g.removeClass("menu-open"),w.length&&y.length&&w.css("marginTop",y.innerHeight()),C.length&&(C.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),M=C.offset().top,b=C.innerWidth()),q.length&&t()})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var n=$("#main"),t=$("#contentHeader");if(t.length&&(n.length&&n.css("marginTop",t.innerHeight()),t.find("h1").length)){var i=new SplitText(t.find("h1"),{type:"words"});t.find("h1").css("opacity",1),e(i)}});
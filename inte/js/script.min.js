"use strict";$(function(){function e(e){var t=e>T?-1:1;return T=e,t}function t(e){var t=e.html();return'<span class="before">'+t+'</span><span class="after">'+t+"</span>"}function i(e){e.css("height",e.data("height")).removeClass("on")}function n(e,t){if(I.length&&D.length&&!y.hasClass("menu-open")&&(e>I.offset().top-q-40?O.addClass("fixed"):O.removeClass("fixed"),O.hasClass("fixed")&&(0>t?O.addClass("on"):O.removeClass("on"))),J.length&&e>80&&(t>0?J.addClass("on"):J.removeClass("on")),H.length&&(N.hasClass("single-post")||N.hasClass("page-template-default"))){var i=(e-I.offset().top)/(I.innerHeight()-u);e>I.offset().top&&TweenMax.set(H,{scaleX:i})}}function a(){function e(){var e=0,i=t.length,n=t.eq(0).innerWidth();for(e;i>e;e++){var a=t.eq(e).offset().left+n;a>b||n>a?t.eq(e).addClass("off"):t.eq(e).removeClass("off")}}var t=E.find(".spotlight-post"),i=E.find(".container").innerWidth();e(),i>b?F?F[0].enable():F=Draggable.create("#spotlightDrag",{type:"x",bounds:E,cursor:"grab",throwProps:!0,edgeResistance:.65,onDrag:e,onDragStart:function(){E.find(".container").addClass("grabbing")},onDragEnd:function(){E.find(".container").removeClass("grabbing")}}):F&&(F[0].disable(),TweenMax.set(F,{x:"0px"}))}function o(e){var t=20,i=S.innerHeight(),n=I.offset().top,a=I.innerHeight();a+2*t>i&&u>i+q+t?e>=P-q-t?(e+i+q+t>n+a-t?S.css({top:a-t-i+20,width:W}).removeClass("fixed").addClass("fixedBot"):S.css({top:q+t,width:W}).removeClass("fixedBot").addClass("fixed"),e>(a+n)/2?(S.find("li").eq(0).find(".img").addClass("off"),S.find("li").eq(1).find(".img").addClass("on")):(S.find("li").eq(0).find(".img").removeClass("off"),S.find("li").eq(1).find(".img").removeClass("on"))):S.css({top:0,width:W}).removeClass("fixed fixedBot"):S.css({top:0}).removeClass("fixed fixedBot")}function s(e){var t=e.length,i=0;for(TweenMax.set(e,{opacity:0}),i;t>i;i++)new ScrollMagic.Scene({triggerElement:e[i]}).triggerHook(.7).setTween(TweenMax.to(e.eq(i),.25,{opacity:1})).addTo(v)}function l(){TweenMax.set([z.find(".menu-title"),z.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(z.find("li"),{y:"-120%",opacity:0})}function d(e,t,i){function n(e){var t=X.find(".po-item:not(.transfered)"),i=X.find("li:not(.transfered)"),a=i.length,o=Math.floor(Math.random()*a);m.find("a").removeClass("on"),j=setTimeout(function(){X.find("div.grid").hasClass("is-hovered")||t.eq(e).hasClass("cta")||t.eq(e).find("a").addClass("on")},1500),G=setTimeout(n,3500,o)}var a='<div class="grid">',o=0,s=0,l=0,d=0,r=.1,p=.4,c,h=0,m,f=3,g;t>37&&(r+=.02,p-=.02),t>60&&(r+=.05,p-=.05);var w,u=Math.ceil(r*t),b=Math.ceil(p*t),x=t-(u+b),T=[u,Math.floor(b/2),Math.ceil(b/2),Math.ceil(x/3),Math.ceil(x/3),Math.floor(x/3)];if(clearTimeout(j),clearTimeout(G),K.length)for(l;l<K.length;l++)K[l].destroy(!0);for(3===i&&(T=[u+Math.floor(b/2),Math.ceil(b/2)+Math.ceil(x/3),Math.ceil(x/3)+Math.floor(x/3)],f=1),l=0;i>l;l++)s+=T[l];for(s>t&&(T[i-2]-=1),w=0,l=0;i>l;l++){for(a+='<div class="po-item-col col-2">',d=0,g=1===f?Math.floor(T[l]/2):T[l]-1,d;d<T[l];d++)l===f&&d===g&&(a+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),a+=$("ul.grid > li").eq(w).hasClass("transfered")?'<div class="po-item transfered">'+X.find("li").eq(d+o).html()+"</div>":'<div class="po-item">'+X.find("li").eq(d+o).html()+"</div>",w++;o+=d,a+="</div>"}for(a+="</div>",X.find(".container").append(a),TweenMax.set(X.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;t+1>l;l++)K[l]=new ScrollMagic.Scene({triggerElement:X.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(X.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(v);c=X.find("div.grid").find(".transfered"),h=c.length,m=X.find(".po-item"),n(0),m.find("a").on("mouseenter",function(){$(this).closest(".po-item").hasClass("cta")||($(this).closest(".po-item").addClass("link-hovered").closest(".grid").addClass("is-hovered"),m.find("a").removeClass("on"))}).on("mouseleave",function(){$(this).closest(".po-item").removeClass("link-hovered").closest(".grid").removeClass("is-hovered")})}function r(){if($(window).width()<=979){var e=$(".team > li").length,t=Q.offset().left-20,i=t+Q.width(),n=$(".container-team").width(),a=0,o=0;Q.find("li").hasClass("open")&&(a=Q.find("> li.open").position().left,o=Q.find("> li.open").offset().left),$(window).width()>767&&e>5?(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),t<-Math.ceil(2*V)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+2*V)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"})):$(window).width()<=767&&e>3&&(TweenMax.set($(".wrapper-btn-glob.prev"),{className:"-=open"}),TweenMax.set($(".wrapper-btn-glob.next"),{className:"-=open"}),t<-Math.ceil(V)&&TweenMax.set($(".wrapper-btn-glob.prev"),{className:"+=open"}),Math.ceil(i+V)>n&&TweenMax.set($(".wrapper-btn-glob.next"),{className:"+=open"}))}else TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function p(){TweenMax.set($(".wrapper-btn-glob"),{className:"-=open"})}function c(){$(window).width()<=979?(ee=Q.find(".team-member img").eq(0).outerHeight(),TweenMax.set($(".wrapper-btn-glob a"),{top:ee/2+"px"}),U?($(window).width()<=767?(V=$(".container-team").width()/3,Y=V):(V=$(".container-team").width()/5,Y=2*V),TweenMax.set($(".team > li"),{width:V+"px"}),Z=0,$(".team > li").each(function(){Z+=$(this).outerWidth()}),Z+=2*Y,TweenMax.set(Q,{width:Z+"px",padding:"0 "+Y+"px",x:-Y}),_=V,U=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/_)*_}},onDragStart:function(){p();var e=$(".team.member-open > li.open");fe=$(".desc",e),ge=new TimelineMax,$(window).width()>979?(ge.to(fe,.25,{opacity:0,visibility:"hidden"}),ge.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ge.to(Te,.25,{opacity:0}),ge.to(Te,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ge.set(e,{className:"-=open"}),ge.set(Q,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}})):($(window).width()<=767?(V=$(".container-team").width()/3,Y=V):(V=$(".container-team").width()/5,Y=2*V),TweenMax.set($(".team > li"),{width:V+"px"}),Z=0,$(".team > li").each(function(){Z+=$(this).outerWidth()}),Z+=2*Y,TweenMax.set(Q,{width:Z+"px",padding:"0 "+Y+"px",x:-Y}),_=V,U=Draggable.create(".team",{type:"x",bounds:$(".container-team"),cursor:"grab",throwProps:!0,edgeResistance:.65,dragClickables:!0,snap:{x:function(e){return Math.round(e/_)*_}},onDragStart:function(){p();var e=$(".team.member-open > li.open");fe=$(".desc",e),ge=new TimelineMax,$(window).width()>979?(ge.to(fe,.25,{opacity:0,visibility:"hidden"}),ge.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ge.to(Te,.25,{opacity:0}),ge.to(Te,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ge.set(e,{className:"-=open"}),ge.set(Q,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}}))):U&&(TweenMax.set($(".team"),{clearProps:"all"}),TweenMax.set($(".team > li"),{clearProps:"width"}),U[0].disable())}function h(e){if(ce=e.closest("li"),re=$(".desc",ce),pe=re.outerHeight(),!TweenMax.isTweening(Q.find("li"))&&!TweenMax.isTweening(Q.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob")))if(Q.hasClass("member-open"))if(ce.hasClass("open"))m();else{var t=$(".team.member-open > li.open");fe=$(".desc",t),ge=new TimelineMax,$(window).width()>979?(ie=t.offset().top<ce.offset().top?Q.offset().top+ce.position().top-parseFloat(t.css("paddingBottom"))-120:Q.offset().top+ce.position().top-120,ge.to(fe,.25,{opacity:0,visibility:"hidden"}),ge.set(t,{className:"-=open"}),ge.set(ce,{className:"+=open"}),ge.add("paddingAnimation").to(t,.5,{paddingBottom:"0",ease:Cubic.easeInOut},"paddingAnimation").to(ce,.25,{paddingBottom:pe+"px",ease:Cubic.easeIn},"paddingAnimation").to(window,.5,{scrollTo:{y:ie},ease:Cubic.easeOut},"paddingAnimation"),ge.to(re,.25,{opacity:1,visibility:"visible"})):(ie=ce.offset().top-120,ge.to(Te,.25,{opacity:0,visibility:"hidden"}),ge.set(t,{className:"-=open"}),ge.set(ce,{className:"+=open",onComplete:function(){Te.html(re.html()),TweenMax.set(Te,{height:"auto",position:"absolute"}),Me=Te.outerHeight(),TweenMax.set(Te,{height:"0",position:"relative"}),ge.add("heightAnimation").to(Te,.5,{height:Me+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ie},ease:Cubic.easeOut},"heightAnimation"),ge.to(Te,.25,{opacity:1,visibility:"visible"}),Ce=ce.position().left,ye=$(".container-team").width(),Ne=Ce-ye/2+ce.outerWidth()/2,TweenMax.to(Q,.5,{x:-Ne,ease:Cubic.easeOut,onComplete:r})}}))}else if(ie=ce.offset().top-120,TweenMax.set(Q,{className:"+=member-open"}),he=new TimelineMax,he.set(ce,{className:"+=open"}),r(),$(window).width()>979)he.add("paddingAnimation").to(ce,.5,{paddingBottom:pe+"px",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:ie},ease:Cubic.easeOut},"paddingAnimation"),he.to(re,.25,{opacity:1,visibility:"visible"});else{Te.html(re.html()),TweenMax.set(Te,{height:"auto",position:"absolute"}),Me=Te.outerHeight(),TweenMax.set(Te,{height:"0",position:"relative"}),he.add("heightAnimation").to(Te,.5,{height:Me+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ie},ease:Cubic.easeOut},"heightAnimation"),he.to(Te,.25,{opacity:1,visibility:"visible"});var i=Math.max.apply(null,Q.find(".team-member").map(function(){return $(this).height()}).get());TweenMax.to($(".wrapper-btn-glob"),.5,{height:i+10+"px",ease:Cubic.easeInOut}),Ce=ce.position().left,ye=$(".container-team").width(),Ne=Ce-ye/2+ce.outerWidth()/2,TweenMax.to(Q,.5,{x:-Ne,ease:Cubic.easeOut,onComplete:r})}}function m(){p();var e=$(".team.member-open > li.open");fe=$(".desc",e),ge=new TimelineMax,$(window).width()>979?(ge.to(fe,.25,{opacity:0,visibility:"hidden"}),ge.to(e,.5,{paddingBottom:"0",ease:Cubic.easeInOut})):(ge.to(Te,.25,{opacity:0}),ge.to(Te,.5,{height:"0",visibility:"hidden",ease:Cubic.easeInOut})),ge.set(e,{className:"-=open"}),ge.set(Q,{className:"-=member-open"}),TweenMax.to($(".wrapper-btn-glob"),.5,{height:"100%",ease:Cubic.easeInOut})}function f(){if(!TweenMax.isTweening(Q.find("li"))&&!TweenMax.isTweening(Q.find(".desc"))&&!TweenMax.isTweening($(".wrapper-btn-glob"))){var e=$(".team.member-open > li.open");fe=$(".desc",e),ge=new TimelineMax,ge.to(fe,.25,{opacity:0,visibility:"hidden"}),ge.set(e,{className:"-=open"}),we=$(this).hasClass("left")?e.prev().length?e.prev():Q.find("> li").last():e.next().length?e.next():Q.find("> li").first(),ie=e.offset().top<we.offset().top?Q.offset().top+we.position().top-parseFloat(e.css("paddingBottom"))-120:we.offset().top-120,ue=$(".desc",we),be=ue.outerHeight(),ge.set(we,{className:"+=open"}),ge.add("paddingAnimation").to(we,.25,{paddingBottom:be+"px",ease:Cubic.easeIn},"paddingAnimation").to(e,.5,{paddingBottom:"0",ease:Cubic.easeOut},"paddingAnimation").to(window,.5,{scrollTo:{y:ie},ease:Cubic.easeOut},"paddingAnimation"),ge.to(ue,.25,{opacity:1,visibility:"visible"})}}function g(e){if(!(TweenMax.isTweening(Q.find("li"))||TweenMax.isTweening(Q.find(".desc"))||TweenMax.isTweening($(".wrapper-btn-glob"))||TweenMax.isTweening(Q)))if(r(),e.closest(".wrapper-btn-glob").hasClass("open")&&(e.hasClass("left")?TweenMax.to(Q,.25,{x:"+="+V,ease:Cubic.easeInOut}):TweenMax.to(Q,.25,{x:"-="+V,ease:Cubic.easeInOut})),$(window).width()<=979&&Q.hasClass("member-open")&&e.closest(".wrapper-btn-glob").hasClass("open")){var t=$(".team.member-open > li.open");fe=$(".desc",t),ge=new TimelineMax,ge.to(Te,.25,{opacity:0,visibility:"hidden"}),ge.set(t,{className:"-=open"}),we=e.hasClass("left")?t.prev():t.next(),ie=we.offset().top-120,ue=$(".desc",we),ge.set(we,{className:"+=open",onComplete:function(){Te.html(re.html()),TweenMax.set(Te,{height:"auto",position:"absolute"}),Me=Te.outerHeight(),TweenMax.set(Te,{height:"0",position:"relative"}),ge.add("heightAnimation").to(Te,.5,{height:Me+"px",ease:Cubic.easeInOut},"heightAnimation").to(window,.5,{scrollTo:{y:ie},ease:Cubic.easeOut},"heightAnimation"),ge.to(Te,.25,{opacity:1,visibility:"visible",onComplete:r})}})}else p()}var w=$(document).height(),u=$(window).height(),b=$(window).width(),x=b,v=new ScrollMagic.Controller,T=0,M=$(document).scrollTop(),C=0,y=$("html"),N=$("body"),O=$("#header"),q=O.innerHeight(),I=$("#mainContent"),A=$("#main"),H=$("#readIndicator"),B=$(".btn"),k=$(".btn-invert"),D=$("#contentHeader"),S=$("#postSidebar"),P=0,W=0,E=$("#spotlightPost"),F=!1,R=$("#related"),z=$("#menu-responsive"),X=$("#portfolio"),j,G,J=$("#portfolioFilters"),K=[],L=$(".dropdown"),Q=$(".team"),U=!1,V,Y,Z,_,ee,te,ie;if(isMobile.any?y.addClass("is-mobile"):y.addClass("is-desktop"),n(M,C),B.length&&B.each(function(e){B.eq(e).html(t(B.eq(e)))}),k.length&&k.each(function(e){k.eq(e).html(t(k.eq(e)))}),I.length&&I.find("img").length){var ne=I.find("img").not(".no-scroll");s(ne)}if(S.length&&(P=S.offset().top,W=S.innerWidth()),E.length&&(a(),TweenMax.set(E.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(E.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(v)),R.length){var ae=R.find(".read-also-post");TweenMax.set(ae,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(ae,.25,{opacity:1},.1)).addTo(v)}if(X.length){var oe=X.find("li"),se=oe.length,le=b>767?6:3;se>le&&d(oe,se,le)}if(Q.length){var de=Q.find(".team-member"),re,pe,ce,he,me,fe,ge,we,ue,be,xe,$e,ve,Te=$(".content-desc-responsive"),Me,Ce,ye,Ne;c(),r(),de.on("click",function(e){e.preventDefault(),h($(this))}),$(".btn-desc > li a").on("click",function(e){e.preventDefault(),f()}),$(".container-team .wrapper-btn-glob a").on("click",function(e){e.preventDefault(),g($(this))}),$(".container-team").on("click",".btn-cross",function(e){e.preventDefault(),m()})}z.length&&l(),L.on("click",function(e){var t=$(this),n=2,a=L.not(t);t.hasClass("on")?i(t):(t.data("height",t.css("height")).find("li").each(function(){n+=$(this).outerHeight()}),t.css("height",n).addClass("on")),a.each(function(){i($(this))})}),$("#burger").on("click",function(e){e.preventDefault(),y.toggleClass("menu-open"),y.hasClass("menu-open")?setTimeout(function(){var e=0,t=z.find(".menu-small").length;for(e;t>e;e++)TweenMax.to(z.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(z.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(z.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):l()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var t=$(document).scrollTop(),a=e(t);n(t,a),D.length&&!isMobile.any&&(t>20?TweenMax.to(D.find("h1"),.2,{y:"-50px",opacity:0}):TweenMax.to(D.find("h1"),.2,{y:"0px",opacity:1}),D.find(".img").length&&TweenMax.set(D.find(".img"),{y:"-"+t/40+"%"}),D.find(".menu-home").length&&TweenMax.set(D.find(".menu-home"),{y:"-"+t/4+"px"})),S.length&&I.length&&!isMobile.any&&o(t),L.length&&L.each(function(){i($(this))})}),$(window).on("resize",function(){if(w=$(document).height(),u=$(window).height(),b=$(window).width(),b>979&&y.removeClass("menu-open"),A.length&&D.length&&A.css("marginTop",Math.floor(D.outerHeight())),S.length&&(S.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),P=S.offset().top,W=S.innerWidth()),E.length&&a(),X.length){var e=b>767?6:3;e!==le&&X.find("div.grid")&&(X.find("div.grid").remove(),le=e,d(oe,se,le))}Q.length&&(Q.hasClass("member-open")&&(xe=$(".team.member-open > li.open"),$e=$(".desc",xe),ve=$e.outerHeight(),TweenMax.set(xe,{paddingBottom:ve+"px",ease:Cubic.easeInOut})),c(),r()),x!=b&&Q.length&&Q.hasClass("member-open")&&(TweenMax.set($(".team.member-open > li.open .desc"),{clearProps:"all"}),TweenMax.set($(".team.member-open > li.open"),{className:"-=open",clearProps:"all"}),TweenMax.set($(".content-desc-responsive"),{clearProps:"all"}),TweenMax.set(Q,{className:"-=member-open"}))})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var t=$("#main"),i=$("#contentHeader"),n=$(".team");if(i.length){if(i.find("h1").length){var a=new SplitText(i.find("h1"),{type:"words"});i.find("h1").css("opacity",1),e(a)}t.length&&t.css("marginTop",Math.floor(i.outerHeight()))}});
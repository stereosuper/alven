$(function(){function e(){o=s>a?-1:1,a=s}function n(e){var n=0,t=e.length,i=[],s="",o=0,a=0,d="",l=0;for(n;t>n;n++){for(s=e.eq(n).html(),i=s.split(""),o=0,a=i.length,d="",l=0,o;a>o;o++)l+=.013,l=Math.round(1e3*l)/1e3," "===i[o]&&(i[o]="&nbsp;"),d+='<span style="transition-delay:'+l+'s">'+i[o]+"</span>";e.eq(n).html('<span class="bg"></span><span class="before">'+d+'</span><span class="after">'+d+"</span>")}}function t(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}function i(){var e=20,n=C.innerHeight(),t=f.offset().top,i=f.innerHeight();i+2*e>n&&g>n+l+e&&s>=u-l-e?(s+n+l+e>t+i-e?C.css({top:i-e-n+20}).removeClass("fixed").addClass("fixedBot"):C.css({top:l+e,width:C.innerWidth()}).removeClass("fixedBot").addClass("fixed"),s>(i+t)/2?(C.find("li").eq(0).find(".img").addClass("off"),C.find("li").eq(1).find(".img").addClass("on")):(C.find("li").eq(0).find(".img").removeClass("off"),C.find("li").eq(1).find(".img").removeClass("on"))):C.css({top:0}).removeClass("fixed fixedBot")}var s=0,o=0,a=0,d=$("#header"),l=d.innerHeight(),f=$("#mainContent"),h=$("#readIndicator"),r=$(document).height(),g=$(window).height(),c=$(".btn"),p=$(".btn-invert"),m=$("#main"),w=$("#contentHeader"),C=$("#postSidebar"),u=0;c.length&&n(c),p.length&&n(p),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(s=$(document).scrollTop(),e(),f.length&&(s>f.offset().top-l-40?d.addClass("fixed"):d.removeClass("fixed"),d.hasClass("fixed")&&(0>o?d.addClass("on"):d.removeClass("on"))),h.length){var n=(s-f.offset().top)/(f.innerHeight()-g);s>f.offset().top&&TweenMax.set(h,{scaleX:n})}w.length&&w.find(".img").length&&(TweenMax.set(w.find(".img"),{y:"-"+s/40+"%"}),TweenMax.set(w.find("h1"),{y:"-"+s/4+"%"})),C.length&&f.length&&i()}),$(window).resize(function(){r=$(document).height(),g=$(window).height(),m.length&&w.length&&m.css("marginTop",w.innerHeight()),C.length&&C.css({top:0,width:"20%"}).removeClass("fixed fixedBot")}),$(window).load(function(){if(r=$(document).height(),w.length&&(m.length&&m.css("marginTop",w.innerHeight()),w.find("h1").length)){var e=new SplitText(w.find("h1"),{type:"words"});w.find("h1").css("opacity",1),t(e)}C.length&&(u=C.offset().top)})});
$(function(){function e(){d=a>l?-1:1,l=a}function n(e){var n=0,i=e.length,t=[],s="",o=0,a=0,d="",l=0;for(n;i>n;n++){for(s=e.eq(n).html(),t=s.split(""),o=0,a=t.length,d="",l=0,o;a>o;o++)l+=.013,l=Math.round(1e3*l)/1e3," "===t[o]&&(t[o]="&nbsp;"),d+='<span style="transition-delay:'+l+'s">'+t[o]+"</span>";e.eq(n).html('<span class="bg"></span><span class="before">'+d+'</span><span class="after">'+d+"</span>")}}function i(){function e(){var e=0,i=n.length,t=n.eq(0).innerWidth();for(e;i>e;e++){var s=n.eq(e).offset().left+t;s>m||t>s?n.eq(e).addClass("off"):n.eq(e).removeClass("off")}}var n=q.find(".spotlight-post"),i=q.find(".container").innerWidth();e(),i>m?M?M[0].enable():M=Draggable.create("#spotlightDrag",{type:"x",bounds:q,cursor:"grab",onDrag:e,onDragStart:function(){q.find(".container").addClass("grabbing")},onDragEnd:function(){q.find(".container").removeClass("grabbing")}}):M&&M[0].disable()}function t(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}function s(){var e=20,n=x.innerHeight(),i=h.offset().top,t=h.innerHeight();t+2*e>n&&p>n+r+e?a>=b-r-e?(a+n+r+e>i+t-e?x.css({top:t-e-n+20,width:y}).removeClass("fixed").addClass("fixedBot"):x.css({top:r+e,width:y}).removeClass("fixedBot").addClass("fixed"),a>(t+i)/2?(x.find("li").eq(0).find(".img").addClass("off"),x.find("li").eq(1).find(".img").addClass("on")):(x.find("li").eq(0).find(".img").removeClass("off"),x.find("li").eq(1).find(".img").removeClass("on"))):x.css({top:0,width:y}).removeClass("fixed fixedBot"):x.css({top:0}).removeClass("fixed fixedBot")}var o=$("html"),a=0,d=0,l=0,f=$("#header"),r=f.innerHeight(),h=$("#mainContent"),g=$("#readIndicator"),c=$(document).height(),p=$(window).height(),m=$(window).width(),w=$(".btn"),C=$(".btn-invert"),u=$("#main"),v=$("#contentHeader"),x=$("#postSidebar"),b=0,y=0,q=$("#spotlightPost"),M=!1;isMobile.any?o.addClass("is-mobile"):o.addClass("is-desktop"),w.length&&n(w),C.length&&n(C),q.length&&i(),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(a=$(document).scrollTop(),e(),h.length&&(a>h.offset().top-r-40?f.addClass("fixed"):f.removeClass("fixed"),f.hasClass("fixed")&&(0>d?f.addClass("on"):f.removeClass("on"))),g.length){var n=(a-h.offset().top)/(h.innerHeight()-p);a>h.offset().top&&TweenMax.set(g,{scaleX:n})}v.length&&!isMobile.any&&v.find(".img").length&&(TweenMax.set(v.find(".img"),{y:"-"+a/40+"%"}),TweenMax.set(v.find("h1"),{y:"-"+a/4+"%"})),x.length&&h.length&&!isMobile.any&&s()}),$(window).resize(function(){c=$(document).height(),p=$(window).height(),m=$(window).width(),u.length&&v.length&&u.css("marginTop",v.innerHeight()),x.length&&(x.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),y=x.innerWidth()-1),q.length&&i()}),$(window).load(function(){if(c=$(document).height(),v.length&&(u.length&&u.css("marginTop",v.innerHeight()),v.find("h1").length)){var e=new SplitText(v.find("h1"),{type:"words"});v.find("h1").css("opacity",1),t(e)}x.length&&(b=x.offset().top,y=x.innerWidth()-1)})});
$(function(){function e(){i=s>o?-1:1,o=s}function n(e){var n=0,t=e.length,s=[],i="",o=0,a=0,d="",l=0;for(n;t>n;n++){for(i=e.eq(n).html(),s=i.split(""),o=0,a=s.length,d="",l=0,o;a>o;o++)l+=.013,l=Math.round(1e3*l)/1e3," "===s[o]&&(s[o]="&nbsp;"),d+='<span style="transition-delay:'+l+'s">'+s[o]+"</span>";e.eq(n).html('<span class="bg"></span><span class="before">'+d+'</span><span class="after">'+d+"</span>")}}function t(){var e=20,n=C.innerHeight(),t=l.offset().top,i=l.innerHeight();i+2*e>n&&r>n+d+e&&s>=u-d-e?(s+n+d+e>t+i-e?C.css({top:i-e-n+20}).removeClass("fixed").addClass("fixedBot"):C.css({top:d+e,width:C.innerWidth()}).removeClass("fixedBot").addClass("fixed"),s>(i+t)/2?(C.find("li").eq(0).find(".img").addClass("off"),C.find("li").eq(1).find(".img").addClass("on")):(C.find("li").eq(0).find(".img").removeClass("off"),C.find("li").eq(1).find(".img").removeClass("on"))):C.css({top:0}).removeClass("fixed fixedBot")}var s=0,i=0,o=0,a=$("#header"),d=a.innerHeight(),l=$("#mainContent"),f=$("#readIndicator"),h=$(document).height(),r=$(window).height(),g=$(".btn"),c=$(".btn-invert"),m=$("#main"),p=$("#contentHeader"),C=$("#postSidebar"),u=0;g.length&&n(g),c.length&&n(c),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(s=$(document).scrollTop(),e(),l.length&&(s>l.offset().top-d-40?a.addClass("fixed"):a.removeClass("fixed"),a.hasClass("fixed")&&(0>i?a.addClass("on"):a.removeClass("on"))),f.length){var n=(s-l.offset().top)/(l.innerHeight()-r);s>l.offset().top&&TweenMax.set(f,{scaleX:n})}C.length&&l.length&&t()}),$(window).resize(function(){h=$(document).height(),r=$(window).height(),m.length&&p.length&&m.css("marginTop",p.innerHeight()),C.length&&C.css({top:0,width:"20%"}).removeClass("fixed fixedBot")}),$(window).load(function(){h=$(document).height(),m.length&&p.length&&m.css("marginTop",p.innerHeight()),C.length&&(u=C.offset().top)})});
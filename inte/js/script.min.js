"use strict";$(function(){function e(e){var n=e>g?-1:1;return g=e,n}function n(e){var n=e.html();return'<span class="before">'+n+'</span><span class="after">'+n+"</span>"}function t(e,n){if(x.length&&!p.hasClass("menu-open")&&(e>x.offset().top-v-40?w.addClass("fixed"):w.removeClass("fixed"),w.hasClass("fixed")&&(0>n?w.addClass("on"):w.removeClass("on"))),T.length&&(u.hasClass("single-post")||u.hasClass("page-template-default"))){var t=(e-x.offset().top)/(x.innerHeight()-r);e>x.offset().top&&TweenMax.set(T,{scaleX:t})}}function i(){function e(){var e=0,t=n.length,i=n.eq(0).innerWidth();for(e;t>e;e++){var o=n.eq(e).offset().left+i;o>f||i>o?n.eq(e).addClass("off"):n.eq(e).removeClass("off")}}var n=k.find(".spotlight-post"),t=k.find(".container").innerWidth();e(),t>f?D?D[0].enable():D=Draggable.create("#spotlightDrag",{type:"x",bounds:k,cursor:"grab",onDrag:e,onDragStart:function(){k.find(".container").addClass("grabbing")},onDragEnd:function(){k.find(".container").removeClass("grabbing")}}):D&&(D[0].disable(),TweenMax.set(D,{x:"0px"}))}function o(e){var n=20,t=q.innerHeight(),i=x.offset().top,o=x.innerHeight();o+2*n>t&&r>t+v+n?e>=H-v-n?(e+t+v+n>i+o-n?q.css({top:o-n-t+20,width:S}).removeClass("fixed").addClass("fixedBot"):q.css({top:v+n,width:S}).removeClass("fixedBot").addClass("fixed"),e>(o+i)/2?(q.find("li").eq(0).find(".img").addClass("off"),q.find("li").eq(1).find(".img").addClass("on")):(q.find("li").eq(0).find(".img").removeClass("off"),q.find("li").eq(1).find(".img").removeClass("on"))):q.css({top:0,width:S}).removeClass("fixed fixedBot"):q.css({top:0}).removeClass("fixed fixedBot")}function a(e){var n=e.length,t=0;for(TweenMax.set(e,{opacity:0}),t;n>t;t++)new ScrollMagic.Scene({triggerElement:e[t]}).triggerHook(.7).setTween(TweenMax.to(e.eq(t),.25,{opacity:1})).addTo(c)}function s(){TweenMax.set([E.find(".menu-title"),E.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(E.find("li"),{y:"-120%",opacity:0})}function l(e,n,t){function i(e){var t=Math.floor(Math.random()*n);$("a",m).removeClass("on"),setTimeout(function(){var n=m.eq(e);$("a",n).addClass("on")},1500),setTimeout(i,3500,t)}var o='<div class="grid">',a=0,s=0,l=0,d=0,r=.1,f=.4,g,h=0,m;n>37&&(r+=.02,f-=.02),n>60&&(r+=.05,f-=.05);var p=Math.ceil(r*n),u=Math.ceil(f*n),w=n-(p+u),v=[p,Math.floor(u/2),Math.ceil(u/2),Math.ceil(w/3),Math.ceil(w/3),Math.floor(w/3)];for(l;t>l;l++)s+=v[l];for(s>n&&(v[4]-=1),l=0;t>l;l++){for(o+='<div class="po-item-col col-2">',d=0;d<v[l];d++)3===l&&d===v[l]-1&&(o+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),o+='<div class="po-item">'+W.find("li").eq(d+a).html()+"</div>";a+=d,o+="</div>"}for(o+="</div>",W.find(".container").append(o),TweenMax.set(W.find(".po-item"),{opacity:0,y:"30%",scale:.8}),l=0;n+1>l;l++)new ScrollMagic.Scene({triggerElement:W.find(".po-item")[l]}).triggerHook(.9).setTween(TweenMax.to(W.find(".po-item").eq(l),.25,{opacity:1,y:"0%",scale:1})).addTo(c);g=W.find("div.grid").find(".transfered"),h=g.length,m=W.find(".po-item"),i(0)}var d=$(document).height(),r=$(window).height(),f=$(window).width(),c=new ScrollMagic.Controller,g=0,h=$(document).scrollTop(),m=0,p=$("html"),u=$("body"),w=$("#header"),v=w.innerHeight(),x=$("#mainContent"),M=$("#main"),T=$("#readIndicator"),C=$(".btn"),y=$(".btn-invert"),b=$("#contentHeader"),q=$("#postSidebar"),H=0,S=0,k=$("#spotlightPost"),D=!1,B=$("#related"),E=$("#menu-responsive"),W=$("#portfolio"),P=$(".team");if(isMobile.any?p.addClass("is-mobile"):p.addClass("is-desktop"),t(h,m),C.length&&C.each(function(e){C.eq(e).html(n(C.eq(e)))}),y.length&&y.each(function(e){y.eq(e).html(n(y.eq(e)))}),x.length&&x.find("img").length){var I=x.find("img").not(".no-scroll");a(I)}if(q.length&&(H=q.offset().top,S=q.innerWidth()),k.length&&(i(),TweenMax.set(k.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(k.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(c)),B.length){var N=B.find(".read-also-post");TweenMax.set(N,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(N,.25,{opacity:1},.1)).addTo(c)}if(W.length){var z=W.find("li"),F=z.length,O=6;F>O&&l(z,F,O)}if(P.length){var X=P.find(".team-member");X.on("click",function(e){e.preventDefault();var n,t,i,o;i=$(this).closest("li"),n=$(".desc",i),t=n.outerHeight(),P.hasClass("member-open")?i.hasClass("open"):TweenMax.set(P,{className:"+=member-open"}),o=new TimelineMax,TweenMax.set(i,{className:"+=open"}),o.to(i,.25,{paddingBottom:t+"px"}),o.to(n,.25,{opacity:1})})}E.length&&s(),$("#burger").on("click",function(e){e.preventDefault(),p.toggleClass("menu-open"),p.hasClass("menu-open")?setTimeout(function(){var e=0,n=E.find(".menu-small").length;for(e;n>e;e++)TweenMax.to(E.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(E.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(E.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):s()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){var n=$(document).scrollTop(),i=e(n);t(n,i),b.length&&!isMobile.any&&(TweenMax.set(b.find("h1"),{y:"-"+n/4+"px"}),b.find(".img").length&&TweenMax.set(b.find(".img"),{y:"-"+n/40+"%"}),b.find(".menu-home").length&&TweenMax.set(b.find(".menu-home"),{y:"-"+n/4+"px"})),q.length&&x.length&&!isMobile.any&&o(n)}),$(window).on("resize",function(){d=$(document).height(),r=$(window).height(),f=$(window).width(),f>979&&p.removeClass("menu-open"),M.length&&b.length&&M.css("marginTop",Math.floor(b.innerHeight())),q.length&&(q.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),H=q.offset().top,S=q.innerWidth()),k.length&&i()})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var n=$("#main"),t=$("#contentHeader");if(t.length&&(n.length&&n.css("marginTop",Math.floor(t.innerHeight())),t.find("h1").length)){var i=new SplitText(t.find("h1"),{type:"words"});t.find("h1").css("opacity",1),e(i)}});
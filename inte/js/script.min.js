$(function(){function e(){t=s>o?-1:o>s?1:0,o=s}function n(){var e=0,n=g.length,i=[],s="",t=0,o=0,a="",d=0;for(e;n>e;e++){for(s=g.eq(e).html(),i=s.split(""),t=0,o=i.length,a="",d=0,t;o>t;t++)d+=.014,d=Math.round(1e3*d)/1e3," "===i[t]&&(i[t]="&nbsp;"),a+='<span style="transition-delay:'+d+'s">'+i[t]+"</span>";g.eq(e).html('<span class="before">'+a+'</span><span class="after">'+s+"</span>")}}function i(){var e=20,n=p.innerHeight(),i=l.offset().top,t=l.innerHeight();t+2*e>n&&r>n+d+e&&s>=C-d-e?(s+n+d+e>i+t-e?p.css({top:t-e-n+20}).removeClass("fixed").addClass("fixedBot"):p.css({top:d+e,width:p.innerWidth()}).removeClass("fixedBot").addClass("fixed"),s>(t+i)/2?(p.find("li").eq(0).find(".img").addClass("off"),p.find("li").eq(1).find(".img").addClass("on")):(p.find("li").eq(0).find(".img").removeClass("off"),p.find("li").eq(1).find(".img").removeClass("on"))):p.css({top:0}).removeClass("fixed fixedBot")}var s=0,t=0,o=0,a=$("#header"),d=a.innerHeight(),l=$("#mainContent"),f=$("#readIndicator"),h=$(document).height(),r=$(window).height(),g=$(".btn"),c=$("#main"),m=$("#contentHeader"),p=$("#postSidebar"),C=0;g.length&&n(),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).scroll(function(){if(s=$(document).scrollTop(),e(),l.length&&(s>l.offset().top-d-40?a.addClass("fixed"):a.removeClass("fixed"),a.hasClass("fixed")&&(0>t?a.addClass("on"):a.removeClass("on"))),f.length){var n=s/(h-r);TweenMax.set(f,{scaleX:n})}p.length&&l.length&&i()}),$(window).resize(function(){h=$(document).height(),r=$(window).height(),c.length&&m.length&&c.css("marginTop",m.innerHeight())}),$(window).load(function(){h=$(document).height(),c.length&&m.length&&c.css("marginTop",m.innerHeight()),p.length&&(C=p.offset().top)})});
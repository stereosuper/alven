"use strict";$(function(){function e(){g=c>h?-1:1,h=c}function n(e){var n=0,t=[],i=[],o=[],a=[],s=[],l=[],d=e.length,r;for(n;d>n;n++)r=e.eq(n).html(),e.eq(n).html('<span class="bg"></span><span class="before">'+r+'</span><span class="after">'+r+"</span>"),t[n]=new TimelineMax,o[n]=new SplitText($(".before",e.eq(n)),{type:"words,chars"}),s[n]=o[n].chars,i[n]=new TimelineMax,a[n]=new SplitText($(".after",e.eq(n)),{type:"words,chars"}),l[n]=a[n].chars,TweenMax.set(l[n],{y:40,opacity:0});e.hover(function(){var n=e.index(this);t[n].staggerTo(s[n],.2,{y:-40,opacity:0,ease:Cubic.easeIn},.013),i[n].staggerTo(l[n],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeIn},.013)},function(){var n=e.index(this);t[n].staggerTo(s[n],.2,{y:0,opacity:1,delay:.1,ease:Cubic.easeOut},.013),i[n].staggerTo(l[n],.2,{y:40,opacity:0,ease:Cubic.easeIn},.013)})}function t(){function e(){var e=0,t=n.length,i=n.eq(0).innerWidth();for(e;t>e;e++){var o=n.eq(e).offset().left+i;o>r||i>o?n.eq(e).addClass("off"):n.eq(e).removeClass("off")}}var n=H.find(".spotlight-post"),t=H.find(".container").innerWidth();e(),t>r?k?k[0].enable():k=Draggable.create("#spotlightDrag",{type:"x",bounds:H,cursor:"grab",onDrag:e,onDragStart:function(){H.find(".container").addClass("grabbing")},onDragEnd:function(){H.find(".container").removeClass("grabbing")}}):k&&(k[0].disable(),TweenMax.set(k,{x:"0px"}))}function i(){var e=20,n=b.innerHeight(),t=v.offset().top,i=v.innerHeight();i+2*e>n&&d>n+w+e?c>=q-w-e?(c+n+w+e>t+i-e?b.css({top:i-e-n+20,width:S}).removeClass("fixed").addClass("fixedBot"):b.css({top:w+e,width:S}).removeClass("fixedBot").addClass("fixed"),c>(i+t)/2?(b.find("li").eq(0).find(".img").addClass("off"),b.find("li").eq(1).find(".img").addClass("on")):(b.find("li").eq(0).find(".img").removeClass("off"),b.find("li").eq(1).find(".img").removeClass("on"))):b.css({top:0,width:S}).removeClass("fixed fixedBot"):b.css({top:0}).removeClass("fixed fixedBot")}function o(e){var n=e.length,t=0;for(TweenMax.set(e,{opacity:0}),t;n>t;t++)new ScrollMagic.Scene({triggerElement:e[t]}).triggerHook(.7).setTween(TweenMax.to(e.eq(t),.25,{opacity:1})).addTo(f)}function a(){TweenMax.set([B.find(".menu-title"),B.find(".menu-subtitle")],{y:"-100%",opacity:0}),TweenMax.set(B.find("li"),{y:"-120%",opacity:0})}function s(e,n,t){function i(e){e===p&&(e=0),h.removeClass("on"),setTimeout(function(){h.eq(e).addClass("on")},1500),setTimeout(i,3500,e+1)}function o(e){$("a",m).removeClass("on"),setTimeout(function(){var n=m.eq(e);$("a",n).addClass("on")},1500);var t=Math.floor(Math.random()*n);setTimeout(o,3500,t)}var a='<div class="grid">',s=0,l=0,d=0,r=0,c=.1,g=.4,h,p=0,m;n>37&&(c+=.02,g-=.02),n>60&&(c+=.05,g-=.05);var u=Math.ceil(c*n),w=Math.ceil(g*n),v=n-(u+w),T=[u,Math.floor(w/2),Math.ceil(w/2),Math.ceil(v/3),Math.ceil(v/3),Math.floor(v/3)];for(d;t>d;d++)l+=T[d];for(l>n&&(T[4]-=1),d=0;t>d;d++){for(a+='<div class="po-item-col col-2">',r=0;r<T[d];r++)3===d&&r===T[d]-1&&(a+='<div class="po-item cta">'+$("#ctaPortfolio").html()+"</div>"),a+='<div class="po-item">'+E.find("li").eq(r+s).html()+"</div>";s+=r,a+="</div>"}for(a+="</div>",E.find(".container").append(a),TweenMax.set(E.find(".po-item"),{opacity:0,y:"30%",scale:.8}),d=0;n+1>d;d++)new ScrollMagic.Scene({triggerElement:E.find(".po-item")[d]}).triggerHook(.9).setTween(TweenMax.to(E.find(".po-item").eq(d),.25,{opacity:1,y:"0%",scale:1})).addTo(f);h=E.find("div.grid").find(".transfered"),p=h.length,m=E.find(".po-item"),o(0)}var l=$(document).height(),d=$(window).height(),r=$(window).width(),f=new ScrollMagic.Controller,c=0,g=0,h=0,p=$("html"),m=$("body"),u=$("#header"),w=u.innerHeight(),v=$("#mainContent"),T=$("#main"),x=$("#readIndicator"),y=$(".btn"),C=$(".btn-invert"),M=$("#contentHeader"),b=$("#postSidebar"),q=0,S=0,H=$("#spotlightPost"),k=!1,D=$("#related"),B=$("#menu-responsive"),E=$("#portfolio"),I=$(".team");if(isMobile.any?p.addClass("is-mobile"):p.addClass("is-desktop"),y.length&&(n(y),o(y)),C.length&&(n(C),o(C)),H.length&&(t(),TweenMax.set(H.find(".spotlight-post"),{y:"-120%"}),new ScrollMagic.Scene({triggerElement:"#spotlightPost"}).triggerHook(.9).setTween(TweenMax.staggerTo(H.find(".spotlight-post"),.25,{y:"0%"},.1)).addTo(f)),D.length){var W=D.find(".read-also-post");TweenMax.set(W,{opacity:0}),new ScrollMagic.Scene({triggerElement:"#related"}).triggerHook(.7).setTween(TweenMax.staggerTo(W,.25,{opacity:1},.1)).addTo(f)}if(v.length&&v.find("img").length){var P=v.find("img").not(".no-scroll");o(P)}if(E.length){var N=E.find("li"),O=N.length,z=6;O>z&&s(N,O,z)}if(I.length){var F=I.find(".team-member");F.on("click",function(e){e.preventDefault();var n,t,i,o;i=$(this).closest("li"),n=$(".desc",i),t=n.outerHeight(),I.hasClass("member-open")?i.hasClass("open"):TweenMax.set(I,{className:"+=member-open"}),o=new TimelineMax,TweenMax.set(i,{className:"+=open"}),o.to(i,.25,{paddingBottom:t+"px"}),o.to(n,.25,{opacity:1})})}B.length&&a(),$("#burger").on("click",function(e){e.preventDefault(),p.toggleClass("menu-open"),p.hasClass("menu-open")?setTimeout(function(){var e=0,n=B.find(".menu-small").length;for(e;n>e;e++)TweenMax.to(B.find(".menu-title").eq(e),.25,{y:"0%",opacity:1}),TweenMax.to(B.find(".menu-subtitle").eq(e),.25,{y:"0%",opacity:1}).delay(.05),TweenMax.staggerTo(B.find(".menu-small").eq(e).find("li"),.25,{y:"0%",opacity:1},.08)},380):a()}),$("input").on("change",function(){$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")}),$(document).on("scroll",function(){if(c=$(document).scrollTop(),e(),v.length&&!p.hasClass("menu-open")&&(c>v.offset().top-w-40?u.addClass("fixed"):u.removeClass("fixed"),u.hasClass("fixed")&&(0>g?u.addClass("on"):u.removeClass("on"))),x.length&&(m.hasClass("single")||m.hasClass("page-template-default"))){var n=(c-v.offset().top)/(v.innerHeight()-d);c>v.offset().top&&TweenMax.set(x,{scaleX:n})}M.length&&!isMobile.any&&(TweenMax.set(M.find("h1"),{y:"-"+c/4+"px"}),M.find(".img").length&&TweenMax.set(M.find(".img"),{y:"-"+c/40+"%"}),M.find(".menu-home").length&&TweenMax.set(M.find(".menu-home"),{y:"-"+c/4+"px"})),b.length&&v.length&&!isMobile.any&&i()}),$(window).on("resize",function(){l=$(document).height(),d=$(window).height(),r=$(window).width(),r>979&&p.removeClass("menu-open"),T.length&&M.length&&T.css("marginTop",M.innerHeight()),b.length&&(b.css({top:0,width:"20%"}).removeClass("fixed fixedBot"),q=b.offset().top,S=b.innerWidth()-1),H.length&&t()})}),$(window).on("load",function(){function e(e){e.split({type:"words"}),TweenMax.staggerFrom(e.words,.3,{ease:Expo.easeInOut,opacity:0,y:100},.03)}var n=$(document).height(),t=$("#mainContent"),i=$("#main"),o=$("#contentHeader"),a=$("#postSidebar"),s=0,l=0;if(o.length&&(i.length&&i.css("marginTop",o.innerHeight()),o.find("h1").length)){var d=new SplitText(o.find("h1"),{type:"words"});o.find("h1").css("opacity",1),e(d)}a.length&&(s=a.offset().top,l=a.innerWidth()-1)});
{"version":3,"sources":["webpack:///./wp-content/themes/alven/src/js/components/startup.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACsB;;AAEM;AAC4B;;AAExD,yCAAI,gBAAgB,qEAAc;;AAEF;AACU;;AAE1C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,QAAQ,yCAAI;AACZ;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,yCAAI,aAAa,sCAAsC;AAC/D,2BAA2B,WAAW;;AAEtC;;AAEA,QAAQ,wDAAO;AACf;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA,IAAI,+DAAO;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEe,sEAAO,EAAC","file":"startup.js","sourcesContent":["//fetch polyfill\nimport 'whatwg-fetch';\n\nimport { gsap } from 'gsap';\nimport { ScrollToPlugin } from 'gsap/ScrollToPlugin.js';\n\ngsap.registerPlugin(ScrollToPlugin);\n\nimport gallery from './gallery';\nimport { forEach } from '@stereorepo/sac';\n\nconst startup = () => {\n    const portfolio = document.getElementById('portfolio');\n\n    if (!portfolio) return;\n\n    const wrapper = document.getElementById('startup');\n    const links = portfolio.querySelectorAll('.ajax-load');\n\n    const closeStartup = () => {\n        gsap.to(wrapper, 0.5, {\n            height: 0,\n            onComplete: () => {\n                wrapper.innerHTML = '';\n                wrapper.style.height = '';\n            }\n        });\n\n        history.pushState(\n            {\n                id: 'portfolio'\n            },\n            '',\n            window.location.origin + window.location.pathname\n        );\n    };\n\n    const openStartup = (html, href, name) => {\n        wrapper.innerHTML = html;\n        gsap.to(window, { duration: 0.8, scrollTo: '#startup' });\n        history.pushState({ id: name }, '', href);\n\n        wrapper.querySelector('#close').addEventListener('click', closeStartup, false);\n\n        gallery();\n    };\n\n    const loadStartup = (href, name) => {\n        window\n            .fetch(alven_ajax.ajax_url + '?action=alven_portfolio_ajax&name=' + name, {\n                method: 'POST'\n            })\n            .then(response => response.text())\n            .then(html => openStartup(html, href, name))\n            .catch(ex => console.error('Error', ex.message));\n    };\n\n    forEach(links, link => {\n        link.addEventListener(\n            'click',\n            e => {\n                e.preventDefault();\n                loadStartup(link.href, link.dataset.name);\n            },\n            false\n        );\n    });\n\n    if (window.location.pathname === '/portfolio/' && window.location.hash) {\n        loadStartup(window.location.href, window.location.hash.replace('#', ''));\n    }\n};\n\nexport default startup;\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./wp-content/themes/alven/src/js/components/team.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAA4B;AAC4B;;AAExD,yCAAI,gBAAgB,qEAAc;;AAElC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA,YAAY,yCAAI;;AAEhB,QAAQ,yCAAI;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA,gBAAgB,yCAAI,aAAa,mCAAmC;AACpE,gBAAgB,yCAAI,gBAAgB,aAAa;AACjD;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEe,mEAAI,EAAC","file":"team.js","sourcesContent":["import { gsap } from 'gsap';\nimport { ScrollToPlugin } from 'gsap/ScrollToPlugin.js';\n\ngsap.registerPlugin(ScrollToPlugin);\n\nconst team = () => {\n    const team = document.getElementById('team');\n\n    if (!team) return;\n\n    const members = team.querySelectorAll('.team-member');\n    const nbMembers = members.length;\n    const desc = document.createElement('div');\n    let wWidth = 0;\n    let row = 5;\n    let index = 0;\n    let indexPos = 0;\n    let parent;\n    let next;\n    let prev;\n\n    const closeDetail = member => {\n        members.forEach(elt => {\n            elt.classList.remove('off');\n            elt.classList.remove('on');\n        });\n    };\n\n    const displayDetail = member => {\n        if (gsap.isTweening('#desc')) return;\n\n        gsap.to(desc, 0.3, {\n            opacity: 0,\n            onComplete: () => {\n                member.blur();\n                desc.innerHTML = '';\n\n                if (member.classList.contains('on')) {\n                    closeDetail(member);\n                    return;\n                }\n\n                members.forEach(elt => {\n                    elt.classList.add('off');\n                    elt.classList.remove('on');\n                });\n                member.classList.remove('off');\n                member.classList.add('on');\n\n                parent = member.parentElement;\n\n                desc.appendChild(parent.querySelector('.name').cloneNode(true));\n                desc.appendChild(parent.querySelector('.function').cloneNode(true));\n                desc.appendChild(parent.querySelector('.team-desc').cloneNode(true));\n\n                index = [].indexOf.call(members, member);\n                indexPos = (Math.floor(index / row) + 1) * row - 1;\n                indexPos = indexPos > nbMembers ? nbMembers - 1 : indexPos;\n\n                members[indexPos].parentElement.after(desc);\n\n                desc.querySelector('.next').addEventListener(\n                    'click',\n                    () => {\n                        next = members[index + 1] ? members[index + 1] : members[0];\n                        displayDetail(next);\n                    },\n                    false\n                );\n\n                desc.querySelector('.prev').addEventListener(\n                    'click',\n                    () => {\n                        prev = members[index - 1] ? members[index - 1] : members[nbMembers - 1];\n                        displayDetail(prev);\n                    },\n                    false\n                );\n\n                gsap.to(window, { duration: 0.8, scrollTo: '#desc' });\n                gsap.to(desc, 0.3, { opacity: 1 });\n            }\n        });\n    };\n\n    const resize = () => {\n        wWidth = window.$stereorepo.superWindow.windowWidth;\n        if (wWidth >= 960) {\n            row = 5;\n        } else if (wWidth >= 580) {\n            row = 3;\n        } else {\n            row = 2;\n        }\n    };\n\n    window.$stereorepo.superWindow.initializeWindow();\n    window.$stereorepo.superWindow.addResizeFunction(resize);\n    resize();\n\n    desc.className = 'container wrapper-desc';\n    desc.id = 'desc';\n\n    members.forEach(member => {\n        member.addEventListener(\n            'click',\n            () => {\n                displayDetail(member);\n            },\n            false\n        );\n    });\n};\n\nexport default team;\n"],"sourceRoot":""}
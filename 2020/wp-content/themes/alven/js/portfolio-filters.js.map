{"version":3,"sources":["webpack:///./wp-content/themes/alven/src/js/components/portfolio-filters.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA0C;;AAEd;AAC4B;;AAExD,yCAAI,gBAAgB,qEAAc;;AAElC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,+DAAO;AACf,YAAY,+DAAO;AACnB;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA,0BAA0B,oEAAoE;AAC9F;AACA;;AAEA;AACA;AACA,QAAQ,+DAAO;AACf;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,QAAQ,+DAAO;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,QAAQ,+DAAO;AACf;AACA,SAAS;;AAET,QAAQ,yCAAI,aAAa,2BAA2B,6BAA6B,EAAE;AACnF;;AAEA,IAAI,+DAAO;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL;AACA,IAAI,+DAAO;AACX;AACA;AACA;AACA;AACA,gBAAgB,yCAAI,8BAA8B,mBAAmB,GAAG,mBAAmB;AAC3F,gBAAgB,yCAAI,+DAA+D,QAAQ,GAAG,oBAAoB;AAClH;AACA,aAAa;AACb;AACA;AACA,KAAK;;AAEL,IAAI,+DAAO;AACX;AACA;AACA;AACA,gBAAgB,yCAAI,0DAA0D,QAAQ;AACtF,gBAAgB,yCAAI;AACpB;AACA;AACA;AACA,wBAAwB,yCAAI,sBAAsB,kBAAkB;AACpE;AACA,iBAAiB;AACjB;AACA,gBAAgB,yCAAI,cAAc,iCAAiC;AACnE,aAAa;AACb;AACA;AACA,KAAK;AACL;;AAEe,wEAAS,EAAC","file":"portfolio-filters.js","sourcesContent":["import { forEach } from '@stereorepo/sac';\n\nimport { gsap } from 'gsap';\nimport { ScrollToPlugin } from 'gsap/ScrollToPlugin.js';\n\ngsap.registerPlugin(ScrollToPlugin);\n\nconst portfolio = () => {\n    const portfolio = document.getElementById('portfolio');\n    const filters = document.getElementById('portfolio-filters');\n\n    if (!portfolio || !filters) return;\n\n    const btns = filters.querySelectorAll('.btn-filter');\n    const links = portfolio.querySelectorAll('li');\n    const types = ['investment', 'location', 'field', 'subfield'];\n    let filterNames = [];\n\n    // responsive variables\n    let filtersWrapper;\n    const btnsFilters = filters.querySelectorAll('.js-open-filters');\n    const closeFilters = filters.querySelectorAll('.js-close-filters');\n\n    const sortPortfolio = () => {\n        forEach(links, link => {\n            forEach(filterNames, filter => {\n                if (!link.dataset[filter.name].split(',').includes(filter.filter)) link.classList.add('off');\n            });\n        });\n    };\n\n    const addFilter = btn => {\n        filterNames.push({ name: btn.dataset.filter, filter: btn.dataset[btn.dataset.filter] });\n        sortPortfolio();\n    };\n\n    const removeFilter = btn => {\n        filterNames = filterNames.filter(x => x.filter !== btn.dataset[btn.dataset.filter]);\n        forEach(links, link => {\n            if (!link.dataset[btn.dataset.filter].split(',').includes(btn.dataset[btn.dataset.filter]))\n                link.classList.remove('off');\n        });\n\n        sortPortfolio();\n\n        btn.classList.remove('on');\n        btn.blur();\n    };\n\n    const handleUniqueFilter = (btn, cat) => {\n        if (btn.dataset.filter !== cat) return;\n\n        forEach(btns, link => {\n            if (\n                (cat === 'field' && link.dataset.filter === 'subfield') ||\n                (cat === 'subfield' && link.dataset.filter === 'field' && btn.dataset.parent !== link.dataset.field)\n            ) {\n                removeFilter(link);\n            }\n\n            if (!link.dataset[cat]) return;\n\n            if (link.dataset[cat] !== btn.dataset[btn.dataset.filter] && link.classList.contains('on')) {\n                removeFilter(link);\n            }\n        });\n    };\n\n    const handleFilter = btn => {\n        if (btn.classList.contains('on')) {\n            removeFilter(btn);\n            return;\n        }\n\n        addFilter(btn);\n        btn.classList.add('on');\n\n        forEach(types, type => {\n            handleUniqueFilter(btn, type);\n        });\n\n        gsap.to(window, { duration: 0.5, scrollTo: { y: '#startup', offsetY: 70 } });\n    };\n\n    forEach(btns, btn => {\n        if (btn.classList.contains('on')) {\n            addFilter(btn);\n        }\n\n        btn.addEventListener(\n            'click',\n            () => {\n                handleFilter(btn);\n            },\n            false\n        );\n    });\n\n    // responsive\n    forEach(btnsFilters, btn => {\n        btn.addEventListener(\n            'click',\n            () => {\n                filtersWrapper = document.getElementById(btn.dataset.type);\n                gsap.fromTo(filtersWrapper, 0.2, { display: 'block' }, { opacity: 1, y: 0 });\n                gsap.fromTo(filtersWrapper.querySelector('.filters-inner'), 0.25, { y: 50 }, { y: 0, delay: 0.05 });\n                document.getElementsByTagName('html')[0].classList.add('no-scroll');\n            },\n            false\n        );\n    });\n\n    forEach(closeFilters, btn => {\n        btn.addEventListener(\n            'click',\n            () => {\n                gsap.to(filtersWrapper.querySelector('.filters-inner'), 0.2, { y: 50 });\n                gsap.to(filtersWrapper, 0.2, {\n                    opacity: 0,\n                    delay: 0.1,\n                    onComplete: () => {\n                        gsap.set(filtersWrapper, { display: 'none' });\n                    }\n                });\n                document.getElementsByTagName('html')[0].classList.remove('no-scroll');\n                gsap.set(window, { scrollTo: '#portfolio-filters' });\n            },\n            false\n        );\n    });\n};\n\nexport default portfolio;\n"],"sourceRoot":""}